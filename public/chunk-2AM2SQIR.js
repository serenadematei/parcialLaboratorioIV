import{a as be}from"./chunk-LJ4VENC6.js";import{a as te,b as ie,c as d,d as ne,e as oe,f as re,g as ae,h as le,i as se,j as de,k as ce,l as me,m as pe,n as ue,o as ge,p as fe,q as he}from"./chunk-FJQILSXK.js";import{a as ye}from"./chunk-4KHXCC4A.js";import{$ as W,A as L,B as z,C as s,D as h,G as g,I as u,J as b,K as o,L as n,M as m,N as B,O as f,P as q,Q as l,R as G,S as U,T as H,U as R,W as P,_ as $,a as w,aa as y,b as V,ba as Y,d as Pe,f as k,fa as K,g as O,i as A,la as Q,m as T,ma as Z,oa as J,p as I,pa as X,s as _,ta as ee,u as D,w as N,x as j,z as F}from"./chunk-FDKKDBFR.js";var v=Pe(ye());function Oe(r,i){if(r&1){let C=B();o(0,"tr")(1,"button",5),f("click",function(){let a=N(C).$implicit,e=q();return j(e.emitirPais(a.nombre))}),o(2,"td"),l(3),n(),o(4,"td"),m(5,"img",6),n()()()}if(r&2){let C=i.$implicit;s(3),G(C.nombre),s(2),u("src",C.bandera,z)}}var ve=(()=>{let i=class i{constructor(){this.paisEmitido=new L,this.paises=[]}ngOnInit(){}emitirPais(t){this.paisEmitido.emit(t)}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=_({type:i,selectors:[["app-listado-paises"]],inputs:{listaPaises:"listaPaises"},outputs:{paisEmitido:"paisEmitido"},standalone:!0,features:[P],decls:6,vars:1,consts:[[1,"jumbotron"],[1,"container-md"],[1,"row","overflow-auto",2,"max-height","300px"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["type","button",1,"pais-button",3,"click"],[1,"",2,"width","50px","height","25px",3,"src"]],template:function(a,e){a&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"table",3)(4,"tbody"),g(5,Oe,6,2,"tr",4),n()()()()()),a&2&&(s(5),u("ngForOf",e.listaPaises))},dependencies:[y,$],styles:[".main-container[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:150px}th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#aaa;color:#fff}.pais-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:10px;background-color:#fff;color:#000;border:none;cursor:pointer;transition:background-color .3s;text-decoration:none}.pais-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]});let r=i;return r})();var Ce=(()=>{let i=class i{constructor(t){this.el=t}onInputChange(t){let a=this.el.nativeElement.value;this.el.nativeElement.value=a.replace(/[^0-9]*/g,""),a!==this.el.nativeElement.value&&t.stopPropagation()}};i.\u0275fac=function(a){return new(a||i)(h(F))},i.\u0275dir=D({type:i,selectors:[["","numbersOnly",""]],hostBindings:function(a,e){a&1&&f("input",function(c){return e.onInputChange(c)})},standalone:!0});let r=i;return r})();var _e=(()=>{let i=class i{constructor(t){this.http=t,this.urlApi="https://restcountries.com/v3.1/region/",this.paises=[],this.datosGitSubject=new O(null),this.paisSubject=new O(null),this.pais$=this.paisSubject.asObservable(),this.datosGit$=this.datosGitSubject.asObservable()}ngOnInit(){this.obtenerPaises()}obtenerPaises(t=""){let a=this.urlApi+t;return this.http.get(a).pipe(A(e=>Array.isArray(e)?e.slice(0,3).map(c=>({nombre:c.translations?.es?.common||c.name.common,region:c.region,bandera:c.flags.svg})):[]))}obtenerListadoParametro(t){return this.http.get(t)}};i.\u0275fac=function(a){return new(a||i)(I(Y))},i.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();function Me(r,i){r&1&&(o(0,"div",42),l(1," Ingrese su nombre. "),n())}function Se(r,i){r&1&&(o(0,"div",42),l(1," Su DNI debe contar con un m\xEDnimo de 7 y un m\xE1ximo de 8 n\xFAmeros. "),n())}function we(r,i){r&1&&(o(0,"div",42),l(1," Debe ser mayor de 18. "),n())}function Ve(r,i){r&1&&(o(0,"div",42),l(1," Por favor, seleccione un continente. "),n())}function ke(r,i){r&1&&(o(0,"div",42),l(1," Por favor, seleccione un pa\xEDs. "),n())}function Ae(r,i){r&1&&(o(0,"div",42),l(1," Ingrese la capacidad de transporte. Debe ser 1 como m\xEDnimo y 500 como m\xE1ximo. "),n())}var Je=(()=>{let i=class i{constructor(t,a,e,p,c){this.apiService=t,this.firestore=a,this.fb=e,this.router=p,this.auth=c,this.listaPaises=[],this.continente="",this.banderaSeleccionada=null,this.nombrePais="",this.formEnviado=!1,this.hasUnsavedChanges=!1,this.isDropdownOpen=!1,this.screenWidth=0,this.formAlta=this.fb.group({dni:["",[d.pattern("^[0-9]+"),d.minLength(7),d.maxLength(8)]],nombre:["",[d.pattern("^[a-zA-Z]+$"),d.minLength(2),d.maxLength(20)]],edad:["",[d.pattern("^[0-9]+"),d.min(18),d.max(99)]],capacidadTransporte:["",[d.pattern("^[0-9]+"),d.min(1),d.max(500)]],unidadPropia:[!1,d.required],continente:["",[d.minLength(3),d.maxLength(20)]],paisOrigen:["",[d.minLength(3),d.maxLength(99)]]}),this.currentUser$=this.auth.getCurrentUser(),this.formAlta.valueChanges.subscribe(()=>{this.hasUnsavedChanges=this.formAlta.dirty})}ngOnInit(){this.apiService.pais$.subscribe(t=>{t&&(this.nombrePais=t.nombre)})}canDeactivate(){return this.hasUnsavedChanges?this.showConfirmationDialog():!0}showConfirmationDialog(){return new k(t=>{v.default.fire({title:"Tienes cambios sin guardar",text:"\xBFEst\xE1s seguro de que quieres salir?",icon:"warning",showCancelButton:!0,confirmButtonText:"Salir",cancelButtonText:"Cancelar"}).then(a=>{a.isConfirmed?(t.next(!0),t.complete()):(t.next(!1),t.complete())})})}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onDocumentClick(t){t.target.closest(".navbar-custom")||(this.isDropdownOpen=!1)}getValue(t){return this.formAlta.get(t)}getCountries(t){this.nombrePais=t}onClick(t){this.router.navigate(["/home"])}updatePaises(){let t=this.formAlta.get("continente");if(t&&t.value){let a=t.value;this.apiService.obtenerPaises(a).subscribe(e=>{this.listaPaises=e,this.banderaSeleccionada=null})}}onSubmit(){this.formEnviado=!0,this.formAlta.valid?(this.guardarDatos(this.formAlta.value),this.formAlta.reset(),this.hasUnsavedChanges=!1):v.default.fire({icon:"error",title:"Error",text:"Debe completar todos los campos antes de guardar."})}guardarDatos(t){t.unidadPropia===null?t.unidadPropia="No":t.unidadPropia=t.unidadPropia?"S\xED":"No";let e=X(this.firestore,"Alta");J(e,V(w({},t),{fechaCreacion:Q.now()})).then(()=>{v.default.fire({icon:"success",title:"Guardado exitosamente",text:"\xA1El repartidor ha sido dado de alta con \xE9xito!",confirmButtonText:"OK"}),this.limpiarListaPaises()}).catch(p=>{console.error("Error al guardar en Firestore: ",p),v.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al guardar los datos del repartidor."})})}limpiarListaPaises(){this.listaPaises=[],this.banderaSeleccionada=null,this.nombrePais=""}goTo(t){this.router.navigate([t])}};i.\u0275fac=function(a){return new(a||i)(h(_e),h(Z),h(ge),h(K),h(ee))},i.\u0275cmp=_({type:i,selectors:[["app-alta"]],standalone:!0,features:[P],decls:74,vars:22,consts:[[1,"background-image"],[1,"container"],[1,"fab-container"],[1,"fab",3,"click"],[1,"titulo"],[1,"row","g-5"],[1,"col-md-5","col-lg-4","order-md-last"],[1,"card","mb-4","shadow-sm"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-primary"],[1,"list-group","mb-3"],[1,"col",3,"paisEmitido","listaPaises"],[1,"col-md-7","col-lg-8"],[1,"card","mb-4","custom-card"],[1,"mb-3"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"row","g-3"],[1,"col-md-6"],["for","lastName",1,"form-label"],["type","text","formControlName","nombre","id","nombre","placeholder","","lettersOnly","","required","",1,"form-control"],["class","errorMessage",4,"ngIf"],[1,"invalid-feedback"],[1,"col-sm-6"],["for","dni",1,"form-label"],["type","text","formControlName","dni","id","dni","placeholder","","minlength","7","maxlength","8","numbersOnly","","required","",1,"form-control"],["for","zip",1,"form-label"],["type","text","formControlName","edad","id","edad","placeholder","","minlength","2","maxlength","2","numbersOnly","","required","",1,"form-control"],["for","country",1,"form-label"],["formControlName","continente","id","continente","required","",1,"form-select",3,"change"],["value","africa"],["value","europe"],[1,"col-md-12"],["for","state",1,"form-label"],["type","text","formControlName","paisOrigen","id","paisOrigen","placeholder","","required","",1,"form-control",3,"ngModelChange","ngModel","readonly"],["for","unidadPropia",1,"form-label"],[1,"form-check"],["type","checkbox","formControlName","unidadPropia","id","unidadPropia",1,"form-check-input"],["for","unidadPropia",1,"form-check-label"],["type","text","formControlName","capacidadTransporte","id","capacidadTransporte","placeholder","en unidades","minlength","1","maxlength","3","numbersOnly","","required","",1,"form-control"],[1,"my-4"],["type","button",1,"w-100","btn","btn-primary","btn-lg",3,"click"],[1,"errorMessage"]],template:function(a,e){if(a&1&&(m(0,"div",0),o(1,"div",1)(2,"div",2)(3,"div")(4,"a",3),f("click",function(){return e.goTo("/home")}),l(5,"Ir a Inicio"),n()()(),o(6,"div",4)(7,"h2"),l(8,"Alta Repartidores"),n()(),o(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"h4",9)(14,"span",10),l(15,"Paises"),n()(),o(16,"ul",11)(17,"app-listado-paises",12),f("paisEmitido",function(c){return e.getCountries(c)}),n()()()()(),o(18,"div",13)(19,"div",14)(20,"div",8)(21,"h4",15),l(22,"Datos personales"),n(),o(23,"form",16)(24,"div",17)(25,"div",18)(26,"label",19),l(27,"Nombre"),n(),m(28,"input",20),g(29,Me,2,0,"div",21),m(30,"div",22),n(),o(31,"div",23)(32,"label",24),l(33,"DNI"),n(),m(34,"input",25),g(35,Se,2,0,"div",21),n(),o(36,"div",18)(37,"label",26),l(38,"Edad"),n(),m(39,"input",27),g(40,we,2,0,"div",21),m(41,"div",22),n(),o(42,"div",18)(43,"label",28),l(44,"Continente"),n(),o(45,"select",29),f("change",function(){return e.updatePaises()}),o(46,"option",30),l(47,"Africa"),n(),o(48,"option",31),l(49,"Europa"),n()(),g(50,Ve,2,0,"div",21),m(51,"div",22),n(),o(52,"div",32)(53,"label",33),l(54,"Pais de origen"),n(),o(55,"input",34),R("ngModelChange",function(c){return H(e.nombrePais,c)||(e.nombrePais=c),c}),n(),g(56,ke,2,0,"div",21),m(57,"div",22),n()(),o(58,"div",18),m(59,"br"),o(60,"label",35),l(61,"\xBFTiene unidad propia?"),n(),o(62,"div",36),m(63,"input",37)(64,"label",38),n()(),o(65,"div",18)(66,"label",19),l(67,"Capacidad de Transporte"),n(),m(68,"input",39),g(69,Ae,2,0,"div",21),m(70,"div",22),n(),m(71,"hr",40),o(72,"button",41),f("click",function(){return e.onSubmit()}),l(73,"Guardar"),n()()()()()()()),a&2){let p,c,x,M,S;s(17),u("listaPaises",e.listaPaises),s(6),u("formGroup",e.formAlta),s(5),b("campo-con-error",e.getValue("nombre").invalid&&(e.getValue("nombre").touched||e.getValue("nombre").dirty)),s(),u("ngIf",((p=e.getValue("nombre"))==null?null:p.invalid)&&(e.getValue("nombre").touched||e.getValue("nombre").dirty)),s(5),b("campo-con-error",e.getValue("dni").invalid&&(e.getValue("dni").touched||e.getValue("dni").dirty)),s(),u("ngIf",e.getValue("dni").invalid&&(e.getValue("dni").touched||e.getValue("dni").dirty)),s(4),b("campo-con-error",e.getValue("edad").invalid&&(e.getValue("edad").touched||e.getValue("edad").dirty)),s(),u("ngIf",((c=e.getValue("edad"))==null?null:c.invalid)&&(e.getValue("edad").touched||e.getValue("edad").dirty)),s(5),b("campo-con-error",e.getValue("continente").invalid&&(e.getValue("continente").touched||e.getValue("continente").dirty)),s(5),u("ngIf",((x=e.getValue("continente"))==null?null:x.invalid)&&(e.getValue("continente").touched||e.getValue("continente").dirty)),s(5),b("campo-con-error",e.getValue("paisOrigen").invalid&&(e.getValue("paisOrigen").touched||e.getValue("paisOrigen").dirty)),U("ngModel",e.nombrePais),u("readonly",!0),s(),u("ngIf",((M=e.getValue("paisOrigen"))==null?null:M.invalid)&&(e.getValue("paisOrigen").touched||e.getValue("paisOrigen").dirty)),s(12),b("campo-con-error",e.getValue("capacidadTransporte").invalid&&(e.getValue("capacidadTransporte").touched||e.getValue("capacidadTransporte").dirty)),s(),u("ngIf",((S=e.getValue("capacidadTransporte"))==null?null:S.invalid)&&(e.getValue("capacidadTransporte").touched||e.getValue("capacidadTransporte").dirty))}},dependencies:[y,W,fe,re,de,ce,ie,te,se,ne,oe,me,pe,ue,he,ae,le,ve,Ce,be],styles:['.background-image[_ngcontent-%COMP%]{position:fixed;z-index:-1;top:0;left:0;width:100%;height:100%;background-image:url("./media/fondo-NHIDQHN2.jpg");background-position:center top;background-repeat:no-repeat;background-size:cover}h2[_ngcontent-%COMP%]{color:#880e4f;font-size:30px;font-weight:700}.container[_ngcontent-%COMP%]{display:grid;place-items:center;margin-left:auto;margin-right:auto;padding:40px;height:100vh}.mb-3[_ngcontent-%COMP%]{text-align:center}.col-md-7[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.form-container[_ngcontent-%COMP%]{text-align:center}.errorMessage[_ngcontent-%COMP%]{color:#0b086c}.campo-con-error[_ngcontent-%COMP%]{border:1px solid red}.back-button[_ngcontent-%COMP%]{border:0;background-color:#313131ef;color:#f8f8f8;font-family:inherit;padding:16px 26px;font-size:16px;border-radius:40px;font-family:Euclid Circular A,Poppins;cursor:pointer;display:block;margin:0 auto}.navbar-custom[_ngcontent-%COMP%]{position:fixed;top:0;right:0;padding:10px 20px;z-index:1000;display:flex;align-items:center}.navbar-custom[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none;cursor:pointer;display:flex;align-items:center}.user-photo[_ngcontent-%COMP%]{width:2rem;min-width:2rem;height:2rem;border-radius:50%;margin-right:.5rem}.card[_ngcontent-%COMP%]{margin-top:3rem;background-color:#fff;border-radius:.5rem;box-shadow:0 4px 8px #0000001a;width:25rem}.card-body[_ngcontent-%COMP%]{padding:1.25rem}.list-group[_ngcontent-%COMP%]{margin-bottom:0}.custom-card[_ngcontent-%COMP%]{margin-top:5rem;background-color:#f8f9fa;border-radius:.25rem;box-shadow:0 2px 4px #0000001a}.custom-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.logout-button[_ngcontent-%COMP%]{margin-left:auto;cursor:pointer;width:2rem;height:2rem;border-radius:50%;background-color:transparent;border:none;color:#000;display:flex;align-items:center;position:relative;font:"Poppins",sans-serif}.logout-button[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.5rem}.dropdown-content[_ngcontent-%COMP%]{position:absolute;top:calc(65% + 10px);right:0;text-align:center;border-radius:.313rem;padding:.2rem;min-width:10rem}.dropdown-content[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:100%;border:none;background:transparent;color:#000;cursor:pointer;display:flex;align-items:center;padding:.5rem 0;transition:background-color .3s}.fab-container[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;z-index:1000}.fab[_ngcontent-%COMP%]{background-color:#ed6794;color:#fff;padding:10px 20px;border:none;border-radius:8px;font-size:16px;box-shadow:0 4px 12px #0003;cursor:pointer;transition:background-color .3s,transform .2s;text-decoration:none;display:flex;align-items:center;justify-content:center}.fab[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:translateY(-2px)}.fab[_ngcontent-%COMP%]:active{background-color:#004494;transform:translateY(0)}.dropdown-content[_ngcontent-%COMP%]{position:absolute;top:70px;right:0;background-color:#fff;border-radius:4px;box-shadow:0 2px 10px #0003;display:none}.dropdown-content[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]{width:100%;border:none;background:transparent;color:#000;cursor:pointer;display:flex;align-items:center;padding:10px;transition:background-color .3s}.dropdown-content[_ngcontent-%COMP%]{display:block}']});let r=i;return r})();export{Je as AltaComponent};
