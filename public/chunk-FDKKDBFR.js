var L0=Object.create;var Sd=Object.defineProperty,V0=Object.defineProperties,U0=Object.getOwnPropertyDescriptor,j0=Object.getOwnPropertyDescriptors,B0=Object.getOwnPropertyNames,oI=Object.getOwnPropertySymbols,cI=Object.getPrototypeOf,uI=Object.prototype.hasOwnProperty,$0=Object.prototype.propertyIsEnumerable,q0=Reflect.get;var aI=(t,e,n)=>e in t?Sd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})uI.call(e,n)&&aI(t,n,e[n]);if(oI)for(var n of oI(e))$0.call(e,n)&&aI(t,n,e[n]);return t},be=(t,e)=>V0(t,j0(e));var ij=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var H0=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of B0(e))!uI.call(t,i)&&i!==n&&Sd(t,i,{get:()=>e[i],enumerable:!(r=U0(e,i))||r.enumerable});return t};var sj=(t,e,n)=>(n=t!=null?L0(cI(t)):{},H0(e||!t||!t.__esModule?Sd(n,"default",{value:t,enumerable:!0}):n,t));var kn=(t,e,n)=>q0(cI(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function X(t){return typeof t=="function"}function ci(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var za=ci(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function mr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(s){e=s instanceof za?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{lI(s)}catch(o){e=e??[],o instanceof za?e=[...e,...o.errors]:e.push(o)}}if(e)throw new za(e)}}add(e){var n;if(e&&e!==this)if(this.closed)lI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&mr(n,e)}remove(e){let{_finalizers:n}=this;n&&mr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Ad=Re.EMPTY;function Ga(t){return t instanceof Re||t&&"closed"in t&&X(t.remove)&&X(t.add)&&X(t.unsubscribe)}function lI(t){X(t)?t():t.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ui={setTimeout(t,e,...n){let{delegate:r}=ui;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ui;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wa(t){ui.setTimeout(()=>{let{onUnhandledError:e}=Rt;if(e)e(t);else throw t})}function Ys(){}var dI=Rd("C",void 0,void 0);function hI(t){return Rd("E",void 0,t)}function fI(t){return Rd("N",t,void 0)}function Rd(t,e,n){return{kind:t,value:e,error:n}}var yr=null;function li(t){if(Rt.useDeprecatedSynchronousErrorHandling){let e=!yr;if(e&&(yr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=yr;if(yr=null,n)throw r}}else t()}function pI(t){Rt.useDeprecatedSynchronousErrorHandling&&yr&&(yr.errorThrown=!0,yr.error=t)}var vr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ga(e)&&e.add(this)):this.destination=W0}static create(e,n,r){return new di(e,n,r)}next(e){this.isStopped?Md(fI(e),this):this._next(e)}error(e){this.isStopped?Md(hI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Md(dI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},z0=Function.prototype.bind;function Nd(t,e){return z0.call(t,e)}var xd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ka(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ka(r)}else Ka(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ka(n)}}},di=class extends vr{constructor(e,n,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Rt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Nd(e.next,s),error:e.error&&Nd(e.error,s),complete:e.complete&&Nd(e.complete,s)}):i=e}this.destination=new xd(i)}};function Ka(t){Rt.useDeprecatedSynchronousErrorHandling?pI(t):Wa(t)}function G0(t){throw t}function Md(t,e){let{onStoppedNotification:n}=Rt;n&&ui.setTimeout(()=>n(t,e))}var W0={closed:!0,next:Ys,error:G0,complete:Ys};var hi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function dt(t){return t}function Pd(...t){return Od(t)}function Od(t){return t.length===0?dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=Q0(n)?n:new di(n,r,i);return li(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=gI(r),new r((i,s)=>{let o=new di({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[hi](){return this}pipe(...n){return Od(n)(this)}toPromise(n){return n=gI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function gI(t){var e;return(e=t??Rt.Promise)!==null&&e!==void 0?e:Promise}function K0(t){return t&&X(t.next)&&X(t.error)&&X(t.complete)}function Q0(t){return t&&t instanceof vr||K0(t)&&Ga(t)}function kd(t){return X(t?.lift)}function le(t){return e=>{if(kd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,r,i){return new Fd(t,e,n,r,i)}var Fd=class extends vr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function fi(){return le((t,e)=>{let n=null;t._refCount++;let r=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var pi=class extends re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,kd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return fi()(this)}};var mI=ci(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class t extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Qa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new mI}next(n){li(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){li(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){li(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ad:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,mr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return t.create=(e,n)=>new Qa(e,n),t})(),Qa=class extends et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ad}};var Oe=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ld={now(){return(Ld.delegate||Date).now()},delegate:void 0};var Ya=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Js={setInterval(t,e,...n){let{delegate:r}=Js;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Js;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var gi=class extends Ya{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Js.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Js.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,mr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var mi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};mi.now=Ld.now;var yi=class extends mi{constructor(e,n=mi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Vd=new yi(gi);var Ja=class extends gi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xa=class extends yi{};var Ud=new Xa(Ja);var ht=new re(t=>t.complete());function yI(t){return t&&X(t.schedule)}function vI(t){return t[t.length-1]}function Za(t){return X(vI(t))?t.pop():void 0}function Fn(t){return yI(vI(t))?t.pop():void 0}function jd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function II(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ir(t){return this instanceof Ir?(this.v=t,this):new Ir(t)}function _I(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(A){return Promise.resolve(A).then(_,p)}}function a(_,A){r[_]&&(i[_]=function(N){return new Promise(function(R,x){s.push([_,N,R,x])>1||u(_,N)})},A&&(i[_]=A(i[_])))}function u(_,A){try{l(r[_](A))}catch(N){m(s[0][3],N)}}function l(_){_.value instanceof Ir?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,A){_(A),s.shift(),s.length&&u(s[0][0],s[0][1])}}function EI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof II=="function"?II(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var ec=t=>t&&typeof t.length=="number"&&typeof t!="function";function tc(t){return X(t?.then)}function nc(t){return X(t[hi])}function rc(t){return Symbol.asyncIterator&&X(t?.[Symbol.asyncIterator])}function ic(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Y0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sc=Y0();function oc(t){return X(t?.[sc])}function ac(t){return _I(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Ir(n.read());if(i)return yield Ir(void 0);yield yield Ir(r)}}finally{n.releaseLock()}})}function cc(t){return X(t?.getReader)}function Ne(t){if(t instanceof re)return t;if(t!=null){if(nc(t))return J0(t);if(ec(t))return X0(t);if(tc(t))return Z0(t);if(rc(t))return TI(t);if(oc(t))return eS(t);if(cc(t))return tS(t)}throw ic(t)}function J0(t){return new re(e=>{let n=t[hi]();if(X(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function X0(t){return new re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Z0(t){return new re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wa)})}function eS(t){return new re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function TI(t){return new re(e=>{nS(t,e).catch(n=>e.error(n))})}function tS(t){return TI(ac(t))}function nS(t,e){var n,r,i,s;return wI(this,void 0,void 0,function*(){try{for(n=EI(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ot(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ln(t,e=0){return le((n,r)=>{n.subscribe(se(r,i=>ot(r,t,()=>r.next(i),e),()=>ot(r,t,()=>r.complete(),e),i=>ot(r,t,()=>r.error(i),e)))})}function Vn(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function DI(t,e){return Ne(t).pipe(Vn(e),Ln(e))}function bI(t,e){return Ne(t).pipe(Vn(e),Ln(e))}function CI(t,e){return new re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function SI(t,e){return new re(n=>{let r;return ot(n,e,()=>{r=t[sc](),ot(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function uc(t,e){if(!t)throw new Error("Iterable cannot be null");return new re(n=>{ot(n,e,()=>{let r=t[Symbol.asyncIterator]();ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function AI(t,e){return uc(ac(t),e)}function RI(t,e){if(t!=null){if(nc(t))return DI(t,e);if(ec(t))return CI(t,e);if(tc(t))return bI(t,e);if(rc(t))return uc(t,e);if(oc(t))return SI(t,e);if(cc(t))return AI(t,e)}throw ic(t)}function Te(t,e){return e?RI(t,e):Ne(t)}function Y(...t){let e=Fn(t);return Te(t,e)}function vi(t,e){let n=X(t)?t:()=>t,r=i=>i.error(n());return new re(e?i=>e.schedule(r,0,i):r)}function Bd(t){return!!t&&(t instanceof re||X(t.lift)&&X(t.subscribe))}var dn=ci(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(t,e){return le((n,r)=>{let i=0;n.subscribe(se(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:rS}=Array;function iS(t,e){return rS(e)?t(...e):t(e)}function lc(t){return ee(e=>iS(t,e))}var{isArray:sS}=Array,{getPrototypeOf:oS,prototype:aS,keys:cS}=Object;function dc(t){if(t.length===1){let e=t[0];if(sS(e))return{args:e,keys:null};if(uS(e)){let n=cS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function uS(t){return t&&typeof t=="object"&&oS(t)===aS}function hc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function fc(...t){let e=Fn(t),n=Za(t),{args:r,keys:i}=dc(t);if(r.length===0)return Te([],e);let s=new re(lS(r,e,i?o=>hc(i,o):dt));return n?s.pipe(lc(n)):s}function lS(t,e,n=dt){return r=>{NI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)NI(e,()=>{let l=Te(t[u],e),h=!1;l.subscribe(se(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function NI(t,e,n){t?ot(n,t,e):e()}function MI(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},_=N=>l<r?A(N):u.push(N),A=N=>{s&&e.next(N),l++;let R=!1;Ne(n(N,h++)).subscribe(se(e,x=>{i?.(x),s?_(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();o?ot(e,o,()=>A(x)):A(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(se(e,_,()=>{p=!0,m()})),()=>{a?.()}}function ke(t,e,n=1/0){return X(e)?ke((r,i)=>ee((s,o)=>e(r,s,i,o))(Ne(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>MI(r,i,t,n)))}function $d(t=1/0){return ke(dt,t)}function xI(){return $d(1)}function Ii(...t){return xI()(Te(t,Fn(t)))}function pc(t){return new re(e=>{Ne(t()).subscribe(e)})}function dS(...t){let e=Za(t),{args:n,keys:r}=dc(t),i=new re(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ne(n[h]).subscribe(se(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?hc(r,a):a),s.complete())}))}});return e?i.pipe(lc(e)):i}function ft(t,e){return le((n,r)=>{let i=0;n.subscribe(se(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Un(t){return le((e,n)=>{let r=null,i=!1,s;r=e.subscribe(se(n,void 0,void 0,o=>{s=Ne(t(o,Un(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function PI(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(se(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function jn(t,e){return X(e)?ke(t,e,1):ke(t,1)}function Bn(t){return le((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function hn(t){return t<=0?()=>ht:le((e,n)=>{let r=0;e.subscribe(se(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function qd(t){return ee(()=>t)}function gc(t=hS){return le((e,n)=>{let r=!1;e.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function hS(){return new dn}function wr(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ft((i,s)=>t(i,s,r)):dt,hn(1),n?Bn(e):gc(()=>new dn))}function wi(t){return t<=0?()=>ht:le((e,n)=>{let r=[];e.subscribe(se(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Hd(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ft((i,s)=>t(i,s,r)):dt,wi(1),n?Bn(e):gc(()=>new dn))}function zd(t,e){return le(PI(t,e,arguments.length>=2,!0))}function Gd(...t){let e=Fn(t);return le((n,r)=>{(e?Ii(t,n,e):Ii(t,n)).subscribe(r)})}function Ke(t,e){return le((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(se(r,u=>{i?.unsubscribe();let l=0,h=s++;Ne(t(u,h)).subscribe(i=se(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wd(t){return le((e,n)=>{Ne(t).subscribe(se(n,()=>n.complete(),Ys)),!n.closed&&e.subscribe(n)})}function Me(t,e,n){let r=X(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(se(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):dt}var OI=null;var Kd=1,Qd=Symbol("SIGNAL");function fe(t){let e=OI;return OI=t,e}var kI={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fS(t){if(!(Xd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Kd)){if(!t.producerMustRecompute(t)&&!Yd(t)){t.dirty=!1,t.lastCleanEpoch=Kd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Kd}}function FI(t){return t&&(t.nextProducerIndex=0),fe(t)}function LI(t,e){if(fe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Xd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Jd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Yd(t){mc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(fS(n),r!==n.version))return!0}return!1}function VI(t){if(mc(t),Xd(t))for(let e=0;e<t.producerNode.length;e++)Jd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Jd(t,e){if(pS(t),mc(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Jd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];mc(i),i.producerIndexOfThis[r]=e}}function Xd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function mc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function pS(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gS(){throw new Error}var mS=gS;function UI(t){mS=t}var Tw="https://g.co/ng/security#xss",z=class extends Error{constructor(e,n){super(zc(e,n)),this.code=e}};function zc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ho(t){return{toString:t}.toString()}var yc="__parameters__";function yS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Dw(t,e,n){return ho(()=>{let r=yS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(yc)?u[yc]:Object.defineProperty(u,yc,{value:[]})[yc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Xs=globalThis;function ve(t){for(let e in t)if(t[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function vS(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function nt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(nt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function jI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var IS=ve({__forward_ref__:ve});function bw(t){return t.__forward_ref__=bw,t.toString=function(){return nt(this())},t}function tt(t){return Cw(t)?t():t}function Cw(t){return typeof t=="function"&&t.hasOwnProperty(IS)&&t.__forward_ref__===bw}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fo(t){return{providers:t.providers||[],imports:t.imports||[]}}function Gc(t){return BI(t,Aw)||BI(t,Rw)}function Sw(t){return Gc(t)!==null}function BI(t,e){return t.hasOwnProperty(e)?t[e]:null}function wS(t){let e=t&&(t[Aw]||t[Rw]);return e||null}function $I(t){return t&&(t.hasOwnProperty(qI)||t.hasOwnProperty(_S))?t[qI]:null}var Aw=ve({\u0275prov:ve}),qI=ve({\u0275inj:ve}),Rw=ve({ngInjectableDef:ve}),_S=ve({ngInjectorDef:ve}),G=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Nw(t){return t&&!!t.\u0275providers}var ES=ve({\u0275cmp:ve}),TS=ve({\u0275dir:ve}),DS=ve({\u0275pipe:ve}),bS=ve({\u0275mod:ve}),bc=ve({\u0275fac:ve}),Zs=ve({__NG_ELEMENT_ID__:ve}),HI=ve({__NG_ENV_ID__:ve});function Wc(t){return typeof t=="string"?t:t==null?"":String(t)}function CS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Wc(t)}function SS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new z(-200,t)}function ef(t,e){throw new z(-201,!1)}var ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ie||{}),ph;function Mw(){return ph}function _t(t){let e=ph;return ph=t,e}function xw(t,e,n){let r=Gc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ie.Optional)return null;if(e!==void 0)return e;ef(t,"Injector")}var AS={},eo=AS,gh="__NG_DI_FLAG__",Cc="ngTempTokenPath",RS="ngTokenPath",NS=/\n/gm,MS="\u0275",zI="__source",Di;function xS(){return Di}function $n(t){let e=Di;return Di=t,e}function PS(t,e=ie.Default){if(Di===void 0)throw new z(-203,!1);return Di===null?xw(t,void 0,e):Di.get(t,e&ie.Optional?null:void 0,e)}function q(t,e=ie.Default){return(Mw()||PS)(tt(t),e)}function k(t,e=ie.Default){return q(t,Kc(e))}function Kc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mh(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new z(900,!1);let i,s=ie.Default;for(let o=0;o<r.length;o++){let a=r[o],u=OS(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function Pw(t,e){return t[gh]=e,t.prototype[gh]=e,t}function OS(t){return t[gh]}function kS(t,e,n,r){let i=t[Cc];throw e[zI]&&i.unshift(e[zI]),t.message=FS(`
`+t.message,i,n,r),t[RS]=i,t[Cc]=null,t}function FS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==MS?t.slice(2):t;let i=nt(e);if(Array.isArray(e))i=e.map(nt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):nt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NS,`
  `)}`}var rt=Pw(Dw("Optional"),8);var Ow=Pw(Dw("SkipSelf"),4);function Ci(t,e){let n=t.hasOwnProperty(bc);return n?t[bc]:null}function tf(t,e){t.forEach(n=>Array.isArray(n)?tf(n,e):e(n))}function kw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Sc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function LS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function VS(t,e,n){let r=po(t,e);return r>=0?t[r|1]=n:(r=~r,LS(t,r,e,n)),r}function Zd(t,e){let n=po(t,e);if(n>=0)return t[n|1]}function po(t,e){return US(t,e,1)}function US(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Si={},Et=[],Ai=new G(""),Fw=new G("",-1),Lw=new G(""),Ac=class{get(e,n=eo){if(n===eo){let r=new Error(`NullInjectorError: No provider for ${nt(e)}!`);throw r.name="NullInjectorError",r}return n}},Vw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Vw||{}),qt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(qt||{}),Hn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Hn||{});function jS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function yh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];$S(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function BS(t){return t===3||t===4||t===6}function $S(t){return t.charCodeAt(0)===64}function to(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?GI(t,n,i,null,e[++r]):GI(t,n,i,null,null))}}return t}function GI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Uw="ng-template";function qS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(nf(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function nf(t){return t.type===4&&t.value!==Uw}function HS(t,e,n){let r=t.type===4&&!n?Uw:t.value;return e===r}function zS(t,e,n){let r=4,i=t.attrs,s=i!==null?KS(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Nt(r)&&!Nt(u))return!1;if(o&&Nt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!HS(t,u,n)||u===""&&e.length===1){if(Nt(r))return!1;o=!0}}else if(r&8){if(i===null||!qS(t,i,u,n)){if(Nt(r))return!1;o=!0}}else{let l=e[++a],h=GS(u,i,nf(t),n);if(h===-1){if(Nt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nt(r))return!1;o=!0}}}}return Nt(r)||o}function Nt(t){return(t&1)===0}function GS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return QS(e,t)}function WS(t,e,n=!1){for(let r=0;r<e.length;r++)if(zS(t,e[r],n))return!0;return!1}function KS(t){for(let e=0;e<t.length;e++){let n=t[e];if(BS(n))return e}return t.length}function QS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function WI(t,e){return t?":not("+e.trim()+")":e}function YS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Nt(o)&&(e+=WI(s,i),i=""),r=o,s=s||!Nt(r);n++}return i!==""&&(e+=WI(s,i)),e}function JS(t){return t.map(YS).join(",")}function XS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Nt(i))break;i=s}r++}return{attrs:e,classes:n}}function jw(t){return ho(()=>{let e=zw(t),n=be(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Vw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||qt.Emulated,styles:t.styles||Et,_:null,schemas:t.schemas||null,tView:null,id:""});Gw(n);let r=t.dependencies;return n.directiveDefs=QI(r,!1),n.pipeDefs=QI(r,!0),n.id=tA(n),n})}function ZS(t){return Tr(t)||Bw(t)}function eA(t){return t!==null}function go(t){return ho(()=>({type:t.type,bootstrap:t.bootstrap||Et,declarations:t.declarations||Et,imports:t.imports||Et,exports:t.exports||Et,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function KI(t,e){if(t==null)return Si;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Hn.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Hn.None?[r,a]:r,e[s]=o):n[s]=r}return n}function mo(t){return ho(()=>{let e=zw(t);return Gw(e),e})}function Tr(t){return t[ES]||null}function Bw(t){return t[TS]||null}function $w(t){return t[DS]||null}function qw(t){let e=Tr(t)||Bw(t)||$w(t);return e!==null?e.standalone:!1}function Hw(t,e){let n=t[bS]||null;if(!n&&e===!0)throw new Error(`Type ${nt(t)} does not have '\u0275mod' property.`);return n}function zw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Si,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Et,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:KI(t.inputs,e),outputs:KI(t.outputs),debugInfo:null}}function Gw(t){t.features?.forEach(e=>e(t))}function QI(t,e){if(!t)return null;let n=e?$w:ZS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(eA)}function tA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Dt(t){return{\u0275providers:t}}function nA(...t){return{\u0275providers:Ww(!0,t),\u0275fromNgModule:!0}}function Ww(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return tf(e,o=>{let a=o;vh(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Kw(i,s),n}function Kw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];rf(i,s=>{e(s,r)})}}function vh(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,s=$I(t),o=!s&&Tr(t);if(!s&&!o){let u=t.ngModule;if(s=$I(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)vh(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{tf(s.imports,h=>{vh(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Kw(l,e)}if(!a){let l=Ci(i)||(()=>new i);e({provide:i,useFactory:l,deps:Et},i),e({provide:Lw,useValue:i,multi:!0},i),e({provide:Ai,useValue:()=>q(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;rf(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function rf(t,e){for(let n of t)Nw(n)&&(n=n.\u0275providers),Array.isArray(n)?rf(n,e):e(n)}var rA=ve({provide:String,useValue:ve});function Qw(t){return t!==null&&typeof t=="object"&&rA in t}function iA(t){return!!(t&&t.useExisting)}function sA(t){return!!(t&&t.useFactory)}function Ri(t){return typeof t=="function"}function oA(t){return!!t.useClass}var Qc=new G(""),wc={},aA={},eh;function sf(){return eh===void 0&&(eh=new Ac),eh}var at=class{},no=class extends at{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wh(e,o=>this.processProvider(o)),this.records.set(Fw,_i(void 0,this)),i.has("environment")&&this.records.set(at,_i(void 0,this));let s=this.records.get(Qc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Lw,Et,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=fe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=$n(this),r=_t(void 0),i;try{return e()}finally{$n(n),_t(r)}}get(e,n=eo,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(HI))return e[HI](this);r=Kc(r);let i,s=$n(this),o=_t(void 0);try{if(!(r&ie.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=hA(e)&&Gc(e);l&&this.injectableDefInScope(l)?u=_i(Ih(e),wc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ie.Self?sf():this.parent;return n=r&ie.Optional&&n===eo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Cc]=a[Cc]||[]).unshift(nt(e)),s)throw a;return kS(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(o),$n(s)}}resolveInjectorInitializers(){let e=fe(null),n=$n(this),r=_t(void 0),i;try{let s=this.get(Ai,Et,ie.Self);for(let o of s)o()}finally{$n(n),_t(r),fe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processProvider(e){e=tt(e);let n=Ri(e)?e:tt(e&&e.provide),r=uA(e);if(!Ri(e)&&e.multi===!0){let i=this.records.get(n);i||(i=_i(void 0,wc,!0),i.factory=()=>mh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=fe(null);try{return n.value===wc&&(n.value=aA,n.value=n.factory()),typeof n.value=="object"&&n.value&&dA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{fe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ih(t){let e=Gc(t),n=e!==null?e.factory:Ci(t);if(n!==null)return n;if(t instanceof G)throw new z(204,!1);if(t instanceof Function)return cA(t);throw new z(204,!1)}function cA(t){if(t.length>0)throw new z(204,!1);let n=wS(t);return n!==null?()=>n.factory(t):()=>new t}function uA(t){if(Qw(t))return _i(void 0,t.useValue);{let e=Yw(t);return _i(e,wc)}}function Yw(t,e,n){let r;if(Ri(t)){let i=tt(t);return Ci(i)||Ih(i)}else if(Qw(t))r=()=>tt(t.useValue);else if(sA(t))r=()=>t.useFactory(...mh(t.deps||[]));else if(iA(t))r=()=>q(tt(t.useExisting));else{let i=tt(t&&(t.useClass||t.provide));if(lA(t))r=()=>new i(...mh(t.deps));else return Ci(i)||Ih(i)}return r}function _i(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lA(t){return!!t.deps}function dA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function hA(t){return typeof t=="function"||typeof t=="object"&&t instanceof G}function wh(t,e){for(let n of t)Array.isArray(n)?wh(n,e):n&&Nw(n)?wh(n.\u0275providers,e):e(n)}function gn(t,e){t instanceof no&&t.assertNotDestroyed();let n,r=$n(t),i=_t(void 0);try{return e()}finally{$n(r),_t(i)}}function fA(){return Mw()!==void 0||xS()!=null}function pA(t){return typeof t=="function"}var mn=0,ue=1,K=2,Qe=3,xt=4,kt=5,Rc=6,ro=7,Pt=8,Ni=9,Ot=10,Fe=11,io=12,YI=13,Oi=14,Ht=15,Yc=16,Ei=17,Mi=18,Jc=19,Jw=20,qn=21,th=22,Dr=23,zn=25,Xw=1;var br=7,Nc=8,Mc=9,Tt=10,of=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(of||{});function _r(t){return Array.isArray(t)&&typeof t[Xw]=="object"}function yn(t){return Array.isArray(t)&&t[Xw]===!0}function Zw(t){return(t.flags&4)!==0}function Xc(t){return t.componentOffset>-1}function af(t){return(t.flags&1)===1}function Gn(t){return!!t.template}function gA(t){return(t[K]&512)!==0}var _h=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function e_(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Zc(){return t_}function t_(t){return t.type.prototype.ngOnChanges&&(t.setInput=yA),mA}Zc.ngInherit=!0;function mA(){let t=r_(this),e=t?.current;if(e){let n=t.previous;if(n===Si)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yA(t,e,n,r,i){let s=this.declaredInputs[r],o=r_(t)||vA(t,{previous:Si,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new _h(l&&l.currentValue,n,u===Si),e_(t,e,i,n)}var n_="__ngSimpleChanges__";function r_(t){return t[n_]||null}function vA(t,e){return t[n_]=e}var JI=null;var Bt=function(t,e,n){JI?.(t,e,n)},IA="svg",wA="math",_A=!1;function EA(){return _A}function zt(t){for(;Array.isArray(t);)t=t[mn];return t}function i_(t,e){return zt(e[t])}function bt(t,e){return zt(e[t.index])}function s_(t,e){return t.data[e]}function Qn(t,e){let n=e[t];return _r(n)?n:n[mn]}function cf(t){return(t[K]&128)===128}function TA(t){return yn(t[Qe])}function xc(t,e){return e==null?null:t[e]}function o_(t){t[Ei]=0}function DA(t){t[K]&1024||(t[K]|=1024,cf(t)&&so(t))}function bA(t,e){for(;t>0;)e=e[Oi],t--;return e}function uf(t){return!!(t[K]&9216||t[Dr]?.dirty)}function Eh(t){t[Ot].changeDetectionScheduler?.notify(1),uf(t)?so(t):t[K]&64&&(EA()?(t[K]|=1024,so(t)):t[Ot].changeDetectionScheduler?.notify())}function so(t){t[Ot].changeDetectionScheduler?.notify();let e=oo(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!cf(e)));)e=oo(e)}function a_(t,e){if((t[K]&256)===256)throw new z(911,!1);t[qn]===null&&(t[qn]=[]),t[qn].push(e)}function CA(t,e){if(t[qn]===null)return;let n=t[qn].indexOf(e);n!==-1&&t[qn].splice(n,1)}function oo(t){let e=t[Qe];return yn(e)?e[Qe]:e}var oe={lFrame:p_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function SA(){return oe.lFrame.elementDepthCount}function AA(){oe.lFrame.elementDepthCount++}function RA(){oe.lFrame.elementDepthCount--}function c_(){return oe.bindingsEnabled}function NA(){return oe.skipHydrationRootTNode!==null}function MA(t){return oe.skipHydrationRootTNode===t}function xA(){oe.skipHydrationRootTNode=null}function Ee(){return oe.lFrame.lView}function pt(){return oe.lFrame.tView}function Mz(t){return oe.lFrame.contextLView=t,t[Pt]}function xz(t){return oe.lFrame.contextLView=null,t}function gt(){let t=u_();for(;t!==null&&t.type===64;)t=t.parent;return t}function u_(){return oe.lFrame.currentTNode}function PA(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function yo(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function l_(){return oe.lFrame.isParent}function OA(){oe.lFrame.isParent=!1}function kA(t){return oe.lFrame.bindingIndex=t}function eu(){return oe.lFrame.bindingIndex++}function FA(t){let e=oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function LA(){return oe.lFrame.inI18n}function VA(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Th(e)}function UA(){return oe.lFrame.currentDirectiveIndex}function Th(t){oe.lFrame.currentDirectiveIndex=t}function jA(t){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function d_(t){oe.lFrame.currentQueryIndex=t}function BA(t){let e=t[ue];return e.type===2?e.declTNode:e.type===1?t[kt]:null}function h_(t,e,n){if(n&ie.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ie.Host);)if(i=BA(s),i===null||(s=s[Oi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=oe.lFrame=f_();return r.currentTNode=e,r.lView=t,!0}function lf(t){let e=f_(),n=t[ue];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function f_(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?p_(t):e}function p_(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function g_(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var m_=g_;function df(){let t=g_();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $A(t){return(oe.lFrame.contextLView=bA(t,oe.lFrame.contextLView))[Pt]}function ki(){return oe.lFrame.selectedIndex}function Cr(t){oe.lFrame.selectedIndex=t}function hf(){let t=oe.lFrame;return s_(t.tView,t.selectedIndex)}function qA(){return oe.lFrame.currentNamespace}var y_=!0;function ff(){return y_}function pf(t){y_=t}function HA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=t_(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function gf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function _c(t,e,n){v_(t,e,3,n)}function Ec(t,e,n,r){(t[K]&3)===n&&v_(t,e,n,r)}function nh(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function v_(t,e,n,r){let i=r!==void 0?t[Ei]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ei]+=65536),(a<s||s==-1)&&(zA(t,n,e,u),t[Ei]=(t[Ei]&4294901760)+u+2),u++}function XI(t,e){Bt(4,t,e);let n=fe(null);try{e.call(t)}finally{fe(n),Bt(5,t,e)}}function zA(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[K]>>14<t[Ei]>>16&&(t[K]&3)===e&&(t[K]+=16384,XI(a,s)):XI(a,s)}var bi=-1,Sr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function GA(t){return t instanceof Sr}function WA(t){return(t.flags&8)!==0}function KA(t){return(t.flags&16)!==0}function I_(t){return t!==bi}function Pc(t){return t&32767}function QA(t){return t>>16}function Oc(t,e){let n=QA(t),r=e;for(;n>0;)r=r[Oi],n--;return r}var Dh=!0;function ZI(t){let e=Dh;return Dh=t,e}var YA=256,w_=YA-1,__=5,JA=0,$t={};function XA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Zs)&&(r=n[Zs]),r==null&&(r=n[Zs]=JA++);let i=r&w_,s=1<<i;e.data[t+(i>>__)]|=s}function kc(t,e){let n=E_(t,e);if(n!==-1)return n;let r=e[ue];r.firstCreatePass&&(t.injectorIndex=e.length,rh(r.data,t),rh(e,null),rh(r.blueprint,null));let i=mf(t,e),s=t.injectorIndex;if(I_(i)){let o=Pc(i),a=Oc(i,e),u=a[ue].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function rh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function E_(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function mf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=S_(i),r===null)return bi;if(n++,i=i[Oi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return bi}function bh(t,e,n){XA(t,e,n)}function T_(t,e,n){if(n&ie.Optional||t!==void 0)return t;ef(e,"NodeInjector")}function D_(t,e,n,r){if(n&ie.Optional&&r===void 0&&(r=null),!(n&(ie.Self|ie.Host))){let i=t[Ni],s=_t(void 0);try{return i?i.get(e,r,n&ie.Optional):xw(e,r,n&ie.Optional)}finally{_t(s)}}return T_(r,e,n)}function b_(t,e,n,r=ie.Default,i){if(t!==null){if(e[K]&2048&&!(r&ie.Self)){let o=rR(t,e,n,r,$t);if(o!==$t)return o}let s=C_(t,e,n,r,$t);if(s!==$t)return s}return D_(e,n,r,i)}function C_(t,e,n,r,i){let s=tR(n);if(typeof s=="function"){if(!h_(e,t,r))return r&ie.Host?T_(i,n,r):D_(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ie.Optional))ef(n);else return o}finally{m_()}}else if(typeof s=="number"){let o=null,a=E_(t,e),u=bi,l=r&ie.Host?e[Ht][kt]:null;for((a===-1||r&ie.SkipSelf)&&(u=a===-1?mf(t,e):e[a+8],u===bi||!tw(r,!1)?a=-1:(o=e[ue],a=Pc(u),e=Oc(u,e)));a!==-1;){let h=e[ue];if(ew(s,a,h.data)){let p=ZA(a,e,n,o,r,l);if(p!==$t)return p}u=e[a+8],u!==bi&&tw(r,e[ue].data[a+8]===l)&&ew(s,a,e)?(o=h,a=Pc(u),e=Oc(u,e)):a=-1}}return i}function ZA(t,e,n,r,i,s){let o=e[ue],a=o.data[t+8],u=r==null?Xc(a)&&Dh:r!=o&&(a.type&3)!==0,l=i&ie.Host&&s===a,h=eR(a,o,n,u,l);return h!==null?xi(e,o,h,a):$t}function eR(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let _=p;_<m;_++){let A=o[_];if(_<u&&n===A||_>=u&&A.type===n)return _}if(i){let _=o[u];if(_&&Gn(_)&&_.type===n)return u}return null}function xi(t,e,n,r){let i=t[n],s=e.data;if(GA(i)){let o=i;o.resolving&&SS(CS(s[n]));let a=ZI(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?_t(o.injectImpl):null,h=h_(t,r,ie.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&HA(n,s[n],e)}finally{l!==null&&_t(l),ZI(a),o.resolving=!1,m_()}}return i}function tR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Zs)?t[Zs]:void 0;return typeof e=="number"?e>=0?e&w_:nR:e}function ew(t,e,n){let r=1<<t;return!!(n[e+(t>>__)]&r)}function tw(t,e){return!(t&ie.Self)&&!(t&ie.Host&&e)}var Er=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return b_(this._tNode,this._lView,e,Kc(r),n)}};function nR(){return new Er(gt(),Ee())}function yf(t){return ho(()=>{let e=t.prototype.constructor,n=e[bc]||Ch(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[bc]||Ch(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ch(t){return Cw(t)?()=>{let e=Ch(tt(t));return e&&e()}:Ci(t)}function rR(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[K]&2048&&!(o[K]&512);){let a=C_(s,o,n,r|ie.Self,$t);if(a!==$t)return a;let u=s.parent;if(!u){let l=o[Jw];if(l){let h=l.get(n,$t,r);if(h!==$t)return h}u=S_(o),o=o[Oi]}s=u}return i}function S_(t){let e=t[ue],n=e.type;return n===2?e.declTNode:n===1?t[kt]:null}function nw(t,e=null,n=null,r){let i=A_(t,e,n,r);return i.resolveInjectorInitializers(),i}function A_(t,e=null,n=null,r,i=new Set){let s=[n||Et,nA(t)];return r=r||(typeof t=="object"?void 0:nt(t)),new no(s,e||sf(),r||null,i)}var Ft=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return nw({name:""},i,r,"");{let s=r.name??"";return nw({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=eo,e.NULL=new Ac,e.\u0275prov=U({token:e,providedIn:"any",factory:()=>q(Fw)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var iR="ngOriginalError";function ih(t){return t[iR]}var fn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ih(e);for(;n&&ih(n);)n=ih(n);return n||null}},R_=new G("",{providedIn:"root",factory:()=>k(fn).handleError.bind(void 0)}),N_=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Sh=class extends N_{constructor(e){super(),this._lView=e}onDestroy(e){return a_(this._lView,e),()=>CA(this._lView,e)}};function sR(){return new Sh(Ee())}function oR(){return tu(gt(),Ee())}function tu(t,e){return new nu(bt(t,e))}var nu=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=oR;let t=e;return t})();var Ah=class extends et{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,fA()&&(this.destroyRef=k(N_,{optional:!0})??void 0)}emit(e){let n=fe(null);try{super.next(e)}finally{fe(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=sh(s),i&&(i=sh(i)),o&&(o=sh(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(a),a}};function sh(t){return e=>{setTimeout(t,void 0,e)}}var Mt=Ah;function M_(t){return(t.flags&128)===128}var x_=new Map,aR=0;function cR(){return aR++}function uR(t){x_.set(t[Jc],t)}function lR(t){x_.delete(t[Jc])}var rw="__ngContext__";function Ar(t,e){_r(e)?(t[rw]=e[Jc],uR(e)):t[rw]=e}function P_(t){return k_(t[io])}function O_(t){return k_(t[xt])}function k_(t){for(;t!==null&&!yn(t);)t=t[xt];return t}var Rh;function F_(t){Rh=t}function dR(){if(Rh!==void 0)return Rh;if(typeof document<"u")return document;throw new z(210,!1)}var vf=new G("",{providedIn:"root",factory:()=>hR}),hR="ng",If=new G(""),Gt=new G("",{providedIn:"platform",factory:()=>"unknown"});var wf=new G("",{providedIn:"root",factory:()=>dR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var fR="h",pR="b";var gR=()=>null;function _f(t,e,n=!1){return gR(t,e,n)}var L_=!1,mR=new G("",{providedIn:"root",factory:()=>L_});var Fc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tw})`}};function ru(t){return t instanceof Fc?t.changingThisBreaksApplicationSecurity:t}function V_(t,e){let n=yR(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Tw})`)}return n===e}function yR(t){return t instanceof Fc&&t.getTypeName()||null}var vR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function U_(t){return t=String(t),t.match(vR)?t:"unsafe:"+t}var Ef=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ef||{});function Pz(t){let e=IR();return e?e.sanitize(Ef.URL,t)||"":V_(t,"URL")?ru(t):U_(Wc(t))}function IR(){let t=Ee();return t&&t[Ot].sanitizer}function j_(t){return t instanceof Function?t():t}var pn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(pn||{}),wR;function Tf(t,e){return wR(t,e)}function Ti(t,e,n,r,i){if(r!=null){let s,o=!1;yn(r)?s=r:_r(r)&&(o=!0,r=r[mn]);let a=zt(r);t===0&&n!==null?i==null?z_(e,n,a):Lc(e,n,a,i||null,!0):t===1&&n!==null?Lc(e,n,a,i||null,!0):t===2?LR(e,a,o):t===3&&e.destroyNode(a),s!=null&&UR(e,t,s,n,i)}}function _R(t,e){return t.createText(e)}function ER(t,e,n){t.setValue(e,n)}function B_(t,e,n){return t.createElement(e,n)}function TR(t,e){$_(t,e),e[mn]=null,e[kt]=null}function DR(t,e,n,r,i,s){r[mn]=i,r[kt]=e,iu(t,r,n,1,i,s)}function $_(t,e){e[Ot].changeDetectionScheduler?.notify(1),iu(t,e,e[Fe],2,null,null)}function bR(t){let e=t[io];if(!e)return oh(t[ue],t);for(;e;){let n=null;if(_r(e))n=e[io];else{let r=e[Tt];r&&(n=r)}if(!n){for(;e&&!e[xt]&&e!==t;)_r(e)&&oh(e[ue],e),e=e[Qe];e===null&&(e=t),_r(e)&&oh(e[ue],e),n=e&&e[xt]}e=n}}function CR(t,e,n,r){let i=Tt+r,s=n.length;r>0&&(n[i-1][xt]=e),r<s-Tt?(e[xt]=n[i],kw(n,Tt+r,e)):(n.push(e),e[xt]=null),e[Qe]=n;let o=e[Yc];o!==null&&n!==o&&SR(o,e);let a=e[Mi];a!==null&&a.insertView(t),Eh(e),e[K]|=128}function SR(t,e){let n=t[Mc],i=e[Qe][Qe][Ht];e[Ht]!==i&&(t[K]|=of.HasTransplantedViews),n===null?t[Mc]=[e]:n.push(e)}function q_(t,e){let n=t[Mc],r=n.indexOf(e);n.splice(r,1)}function Nh(t,e){if(t.length<=Tt)return;let n=Tt+e,r=t[n];if(r){let i=r[Yc];i!==null&&i!==t&&q_(i,r),e>0&&(t[n-1][xt]=r[xt]);let s=Sc(t,Tt+e);TR(r[ue],r);let o=s[Mi];o!==null&&o.detachView(s[ue]),r[Qe]=null,r[xt]=null,r[K]&=-129}return r}function H_(t,e){if(!(e[K]&256)){let n=e[Fe];n.destroyNode&&iu(t,e,n,3,null,null),bR(e)}}function oh(t,e){if(e[K]&256)return;let n=fe(null);try{e[K]&=-129,e[K]|=256,e[Dr]&&VI(e[Dr]),RR(t,e),AR(t,e),e[ue].type===1&&e[Fe].destroy();let r=e[Yc];if(r!==null&&yn(e[Qe])){r!==e[Qe]&&q_(r,e);let i=e[Mi];i!==null&&i.detachView(t)}lR(e)}finally{fe(n)}}function AR(t,e){let n=t.cleanup,r=e[ro];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ro]=null);let i=e[qn];if(i!==null){e[qn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function RR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Sr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Bt(4,a,u);try{u.call(a)}finally{Bt(5,a,u)}}else{Bt(4,i,s);try{s.call(i)}finally{Bt(5,i,s)}}}}}function NR(t,e,n){return MR(t,e.parent,n)}function MR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[mn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===qt.None||s===qt.Emulated)return null}return bt(r,n)}}function Lc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function z_(t,e,n){t.appendChild(e,n)}function iw(t,e,n,r,i){r!==null?Lc(t,e,n,r,i):z_(t,e,n)}function xR(t,e,n,r){t.removeChild(e,n,r)}function Df(t,e){return t.parentNode(e)}function PR(t,e){return t.nextSibling(e)}function OR(t,e,n){return FR(t,e,n)}function kR(t,e,n){return t.type&40?bt(t,n):null}var FR=kR,sw;function bf(t,e,n,r){let i=NR(t,r,e),s=e[Fe],o=r.parent||e[kt],a=OR(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)iw(s,i,n[u],a,!1);else iw(s,i,n,a,!1);sw!==void 0&&sw(s,r,e,n,i)}function Tc(t,e){if(e!==null){let n=e.type;if(n&3)return bt(e,t);if(n&4)return Mh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Tc(t,r);{let i=t[e.index];return yn(i)?Mh(-1,i):zt(i)}}else{if(n&32)return Tf(e,t)()||zt(t[e.index]);{let r=G_(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oo(t[Ht]);return Tc(i,r)}else return Tc(t,e.next)}}}return null}function G_(t,e){if(e!==null){let r=t[Ht][kt],i=e.projection;return r.projection[i]}return null}function Mh(t,e){let n=Tt+t+1;if(n<e.length){let r=e[n],i=r[ue].firstChild;if(i!==null)return Tc(r,i)}return e[br]}function LR(t,e,n){let r=Df(t,e);r&&xR(t,r,e,n)}function Cf(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Ar(zt(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Cf(t,e,n.child,r,i,s,!1),Ti(e,t,i,a,s);else if(u&32){let l=Tf(n,r),h;for(;h=l();)Ti(e,t,i,h,s);Ti(e,t,i,a,s)}else u&16?VR(t,e,r,n,i,s):Ti(e,t,i,a,s);n=o?n.projectionNext:n.next}}function iu(t,e,n,r,i,s){Cf(n,r,t.firstChild,e,i,s,!1)}function VR(t,e,n,r,i,s){let o=n[Ht],u=o[kt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Ti(e,t,i,h,s)}else{let l=u,h=o[Qe];M_(r)&&(l.flags|=128),Cf(t,e,l,h,i,s,!0)}}function UR(t,e,n,r,i){let s=n[br],o=zt(n);s!==o&&Ti(e,t,r,s,i);for(let a=Tt;a<n.length;a++){let u=n[a];iu(u[ue],u,t,e,r,s)}}function jR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:pn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=pn.Important),t.setStyle(n,r,i,s))}}function BR(t,e,n){t.setAttribute(e,"style",n)}function W_(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function K_(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&yh(t,e,r),i!==null&&W_(t,e,i),s!==null&&BR(t,e,s)}var Fi={};function Oz(t=1){Q_(pt(),Ee(),ki()+t,!1)}function Q_(t,e,n,r){if(!r)if((e[K]&3)===3){let s=t.preOrderCheckHooks;s!==null&&_c(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ec(e,s,0,n)}Cr(n)}function Wt(t,e=ie.Default){let n=Ee();if(n===null)return q(t,e);let r=gt();return b_(r,n,tt(t),e)}function Y_(t,e,n,r,i,s){let o=fe(null);try{let a=null;i&Hn.SignalBased&&(a=e[r][Qd]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Hn.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):e_(e,a,r,s)}finally{fe(o)}}function $R(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Cr(~i);else{let s=i,o=n[++r],a=n[++r];VA(o,s);let u=e[s];a(2,u)}}}finally{Cr(-1)}}function su(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[mn]=i,p[K]=r|4|128|8|64,(l!==null||t&&t[K]&2048)&&(p[K]|=2048),o_(p),p[Qe]=p[Oi]=t,p[Pt]=n,p[Ot]=o||t&&t[Ot],p[Fe]=a||t&&t[Fe],p[Ni]=u||t&&t[Ni]||null,p[kt]=s,p[Jc]=cR(),p[Rc]=h,p[Jw]=l,p[Ht]=e.type==2?t[Ht]:p,p}function ou(t,e,n,r,i){let s=t.data[e];if(s===null)s=qR(t,e,n,r,i),LA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=PA();s.injectorIndex=o===null?-1:o.injectorIndex}return yo(s,!0),s}function qR(t,e,n,r,i){let s=u_(),o=l_(),a=o?s:s&&s.parent,u=t.data[e]=KR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function J_(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function X_(t,e,n,r,i){let s=ki(),o=r&2;try{Cr(-1),o&&e.length>zn&&Q_(t,e,zn,!1),Bt(o?2:0,i),n(r,i)}finally{Cr(s),Bt(o?3:1,i)}}function Z_(t,e,n){if(Zw(e)){let r=fe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{fe(r)}}}function eE(t,e,n){c_()&&(eN(t,e,n,bt(n,e)),(n.flags&64)===64&&oE(t,e,n))}function tE(t,e,n=bt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function nE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Sf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Sf(t,e,n,r,i,s,o,a,u,l,h){let p=zn+r,m=p+i,_=HR(p,m),A=typeof l=="function"?l():l;return _[ue]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function HR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Fi);return n}function zR(t,e,n,r){let s=r.get(mR,L_)||n===qt.ShadowDom,o=t.selectRootElement(e,s);return GR(o),o}function GR(t){WR(t)}var WR=()=>null;function KR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return NA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ow(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Hn.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?aw(r,n,l,a,u):aw(r,n,l,a)}return r}function aw(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function QR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,_=m?m.inputs:null,A=m?m.outputs:null;u=ow(0,p.inputs,h,u,_),l=ow(1,p.outputs,h,l,A);let N=u!==null&&o!==null&&!nf(e)?dN(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function YR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function rE(t,e,n,r,i,s,o,a){let u=bt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Af(t,n,h,r,i),Xc(e)&&JR(n,e.index)):e.type&3?(r=YR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function JR(t,e){let n=Qn(e,t);n[K]&16||(n[K]|=64)}function iE(t,e,n,r){if(c_()){let i=r===null?null:{"":-1},s=nN(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&sE(t,e,n,o,i,a),i&&rN(n,r,i)}n.mergedAttrs=to(n.mergedAttrs,n.attrs)}function sE(t,e,n,r,i,s){for(let l=0;l<r.length;l++)bh(kc(n,e),t,r[l].type);sN(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=J_(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=to(n.mergedAttrs,h.hostAttrs),oN(t,n,e,u,h),iN(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}QR(t,n,s)}function XR(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;ZR(o)!=a&&o.push(a),o.push(n,r,s)}}function ZR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function eN(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Xc(n)&&aN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||kc(n,e),Ar(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=xi(e,t,a,n);if(Ar(l,e),o!==null&&lN(e,a-i,l,u,n,o),Gn(u)){let h=Qn(n.index,e);h[Pt]=xi(e,t,a,n)}}}function oE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=UA();try{Cr(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Th(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&tN(u,l)}}finally{Cr(-1),Th(o)}}function tN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function nN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(WS(e,o.selectors,!1))if(r||(r=[]),Gn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;xh(t,e,u)}else r.unshift(o),xh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function xh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function rN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new z(-301,!1);r.push(e[i],s)}}}function iN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gn(e)&&(n[""]=t)}}function sN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function oN(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ci(i.type,!0)),o=new Sr(s,Gn(i),Wt);t.blueprint[r]=o,n[r]=o,XR(t,e,r,J_(t,n,i.hostVars,Fi),i)}function aN(t,e,n){let r=bt(e,t),i=nE(n),s=t[Ot].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=au(t,su(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function cN(t,e,n,r,i,s){let o=bt(t,e);uN(e[Fe],o,s,t.value,n,r,i)}function uN(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Wc(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function lN(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Y_(r,n,u,l,h,p)}}function dN(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function aE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cE(t,e){let n=t.contentQueries;if(n!==null){let r=fe(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];d_(s),a.contentQueries(2,e[o],o)}}}finally{fe(r)}}}function au(t,e){return t[io]?t[YI][xt]=e:t[io]=e,t[YI]=e,e}function Ph(t,e,n){d_(0);let r=fe(null);try{e(t,n)}finally{fe(r)}}function hN(t){return t[ro]||(t[ro]=[])}function fN(t){return t.cleanup||(t.cleanup=[])}function uE(t,e){let n=t[Ni],r=n?n.get(fn,null):null;r&&r.handleError(e)}function Af(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];Y_(h,l,r,a,u,i)}}function pN(t,e,n){let r=i_(e,t);ER(t[Fe],r,n)}function gN(t,e){let n=Qn(e,t),r=n[ue];mN(r,n);let i=n[mn];i!==null&&n[Rc]===null&&(n[Rc]=_f(i,n[Ni])),Rf(r,n,n[Pt])}function mN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Rf(t,e,n){lf(e);try{let r=t.viewQuery;r!==null&&Ph(1,r,n);let i=t.template;i!==null&&X_(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Mi]?.finishViewCreation(t),t.staticContentQueries&&cE(t,e),t.staticViewQueries&&Ph(2,t.viewQuery,n);let s=t.components;s!==null&&yN(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[K]&=-5,df()}}function yN(t,e){for(let n=0;n<e.length;n++)gN(t,e[n])}function vN(t,e,n,r){let i=fe(null);try{let s=e.tView,a=t[K]&4096?4096:16,u=su(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Yc]=l;let h=t[Mi];return h!==null&&(u[Mi]=h.createEmbeddedView(s)),Rf(s,u,n),u}finally{fe(i)}}function cw(t,e){return!e||e.firstChild===null||M_(t)}function IN(t,e,n,r=!0){let i=e[ue];if(CR(i,e,t,n),r){let o=Mh(n,t),a=e[Fe],u=Df(a,t[br]);u!==null&&DR(i,t[kt],a,e,u,o)}let s=e[Rc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Vc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(zt(s)),yn(s)&&wN(s,r);let o=n.type;if(o&8)Vc(t,e,n.child,r);else if(o&32){let a=Tf(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=G_(e,n);if(Array.isArray(a))r.push(...a);else{let u=oo(e[Ht]);Vc(u[ue],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function wN(t,e){for(let n=Tt;n<t.length;n++){let r=t[n],i=r[ue].firstChild;i!==null&&Vc(r[ue],r,i,e)}t[br]!==t[mn]&&e.push(t[br])}var lE=[];function _N(t){return t[Dr]??EN(t)}function EN(t){let e=lE.pop()??Object.create(DN);return e.lView=t,e}function TN(t){t.lView[Dr]!==t&&(t.lView=null,lE.push(t))}var DN=be(L({},kI),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{so(t.lView)},consumerOnSignalRead(){this.lView[Dr]=this}}),dE=100;function hE(t,e=!0,n=0){let r=t[Ot],i=r.rendererFactory,s=!1;s||i.begin?.();try{bN(t,n)}catch(o){throw e&&uE(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function bN(t,e){Oh(t,e);let n=0;for(;uf(t);){if(n===dE)throw new z(103,!1);n++,Oh(t,1)}}function CN(t,e,n,r){let i=e[K];if((i&256)===256)return;let s=!1;!s&&e[Ot].inlineEffectRunner?.flush(),lf(e);let o=null,a=null;!s&&SN(t)&&(a=_N(e),o=FI(a));try{o_(e),kA(t.bindingStartIndex),n!==null&&X_(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&_c(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Ec(e,p,0,null),nh(e,0)}if(AN(e),fE(e,0),t.contentQueries!==null&&cE(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&_c(e,p)}else{let p=t.contentHooks;p!==null&&Ec(e,p,1),nh(e,1)}$R(t,e);let l=t.components;l!==null&&gE(e,l,0);let h=t.viewQuery;if(h!==null&&Ph(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&_c(e,p)}else{let p=t.viewHooks;p!==null&&Ec(e,p,2),nh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[th]){for(let p of e[th])p();e[th]=null}s||(e[K]&=-73)}catch(u){throw so(e),u}finally{a!==null&&(LI(a,o),TN(a)),df()}}function SN(t){return t.type!==2}function fE(t,e){for(let n=P_(t);n!==null;n=O_(n))for(let r=Tt;r<n.length;r++){let i=n[r];pE(i,e)}}function AN(t){for(let e=P_(t);e!==null;e=O_(e)){if(!(e[K]&of.HasTransplantedViews))continue;let n=e[Mc];for(let r=0;r<n.length;r++){let i=n[r],s=i[Qe];DA(i)}}}function RN(t,e,n){let r=Qn(e,t);pE(r,n)}function pE(t,e){cf(t)&&Oh(t,e)}function Oh(t,e){let r=t[ue],i=t[K],s=t[Dr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Yd(s)),s&&(s.dirty=!1),t[K]&=-9217,o)CN(r,t,r.template,t[Pt]);else if(i&8192){fE(t,1);let a=r.components;a!==null&&gE(t,a,1)}}function gE(t,e,n){for(let r=0;r<e.length;r++)RN(t,e[r],n)}function Nf(t){for(t[Ot].changeDetectionScheduler?.notify();t;){t[K]|=64;let e=oo(t);if(gA(t)&&!e)return t;t=e}return null}var Rr=class{get rootNodes(){let e=this._lView,n=e[ue];return Vc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pt]}set context(e){this._lView[Pt]=e}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qe];if(yn(e)){let n=e[Nc],r=n?n.indexOf(this):-1;r>-1&&(Nh(e,r),Sc(n,r))}this._attachedToViewContainer=!1}H_(this._lView[ue],this._lView)}onDestroy(e){a_(this._lView,e)}markForCheck(){Nf(this._cdRefInjectingView||this._lView)}detach(){this._lView[K]&=-129}reattach(){Eh(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,hE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,$_(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,!1);this._appRef=e,Eh(this._lView)}},cu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xN;let t=e;return t})(),NN=cu,MN=class extends NN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Rr(i)}};function xN(){return PN(gt(),Ee())}function PN(t,e){return t.type&4?new MN(e,t,tu(t,e)):null}var Fz=new RegExp(`^(\\d+)*(${pR}|${fR})*(.*)`);var ON=()=>null;function uw(t,e){return ON(t,e)}var kh=class{},Fh=class{},Uc=class{};function kN(t){let e=Error(`No component factory found for ${nt(t)}.`);return e[FN]=t,e}var FN="ngComponent";var Lh=class{resolveComponentFactory(e){throw kN(e)}},uu=(()=>{let e=class e{};e.NULL=new Lh;let t=e;return t})(),ao=class{},Mf=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>LN();let t=e;return t})();function LN(){let t=Ee(),e=gt(),n=Qn(e.index,t);return(_r(n)?n:t)[Fe]}var VN=(()=>{let e=class e{};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ah={};var lw=new Set;function xf(t){lw.has(t)||(lw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function dw(...t){}function UN(){let t=typeof Xs.requestAnimationFrame=="function",e=Xs[t?"requestAnimationFrame":"setTimeout"],n=Xs[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var me=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mt(!1),this.onMicrotaskEmpty=new Mt(!1),this.onStable=new Mt(!1),this.onError=new Mt(!1),typeof Zone>"u")throw new z(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=UN().nativeRequestAnimationFrame,$N(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,jN,dw,dw);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},jN={};function Pf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BN(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Xs,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Vh(t),t.isCheckStableRunning=!0,Pf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Vh(t))}function $N(t){let e=()=>{BN(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(qN(a))return n.invokeTask(i,s,o,a);try{return hw(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),fw(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return hw(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),fw(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Vh(t),Pf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Vh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function hw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fw(t){t._nesting--,Pf(t)}function qN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var mE=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Uh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=jI(i,a);else if(s==2){let u=a,l=e[++o];r=jI(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var jc=class extends uu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Tr(e);return new co(n,this.ngModule)}};function pw(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function HN(t){let e=t.toLowerCase();return e==="svg"?IA:e==="math"?wA:null}var jh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Kc(r);let i=this.injector.get(e,ah,r);return i!==ah||n===ah?i:this.parentInjector.get(e,n,r)}},co=class extends Uc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=pw(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return pw(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=JS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=fe(null);try{i=i||this.ngModule;let o=i instanceof at?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new jh(e,o):e,u=a.get(ao,null);if(u===null)throw new z(407,!1);let l=a.get(VN,null),h=a.get(mE,null),p=a.get(kh,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},_=u.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",N=r?zR(_,r,this.componentDef.encapsulation,a):B_(_,A,HN(A)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let x=null;N!==null&&(x=_f(N,a,!0));let j=Sf(0,null,null,1,0,null,null,null,null,null,null),B=su(null,j,null,R,null,null,m,_,a,null,x);lf(B);let $,Ie;try{let J=this.componentDef,T,y=null;J.findHostDirectiveDefs?(T=[],y=new Map,J.findHostDirectiveDefs(J,T,y),T.push(J)):T=[J];let v=zN(B,N),E=GN(v,N,J,T,B,m,_);Ie=s_(j,zn),N&&QN(_,J,N,r),n!==void 0&&YN(Ie,this.ngContentSelectors,n),$=KN(E,J,T,y,B,[JN]),Rf(j,B,null)}finally{df()}return new Bh(this.componentType,$,tu(Ie,B),B,Ie)}finally{fe(s)}}},Bh=class extends Fh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Rr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Af(s[ue],s,i,e,n),this.previousInputValues.set(e,n);let o=Qn(this._tNode.index,s);Nf(o)}}get injector(){return new Er(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zN(t,e){let n=t[ue],r=zn;return t[r]=e,ou(n,r,2,"#host",null)}function GN(t,e,n,r,i,s,o){let a=i[ue];WN(r,t,e,o);let u=null;e!==null&&(u=_f(e,i[Ni]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=su(i,nE(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&xh(a,t,r.length-1),au(i,p),i[t.index]=p}function WN(t,e,n,r){for(let i of t)e.mergedAttrs=to(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Uh(e,e.mergedAttrs,!0),n!==null&&K_(r,n,e))}function KN(t,e,n,r,i,s){let o=gt(),a=i[ue],u=bt(o,i);sE(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=xi(i,a,p,o);Ar(m,i)}oE(a,i,o),u&&Ar(u,i);let l=xi(i,a,o.directiveStart+o.componentOffset,o);if(t[Pt]=i[Pt]=l,s!==null)for(let h of s)h(l,e);return Z_(a,o,i),l}function QN(t,e,n,r){if(r)yh(t,n,["ng-version","17.3.11"]);else{let{attrs:i,classes:s}=XS(e.selectors[0]);i&&yh(t,n,i),s&&s.length>0&&W_(t,n,s.join(" "))}}function YN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function JN(){let t=gt();gf(Ee()[ue],t)}var Li=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XN;let t=e;return t})();function XN(){let t=gt();return eM(t,Ee())}var ZN=Li,yE=class extends ZN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return tu(this._hostTNode,this._hostLView)}get injector(){return new Er(this._hostTNode,this._hostLView)}get parentInjector(){let e=mf(this._hostTNode,this._hostLView);if(I_(e)){let n=Oc(e,this._hostLView),r=Pc(e),i=n[ue].data[r+8];return new Er(i,n)}else return new Er(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gw(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Tt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=uw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,cw(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!pA(e),a;if(o)a=n;else{let A=n||{};a=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef}let u=o?e:new co(Tr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(at,null);N&&(s=N)}let h=Tr(u.componentType??{}),p=uw(this._lContainer,h?.id??null),m=p?.firstChild??null,_=u.create(l,i,m,s);return this.insertImpl(_.hostView,a,cw(this._hostTNode,p)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(TA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Qe],l=new yE(u,u[kt],u[Qe]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return IN(o,i,s,r),e.attachToViewContainerRef(),kw(ch(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gw(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Nh(this._lContainer,n);r&&(Sc(ch(this._lContainer),n),H_(r[ue],r))}detach(e){let n=this._adjustIndex(e,-1),r=Nh(this._lContainer,n);return r&&Sc(ch(this._lContainer),n)!=null?new Rr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gw(t){return t[Nc]}function ch(t){return t[Nc]||(t[Nc]=[])}function eM(t,e){let n,r=e[t.index];return yn(r)?n=r:(n=aE(r,e,null,t),e[t.index]=n,au(e,n)),nM(n,e,t,r),new yE(n,t,e)}function tM(t,e){let n=t[Fe],r=n.createComment(""),i=bt(e,t),s=Df(n,i);return Lc(n,s,r,PR(n,i),!1),r}var nM=sM,rM=()=>!1;function iM(t,e,n){return rM(t,e,n)}function sM(t,e,n,r){if(t[br])return;let i;n.type&8?i=zt(r):i=tM(e,n),t[br]=i}function oM(t){return typeof t=="function"&&t[Qd]!==void 0}function vE(t){return oM(t)&&typeof t.set=="function"}function aM(t){return Object.getPrototypeOf(t.prototype).constructor}function cM(t){let e=aM(t.type),n=!0,r=[t];for(;e;){let i;if(Gn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=vc(t.inputs),o.inputTransforms=vc(t.inputTransforms),o.declaredInputs=vc(t.declaredInputs),o.outputs=vc(t.outputs);let a=i.hostBindings;a&&fM(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&dM(t,u),l&&hM(t,l),uM(t,i),vS(t.outputs,i.outputs),Gn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===cM&&(n=!1)}}e=Object.getPrototypeOf(e)}lM(r)}function uM(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function lM(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=to(i.hostAttrs,n=to(n,i.hostAttrs))}}function vc(t){return t===Si?{}:t===Et?[]:t}function dM(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function hM(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function fM(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Wn=class{},uo=class{};var $h=class extends Wn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jc(this);let i=Hw(e);this._bootstrapComponents=j_(i.bootstrap),this._r3Injector=A_(e,n,[{provide:Wn,useValue:this},{provide:uu,useValue:this.componentFactoryResolver},...r],nt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qh=class extends uo{constructor(e){super(),this.moduleType=e}create(e){return new $h(this.moduleType,e,[])}};var Bc=class extends Wn{constructor(e){super(),this.componentFactoryResolver=new jc(this),this.instance=null;let n=new no([...e.providers,{provide:Wn,useValue:this},{provide:uu,useValue:this.componentFactoryResolver}],e.parent||sf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Of(t,e,n=null){return new Bc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Vi=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Oe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IE(t){return gM(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function pM(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function gM(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function vo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function mM(t){return(t.flags&32)===32}function yM(t,e,n,r,i,s,o,a,u){let l=e.consts,h=ou(e,t,4,o||null,xc(l,a));iE(e,n,h,xc(l,u)),gf(e,h);let p=h.tView=Sf(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function vM(t,e,n,r,i,s,o,a){let u=Ee(),l=pt(),h=t+zn,p=l.firstCreatePass?yM(h,l,u,e,n,r,i,s,o):l.data[h];yo(p,!1);let m=IM(l,u,p,t);ff()&&bf(l,u,m,p),Ar(m,u);let _=aE(m,u,m,p);return u[h]=_,au(u,_),iM(_,p,u),af(p)&&eE(l,u,p),o!=null&&tE(u,p,a),vM}var IM=wM;function wM(t,e,n,r){return pf(!0),e[Fe].createComment("")}function wE(t,e,n,r){let i=Ee(),s=eu();if(vo(i,s,e)){let o=pt(),a=hf();cN(a,i,t,e,n,r)}return wE}function _M(t,e,n,r){return vo(t,eu(),n)?e+Wc(n)+r:Fi}function Ic(t,e){return t<<17|e<<2}function Nr(t){return t>>17&32767}function EM(t){return(t&2)==2}function TM(t,e){return t&131071|e<<17}function Hh(t){return t|2}function Pi(t){return(t&131068)>>2}function uh(t,e){return t&-131069|e<<2}function DM(t){return(t&1)===1}function zh(t){return t|1}function bM(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Nr(o),u=Pi(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||po(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Nr(t[a+1]);t[r+1]=Ic(m,a),m!==0&&(t[m+1]=uh(t[m+1],r)),t[a+1]=TM(t[a+1],r)}else t[r+1]=Ic(a,0),a!==0&&(t[a+1]=uh(t[a+1],r)),a=r;else t[r+1]=Ic(u,0),a===0?a=r:t[u+1]=uh(t[u+1],r),u=r;l&&(t[r+1]=Hh(t[r+1])),mw(t,h,r,!0),mw(t,h,r,!1),CM(e,h,t,r,s),o=Ic(a,u),s?e.classBindings=o:e.styleBindings=o}function CM(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&po(s,e)>=0&&(n[r+1]=zh(n[r+1]))}function mw(t,e,n,r){let i=t[n+1],s=e===null,o=r?Nr(i):Pi(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];SM(u,e)&&(a=!0,t[o+1]=r?zh(l):Hh(l)),o=r?Nr(l):Pi(l)}a&&(t[n+1]=r?Hh(i):zh(i))}function SM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?po(t,e)>=0:!1}function AM(t,e,n){let r=Ee(),i=eu();if(vo(r,i,e)){let s=pt(),o=hf();rE(s,o,r,t,e,r[Fe],n,!1)}return AM}function yw(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Af(t,n,s[o],o,r)}function RM(t,e){return NM(t,e,null,!0),RM}function NM(t,e,n,r){let i=Ee(),s=pt(),o=FA(2);if(s.firstUpdatePass&&xM(s,t,o,r),e!==Fi&&vo(i,o,e)){let a=s.data[ki()];LM(s,a,i,i[Fe],t,i[o+1]=VM(e,n),r,o)}}function MM(t,e){return e>=t.expandoStartIndex}function xM(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ki()],o=MM(t,n);UM(s,r)&&e===null&&!o&&(e=!1),e=PM(i,s,e,r),bM(i,s,e,n,o,r)}}function PM(t,e,n,r){let i=jA(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=lh(null,t,e,n,r),n=lo(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=lh(i,t,e,n,r),s===null){let u=OM(t,e,r);u!==void 0&&Array.isArray(u)&&(u=lh(null,t,e,u[1],r),u=lo(u,e.attrs,r),kM(t,e,r,u))}else s=FM(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function OM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Pi(r)!==0)return t[Nr(r)]}function kM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Nr(i)]=r}function FM(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=lo(r,o,n)}return lo(r,e.attrs,n)}function lh(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=lo(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function lo(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),VS(t,o,n?!0:e[++s]))}return t===void 0?null:t}function LM(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=DM(l)?vw(u,e,n,i,Pi(l),o):void 0;if(!$c(h)){$c(s)||EM(l)&&(s=vw(u,null,n,i,a,o));let p=i_(ki(),n);jR(r,o,p,i,s)}}function vw(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Fi&&(m=p?Et:void 0);let _=p?Zd(m,r):h===r?m:void 0;if(l&&!$c(_)&&(_=Zd(u,r)),$c(_)&&(a=_,o))return a;let A=t[i+1];i=o?Nr(A):Pi(A)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Zd(u,r))}return a}function $c(t){return t!==void 0}function VM(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=nt(ru(t)))),t}function UM(t,e){return(t.flags&(e?8:16))!==0}function jM(t,e,n,r,i,s){let o=e.consts,a=xc(o,i),u=ou(e,t,2,r,a);return iE(e,n,u,xc(o,s)),u.attrs!==null&&Uh(u,u.attrs,!1),u.mergedAttrs!==null&&Uh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function _E(t,e,n,r){let i=Ee(),s=pt(),o=zn+t,a=i[Fe],u=s.firstCreatePass?jM(o,s,i,e,n,r):s.data[o],l=BM(s,i,u,a,e,t);i[o]=l;let h=af(u);return yo(u,!0),K_(a,l,u),!mM(u)&&ff()&&bf(s,i,l,u),SA()===0&&Ar(l,i),AA(),h&&(eE(s,i,u),Z_(s,u,i)),r!==null&&tE(i,u),_E}function EE(){let t=gt();l_()?OA():(t=t.parent,yo(t,!1));let e=t;MA(e)&&xA(),RA();let n=pt();return n.firstCreatePass&&(gf(n,t),Zw(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&WA(e)&&yw(n,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KA(e)&&yw(n,e,Ee(),e.stylesWithoutHost,!1),EE}function kf(t,e,n,r){return _E(t,e,n,r),EE(),kf}var BM=(t,e,n,r,i,s)=>(pf(!0),B_(r,i,qA()));function Vz(){return Ee()}var qc="en-US";var $M=qc;function qM(t){typeof t=="string"&&($M=t.toLowerCase().replace(/_/g,"-"))}function TE(t,e,n,r){let i=Ee(),s=pt(),o=gt();return DE(s,i,i[Fe],o,t,e,r),TE}function HM(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ro],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function DE(t,e,n,r,i,s,o){let a=af(r),l=t.firstCreatePass&&fN(t),h=e[Pt],p=hN(e),m=!0;if(r.type&3||o){let N=bt(r,e),R=o?o(N):N,x=p.length,j=o?$=>o(zt($[r.index])):r.index,B=null;if(!o&&a&&(B=HM(t,e,i,r.index)),B!==null){let $=B.__ngLastListenerFn__||B;$.__ngNextListenerFn__=s,B.__ngLastListenerFn__=s,m=!1}else{s=ww(r,e,h,s,!1);let $=n.listen(R,i,s);p.push(s,$),l&&l.push(i,j,x,x+1)}}else s=ww(r,e,h,s,!1);let _=r.outputs,A;if(m&&_!==null&&(A=_[i])){let N=A.length;if(N)for(let R=0;R<N;R+=2){let x=A[R],j=A[R+1],Ie=e[x][j].subscribe(s),J=p.length;p.push(s,Ie),l&&l.push(i,r.index,J,-(J+1))}}}function Iw(t,e,n,r){let i=fe(null);try{return Bt(6,e,n),n(r)!==!1}catch(s){return uE(t,s),!1}finally{Bt(7,e,n),fe(i)}}function ww(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Qn(t.index,e):e;Nf(a);let u=Iw(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=Iw(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function Uz(t=1){return $A(t)}function jz(t,e=""){let n=Ee(),r=pt(),i=t+zn,s=r.firstCreatePass?ou(r,i,1,e,null):r.data[i],o=zM(r,n,s,e,t);n[i]=o,ff()&&bf(r,n,o,s),yo(s,!1)}var zM=(t,e,n,r,i)=>(pf(!0),_R(e[Fe],r));function GM(t){return bE("",t,""),GM}function bE(t,e,n){let r=Ee(),i=_M(r,t,e,n);return i!==Fi&&pN(r,ki(),i),bE}function WM(t,e,n){vE(e)&&(e=e());let r=Ee(),i=eu();if(vo(r,i,e)){let s=pt(),o=hf();rE(s,o,r,t,e,r[Fe],n,!1)}return WM}function Bz(t,e){let n=vE(t);return n&&t.set(e),n}function KM(t,e){let n=Ee(),r=pt(),i=gt();return DE(r,n,n[Fe],i,t,e),KM}function QM(t,e,n){let r=pt();if(r.firstCreatePass){let i=Gn(t);Gh(n,r.data,r.blueprint,i,!0),Gh(e,r.data,r.blueprint,i,!1)}}function Gh(t,e,n,r,i){if(t=tt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Gh(t[s],e,n,r,i);else{let s=pt(),o=Ee(),a=gt(),u=Ri(t)?t:tt(t.provide),l=Yw(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ri(t)||!t.multi){let _=new Sr(l,i,Wt),A=hh(u,e,i?h:h+m,p);A===-1?(bh(kc(a,o),s,u),dh(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[A]=_,o[A]=_)}else{let _=hh(u,e,h+m,p),A=hh(u,e,h,h+m),N=_>=0&&n[_],R=A>=0&&n[A];if(i&&!R||!i&&!N){bh(kc(a,o),s,u);let x=XM(i?JM:YM,n.length,i,r,l);!i&&R&&(n[A].providerFactory=x),dh(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),o.push(x)}else{let x=CE(n[i?A:_],l,!i&&r);dh(s,t,_>-1?_:A,x)}!i&&r&&R&&n[A].componentProviders++}}}function dh(t,e,n,r){let i=Ri(e),s=oA(e);if(i||s){let u=(s?tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function CE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function hh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function YM(t,e,n,r){return Wh(this.multi,[])}function JM(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=xi(n,n[ue],this.providerFactory.index,r);s=a.slice(0,o),Wh(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Wh(i,s);return s}function Wh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function XM(t,e,n,r,i){let s=new Sr(t,n,Wt);return s.multi=[],s.index=e,s.componentProviders=0,CE(s,i,r&&!n),s}function $z(t,e=[]){return n=>{n.providersResolver=(r,i)=>QM(r,i?i(t):t,e)}}var ZM=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Ww(!1,r.type),s=i.length>0?Of([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=U({token:e,providedIn:"environment",factory:()=>new e(q(at))});let t=e;return t})();function SE(t){xf("NgStandalone"),t.getStandaloneInjector=e=>e.get(ZM).getOrCreateStandaloneInjector(t)}var Kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},AE=new Kn("17.3.11"),lu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var RE=new G("");function Io(t){return!!t&&typeof t.then=="function"}function NE(t){return!!t&&typeof t.subscribe=="function"}var ME=new G(""),xE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=k(ME,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Io(o))r.push(o);else if(NE(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),du=new G("");function ex(){UI(()=>{throw new z(600,!1)})}function tx(t){return t.isBoundToModule}function nx(t,e,n){try{let r=n();return Io(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ui=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(R_),this.afterRenderEffectManager=k(mE),this.externalTestViews=new Set,this.beforeRender=new et,this.afterTick=new et,this.componentTypes=[],this.components=[],this.isStable=k(Vi).hasPendingTasks.pipe(ee(r=>!r)),this._injector=k(at)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Uc;if(!this._injector.get(xE).done){let _=!s&&qw(r),A=!1;throw new z(405,A)}let a;s?a=r:a=this._injector.get(uu).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=tx(a)?void 0:this._injector.get(Wn),l=i||a.selector,h=a.create(Ft.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(RE,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),fh(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new z(101,!1);let i=fe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,fe(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===dE)throw new z(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)rx(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Kh(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Kh(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;fh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(du,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>fh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new z(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rx(t,e,n){!e&&!Kh(t)||ix(t,n,e)}function Kh(t){return uf(t)}function ix(t,e,n){let r;n?(r=0,t[K]|=1024):t[K]&64?r=0:r=1,hE(t,e,r)}var Qh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ff=(()=>{let e=class e{compileModuleSync(r){return new qh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Hw(r),o=j_(s.declarations).reduce((a,u)=>{let l=Tr(u);return l&&a.push(new co(l)),a},[]);return new Qh(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sx=(()=>{let e=class e{constructor(){this.zone=k(me),this.applicationRef=k(Ui)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ox(t){return[{provide:me,useFactory:t},{provide:Ai,multi:!0,useFactory:()=>{let e=k(sx,{optional:!0});return()=>e.initialize()}},{provide:Ai,multi:!0,useFactory:()=>{let e=k(lx);return()=>{e.initialize()}}},{provide:R_,useFactory:ax}]}function ax(){let t=k(me),e=k(fn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function cx(t){let e=ox(()=>new me(ux(t)));return Dt([[],e])}function ux(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var lx=(()=>{let e=class e{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=k(me),this.pendingTasks=k(Vi)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dx(){return typeof $localize<"u"&&$localize.locale||qc}var Lf=new G("",{providedIn:"root",factory:()=>k(Lf,ie.Optional|ie.SkipSelf)||dx()});var PE=new G("");var Dc=null;function hx(t=[],e){return Ft.create({name:e,providers:[{provide:Qc,useValue:"platform"},{provide:PE,useValue:new Set([()=>Dc=null])},...t]})}function fx(t=[]){if(Dc)return Dc;let e=hx(t);return Dc=e,ex(),px(e),e}function px(t){t.get(If,null)?.forEach(n=>n())}var wo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=gx;let t=e;return t})();function gx(t){return mx(gt(),Ee(),(t&16)===16)}function mx(t,e,n){if(Xc(t)&&!n){let r=Qn(t.index,e);return new Rr(r,r)}else if(t.type&47){let r=e[Ht];return new Rr(r,e)}return null}var Yh=class{constructor(){}supports(e){return IE(e)}create(e){return new Jh(e)}},yx=(t,e)=>e,Jh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||yx}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<_w(r,i,s)?n:r,a=_w(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let _=m<s.length?s[m]:s[m]=0,A=_+m;h<=A&&A<l&&(s[m]=_+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!IE(e))throw new z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,pM(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Xh(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Hc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Hc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Xh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Zh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Hc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Zh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _w(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Ew(){return new Vf([new Yh])}var Vf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Ew()),deps:[[e,new Ow,new rt]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new z(901,!1)}};e.\u0275prov=U({token:e,providedIn:"root",factory:Ew});let t=e;return t})();function OE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=fx(r),s=[cx(),...n||[]],a=new Bc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(me);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(fn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:_=>{l.handleError(_)}})});let p=()=>a.destroy(),m=i.get(PE);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),nx(l,u,()=>{let _=a.get(xE);return _.runInitializers(),_.donePromise.then(()=>{let A=a.get(Lf,qc);qM(A||qc);let N=a.get(Ui);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function kE(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var jE=null;function ji(){return jE}function BE(t){jE??=t}var hu=class{};var ct=new G(""),$E=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>k(wx),providedIn:"platform"});let t=e;return t})();var wx=(()=>{let e=class e extends $E{constructor(){super(),this._doc=k(ct),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ji().getBaseHref(this._doc)}onPopState(r){let i=ji().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ji().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function qE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function FE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function xr(t){return t&&t[0]!=="?"?"?"+t:t}var fu=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>k(HE),providedIn:"root"});let t=e;return t})(),_x=new G(""),HE=(()=>{let e=class e extends fu{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return qE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+xr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+xr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+xr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q($E),q(_x,8))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _o=(()=>{let e=class e{constructor(r){this._subject=new Mt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Dx(FE(LE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+xr(i))}normalize(r){return e.stripTrailingSlash(Tx(this._basePath,LE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=xr,e.joinWithSlash=qE,e.stripTrailingSlash=FE,e.\u0275fac=function(i){return new(i||e)(q(fu))},e.\u0275prov=U({token:e,factory:()=>Ex(),providedIn:"root"});let t=e;return t})();function Ex(){return new _o(q(fu))}function Tx(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function LE(t){return t.replace(/\/index.html$/,"")}function Dx(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function pu(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Uf=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},p4=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Uf(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),VE(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);VE(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Wt(Li),Wt(cu),Wt(Vf))},e.\u0275dir=mo({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function VE(t,e){t.context.$implicit=e.item}var g4=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new jf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){UE("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){UE("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Wt(Li),Wt(cu))},e.\u0275dir=mo({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),jf=class{constructor(){this.$implicit=null,this.ngIf=null}};function UE(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${nt(e)}'.`)}var bx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=go({type:e}),e.\u0275inj=fo({});let t=e;return t})(),zE="browser",Cx="server";function gu(t){return t===Cx}var Bi=class{};var To=class{},yu=class{},Pr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var $f=class{encodeKey(e){return GE(e)}encodeValue(e){return GE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Nx(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var Mx=/%(\d[a-f0-9])/gi,xx={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GE(t){return encodeURIComponent(t).replace(Mx,(e,n)=>xx[n]??e)}function mu(t){return`${t}`}var Yn=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $f,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Nx(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(mu):[mu(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(mu(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(mu(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var qf=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Px(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function WE(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function KE(t){return typeof Blob<"u"&&t instanceof Blob}function QE(t){return typeof FormData<"u"&&t instanceof FormData}function Ox(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Eo=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Px(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Pr,this.context??=new qf,!this.params)this.params=new Yn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||WE(this.body)||KE(this.body)||QE(this.body)||Ox(this.body)?this.body:this.body instanceof Yn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||QE(this.body)?null:KE(this.body)?this.body.type||null:WE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Yn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,_)=>m.set(_,e.setHeaders[_]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,_)=>m.set(_,e.setParams[_]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},$i=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}($i||{}),Do=class{constructor(e,n=wu.Ok,r="OK"){this.headers=e.headers||new Pr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Hf=class t extends Do{constructor(e={}){super(e),this.type=$i.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vu=class t extends Do{constructor(e={}){super(e),this.type=$i.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Iu=class extends Do{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},wu=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(wu||{});function Bf(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var kx=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Eo)o=r;else{let l;s.headers instanceof Pr?l=s.headers:l=new Pr(s.headers);let h;s.params&&(s.params instanceof Yn?h=s.params:h=new Yn({fromObject:s.params})),o=new Eo(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Y(o).pipe(jn(l=>this.handler.handle(l)));if(r instanceof Eo||s.observe==="events")return a;let u=a.pipe(ft(l=>l instanceof vu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(ee(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(ee(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Yn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Bf(s,i))}post(r,i,s={}){return this.request("POST",r,Bf(s,i))}put(r,i,s={}){return this.request("PUT",r,Bf(s,i))}};e.\u0275fac=function(i){return new(i||e)(q(To))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function Fx(t,e){return e(t)}function Lx(t,e,n){return(r,i)=>gn(n,()=>e(r,s=>t(s,i)))}var XE=new G(""),Vx=new G(""),Ux=new G("");var YE=(()=>{let e=class e extends To{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=k(Vi);let s=k(Ux,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(XE),...this.injector.get(Vx,[])]));this.chain=s.reduceRight((o,a)=>Lx(o,a,this.injector),Fx)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(wr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(q(yu),q(at))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();var jx=/^\)\]\}',?\n/;function Bx(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var JE=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new z(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Te(i.\u0275loadImpl()):Y(null)).pipe(Ke(()=>new re(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,x)=>a.setRequestHeader(R,x.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let u=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let R=a.statusText||"OK",x=new Pr(a.getAllResponseHeaders()),j=Bx(a)||r.url;return l=new Hf({headers:x,status:a.status,statusText:R,url:j}),l},p=()=>{let{headers:R,status:x,statusText:j,url:B}=h(),$=null;x!==wu.NoContent&&($=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=$?wu.Ok:0);let Ie=x>=200&&x<300;if(r.responseType==="json"&&typeof $=="string"){let J=$;$=$.replace(jx,"");try{$=$!==""?JSON.parse($):null}catch(T){$=J,Ie&&(Ie=!1,$={error:T,text:$})}}Ie?(o.next(new vu({body:$,headers:R,status:x,statusText:j,url:B||void 0})),o.complete()):o.error(new Iu({error:$,headers:R,status:x,statusText:j,url:B||void 0}))},m=R=>{let{url:x}=h(),j=new Iu({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});o.error(j)},_=!1,A=R=>{_||(o.next(h()),_=!0);let x={type:$i.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),r.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),o.next(x)},N=R=>{let x={type:$i.UploadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),o.next(x)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",A),u!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(u),o.next({type:$i.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",A),u!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(q(Bi))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),ZE=new G(""),$x="XSRF-TOKEN",qx=new G("",{providedIn:"root",factory:()=>$x}),Hx="X-XSRF-TOKEN",zx=new G("",{providedIn:"root",factory:()=>Hx}),_u=class{},Gx=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=pu(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(q(ct),q(Gt),q(qx))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function Wx(t,e){let n=t.url.toLowerCase();if(!k(ZE)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=k(_u).getToken(),i=k(zx);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function A4(...t){let e=[kx,JE,YE,{provide:To,useExisting:YE},{provide:yu,useExisting:JE},{provide:XE,useValue:Wx,multi:!0},{provide:ZE,useValue:!0},{provide:_u,useClass:Gx}];for(let n of t)e.push(...n.\u0275providers);return Dt(e)}var Wf=class extends hu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Kf=class t extends Wf{static makeCurrent(){BE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Kx();return n==null?null:Qx(n)}resetBaseElement(){bo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return pu(document.cookie,e)}},bo=null;function Kx(){return bo=bo||document.querySelector("base"),bo?bo.getAttribute("href"):null}function Qx(t){return new URL(t,document.baseURI).pathname}var Yx=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Qf=new G(""),rT=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new z(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(q(Qf),q(me))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Eu=class{constructor(e){this._doc=e}},zf="ng-app-id",iT=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gu(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${zf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(zf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(zf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(q(ct),q(vf),q(wf,8),q(Gt))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Gf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jf=/%COMP%/g,sT="%COMP%",Jx=`_nghost-${sT}`,Xx=`_ngcontent-${sT}`,Zx=!0,eP=new G("",{providedIn:"root",factory:()=>Zx});function tP(t){return Xx.replace(Jf,t)}function nP(t){return Jx.replace(Jf,t)}function oT(t,e){return e.map(n=>n.replace(Jf,t))}var eT=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=gu(u),this.defaultRenderer=new Co(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===qt.ShadowDom&&(i=be(L({},i),{encapsulation:qt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Tu?s.applyToHost(r):s instanceof So&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case qt.Emulated:o=new Tu(l,h,i,this.appId,p,a,u,m);break;case qt.ShadowDom:return new Yf(l,h,r,i,a,u,this.nonce,m);default:o=new So(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(q(rT),q(iT),q(vf),q(eP),q(ct),q(Gt),q(me),q(wf))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Co=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Gf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tT(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tT(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Gf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Gf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(pn.DashCase|pn.Important)?e.style.setProperty(n,r,i&pn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&pn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ji().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function tT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Yf=class extends Co{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=oT(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},So=class extends Co{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?oT(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Tu=class extends So{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=tP(l),this.hostAttr=nP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},rP=(()=>{let e=class e extends Eu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(q(ct))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),nT=["alt","control","meta","shift"],iP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},oP=(()=>{let e=class e extends Eu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ji().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),nT.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=iP[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),nT.forEach(a=>{if(a!==s){let u=sP[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(q(ct))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function X4(t,e){return OE(L({rootComponent:t},aP(e)))}function aP(t){return{appProviders:[...hP,...t?.providers??[]],platformProviders:dP}}function cP(){Kf.makeCurrent()}function uP(){return new fn}function lP(){return F_(document),document}var dP=[{provide:Gt,useValue:zE},{provide:If,useValue:cP,multi:!0},{provide:ct,useFactory:lP,deps:[]}];var hP=[{provide:Qc,useValue:"root"},{provide:fn,useFactory:uP,deps:[]},{provide:Qf,useClass:rP,multi:!0,deps:[ct,me,Gt]},{provide:Qf,useClass:oP,multi:!0,deps:[ct]},eT,iT,rT,{provide:ao,useExisting:eT},{provide:Bi,useClass:Yx,deps:[]},[]];var aT=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(q(ct))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ne="primary",$o=Symbol("RouteTitle"),np=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Wi(t){return new np(t)}function pP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function gP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Kt(t[n],e[n]))return!1;return!0}function Kt(t,e){let n=t?rp(t):void 0,r=e?rp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!fT(t[i],e[i]))return!1;return!0}function rp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function fT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function pT(t){return t.length>0?t[t.length-1]:null}function Zn(t){return Bd(t)?t:Io(t)?Te(Promise.resolve(t)):Y(t)}var mP={exact:mT,subset:yT},gT={exact:yP,subset:vP,ignored:()=>!0};function cT(t,e,n){return mP[n.paths](t.root,e.root,n.matrixParams)&&gT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function yP(t,e){return Kt(t,e)}function mT(t,e,n){if(!kr(t.segments,e.segments)||!Cu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!mT(t.children[r],e.children[r],n))return!1;return!0}function vP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>fT(t[n],e[n]))}function yT(t,e,n){return vT(t,e,e.segments,n)}function vT(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!kr(i,n)||e.hasChildren()||!Cu(i,n,r))}else if(t.segments.length===n.length){if(!kr(t.segments,n)||!Cu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!yT(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!kr(t.segments,i)||!Cu(t.segments,i,r)||!t.children[ne]?!1:vT(t.children[ne],e,s,r)}}function Cu(t,e,n){return e.every((r,i)=>gT[n](t[i].parameters,r.parameters))}var Jn=class{constructor(e=new ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Wi(this.queryParams),this._queryParamMap}toString(){return _P.serialize(this)}},ge=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Su(this)}},Or=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Wi(this.parameters),this._parameterMap}toString(){return wT(this)}};function IP(t,e){return kr(t,e)&&t.every((n,r)=>Kt(n.parameters,e[r].parameters))}function kr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function wP(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ne&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ne&&(n=n.concat(e(i,r)))}),n}var Rp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new Ru,providedIn:"root"});let t=e;return t})(),Ru=class{parse(e){let n=new sp(e);return new Jn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ao(e.root,!0)}`,r=DP(e.queryParams),i=typeof e.fragment=="string"?`#${EP(e.fragment)}`:"";return`${n}${r}${i}`}},_P=new Ru;function Su(t){return t.segments.map(e=>wT(e)).join("/")}function Ao(t,e){if(!t.hasChildren())return Su(t);if(e){let n=t.children[ne]?Ao(t.children[ne],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ne&&r.push(`${i}:${Ao(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=wP(t,(r,i)=>i===ne?[Ao(t.children[ne],!1)]:[`${i}:${Ao(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${Su(t)}/${n[0]}`:`${Su(t)}/(${n.join("//")})`}}function IT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Du(t){return IT(t).replace(/%3B/gi,";")}function EP(t){return encodeURI(t)}function ip(t){return IT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Au(t){return decodeURIComponent(t)}function uT(t){return Au(t.replace(/\+/g,"%20"))}function wT(t){return`${ip(t.path)}${TP(t.parameters)}`}function TP(t){return Object.entries(t).map(([e,n])=>`;${ip(e)}=${ip(n)}`).join("")}function DP(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Du(n)}=${Du(i)}`).join("&"):`${Du(n)}=${Du(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var bP=/^[^\/()?;#]+/;function Xf(t){let e=t.match(bP);return e?e[0]:""}var CP=/^[^\/()?;=#]+/;function SP(t){let e=t.match(CP);return e?e[0]:""}var AP=/^[^=?&#]+/;function RP(t){let e=t.match(AP);return e?e[0]:""}var NP=/^[^&#]+/;function MP(t){let e=t.match(NP);return e?e[0]:""}var sp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ne]=new ge(e,n)),r}parseSegment(){let e=Xf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new z(4009,!1);return this.capture(e),new Or(Au(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=SP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xf(this.remaining);i&&(r=i,this.capture(r))}e[Au(n)]=Au(r)}parseQueryParam(e){let n=RP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=MP(this.remaining);o&&(r=o,this.capture(r))}let i=uT(n),s=uT(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ne);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ne]:new ge([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new z(4011,!1)}};function _T(t){return t.segments.length>0?new ge([],{[ne]:t}):t}function ET(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=ET(i);if(r===ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ge(t.segments,e);return xP(n)}function xP(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new ge(t.segments.concat(e.segments),e.children)}return t}function Ki(t){return t instanceof Jn}function PP(t,e,n=null,r=null){let i=TT(t);return DT(i,e,n,r)}function TT(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new ge(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=_T(r);return e??i}function DT(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Zf(i,i,i,n,r);let s=OP(e);if(s.toRoot())return Zf(i,i,new ge([],{}),n,r);let o=kP(s,i,t),a=o.processChildren?Mo(o.segmentGroup,o.index,s.commands):CT(o.segmentGroup,o.index,s.commands);return Zf(i,o.segmentGroup,a,n,r)}function Nu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Oo(t){return typeof t=="object"&&t!=null&&t.outlets}function Zf(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=bT(t,e,n);let a=_T(ET(o));return new Jn(a,s,i)}function bT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=bT(s,e,n)}),new ge(t.segments,r)}var Mu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Nu(r[0]))throw new z(4003,!1);let i=r.find(Oo);if(i&&i!==pT(r))throw new z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function OP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Mu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Mu(n,e,r)}var zi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function kP(t,e,n){if(t.isAbsolute)return new zi(e,!0,0);if(!n)return new zi(e,!1,NaN);if(n.parent===null)return new zi(n,!0,0);let r=Nu(t.commands[0])?0:1,i=n.segments.length-1+r;return FP(n,i,t.numberOfDoubleDots)}function FP(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new z(4005,!1);i=r.segments.length}return new zi(r,!1,i-s)}function LP(t){return Oo(t[0])?t[0].outlets:{[ne]:t}}function CT(t,e,n){if(t??=new ge([],{}),t.segments.length===0&&t.hasChildren())return Mo(t,e,n);let r=VP(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ge(t.segments.slice(0,r.pathIndex),{});return s.children[ne]=new ge(t.segments.slice(r.pathIndex),t.children),Mo(s,0,i)}else return r.match&&i.length===0?new ge(t.segments,{}):r.match&&!t.hasChildren()?op(t,e,n):r.match?Mo(t,0,i):op(t,e,n)}function Mo(t,e,n){if(n.length===0)return new ge(t.segments,{});{let r=LP(n),i={};if(Object.keys(r).some(s=>s!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let s=Mo(t.children[ne],e,n);return new ge(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=CT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ge(t.segments,i)}}function VP(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Oo(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!dT(u,l,o))return s;r+=2}else{if(!dT(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function op(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Oo(s)){let u=UP(s.outlets);return new ge(r,u)}if(i===0&&Nu(n[0])){let u=t.segments[e];r.push(new Or(u.path,lT(n[0]))),i++;continue}let o=Oo(s)?s.outlets[ne]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Nu(a)?(r.push(new Or(o,lT(a))),i+=2):(r.push(new Or(o,{})),i++)}return new ge(r,{})}function UP(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=op(new ge([],{}),0,r))}),e}function lT(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dT(t,e,n){return t==n.path&&Kt(e,n.parameters)}var xo="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),Ct=class{constructor(e,n){this.id=e,this.url=n}},ko=class extends Ct{constructor(e,n,r="imperative",i=null){super(e,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Ct{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(yt||{}),ap=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ap||{}),Xn=class extends Ct{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Ct{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},Fo=class extends Ct{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xu=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cp=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},up=class extends Ct{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},lp=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dp=class extends Ct{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},fp=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},pp=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gp=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mp=class{constructor(e){this.snapshot=e,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{constructor(e){this.snapshot=e,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lo=class{},Vo=class{constructor(e){this.url=e}};var vp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Vu,this.attachRef=null}},Vu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new vp,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ip(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Ip(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=wp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return wp(e,this._root).map(n=>n.value)}};function Ip(t,e){if(t===e.value)return e;for(let n of e.children){let r=Ip(t,n);if(r)return r}return null}function wp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=wp(t,n);if(r.length)return r.unshift(e),r}return[]}var mt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Hi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ou=class extends Pu{constructor(e,n){super(e),this.snapshot=n,Mp(this,e)}toString(){return this.snapshot.toString()}};function ST(t){let e=jP(t),n=new Oe([new Or("",{})]),r=new Oe({}),i=new Oe({}),s=new Oe({}),o=new Oe(""),a=new Qi(n,r,s,o,i,ne,t,e.root);return a.snapshot=e.root,new Ou(new mt(a,[]),e)}function jP(t){let e={},n={},r={},i="",s=new Uo([],e,r,i,n,ne,t,null,{});return new ku("",new mt(s,[]))}var Qi=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[$o]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Wi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Wi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Np(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&RT(i)&&(r.resolve[$o]=i.title),r}var Uo=class{get title(){return this.data?.[$o]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Wi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Wi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ku=class extends Pu{constructor(e,n){super(n),this.url=e,Mp(this,n)}toString(){return AT(this._root)}};function Mp(t,e){e.value._routerState=t,e.children.forEach(n=>Mp(t,n))}function AT(t){let e=t.children.length>0?` { ${t.children.map(AT).join(", ")} } `:"";return`${t.value}${e}`}function ep(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Kt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Kt(e.params,n.params)||t.paramsSubject.next(n.params),gP(e.url,n.url)||t.urlSubject.next(n.url),Kt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function _p(t,e){let n=Kt(t.params,e.params)&&IP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||_p(t.parent,e.parent))}function RT(t){return typeof t.title=="string"||t.title===null}var BP=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new Mt,this.deactivateEvents=new Mt,this.attachEvents=new Mt,this.detachEvents=new Mt,this.parentContexts=k(Vu),this.location=k(Li),this.changeDetector=k(wo),this.environmentInjector=k(at),this.inputBinder=k(xp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new z(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new z(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Ep(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=mo({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zc]});let t=e;return t})(),Ep=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Qi?this.route:e===Vu?this.childContexts:this.parent.get(e,n)}},xp=new G("");function $P(t,e,n){let r=jo(t,e._root,n?n._root:void 0);return new Ou(r,e)}function jo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=qP(t,e,n);return new mt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>jo(t,a)),o}}let r=HP(e.value),i=e.children.map(s=>jo(t,s));return new mt(r,i)}}function qP(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return jo(t,r,i);return jo(t,r)})}function HP(t){return new Qi(new Oe(t.url),new Oe(t.params),new Oe(t.queryParams),new Oe(t.fragment),new Oe(t.data),t.outlet,t.component,t)}var NT="ngNavigationCancelingError";function MT(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ki(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xT(!1,yt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function xT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[NT]=!0,n.cancellationCode=e,n}function zP(t){return PT(t)&&Ki(t.url)}function PT(t){return!!t&&t[NT]}var GP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=jw({type:e,selectors:[["ng-component"]],standalone:!0,features:[SE],decls:1,vars:0,template:function(i,s){i&1&&kf(0,"router-outlet")},dependencies:[BP],encapsulation:2});let t=e;return t})();function WP(t,e){return t.providers&&!t._injector&&(t._injector=Of(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Pp(t){let e=t.children&&t.children.map(Pp),n=e?be(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=GP),n}function Qt(t){return t.outlet||ne}function KP(t,e){let n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}function qo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var QP=(t,e,n,r)=>ee(i=>(new Tp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Tp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ep(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Hi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Hi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Hi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Hi(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new yp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new gp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(ep(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ep(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=qo(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Fu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Gi=class{constructor(e,n){this.component=e,this.route=n}};function YP(t,e,n){let r=t._root,i=e?e._root:null;return Ro(r,i,n,[r.value])}function JP(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ji(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Sw(t)?t:e.get(t):r}function Ro(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Hi(e);return t.children.forEach(o=>{XP(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Po(a,n.getContext(o),i)),i}function XP(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=ZP(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Fu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ro(t,e,a?a.children:null,r,i):Ro(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Gi(a.outlet.component,o))}else o&&Po(e,a,i),i.canActivateChecks.push(new Fu(r)),s.component?Ro(t,null,a?a.children:null,r,i):Ro(t,null,n,r,i);return i}function ZP(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!kr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!kr(t.url,e.url)||!Kt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_p(t,e)||!Kt(t.queryParams,e.queryParams);case"paramsChange":default:return!_p(t,e)}}function Po(t,e,n){let r=Hi(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Po(o,e.children.getContext(s),n):Po(o,null,n):Po(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Gi(e.outlet.component,i)):n.canDeactivateChecks.push(new Gi(null,i)):n.canDeactivateChecks.push(new Gi(null,i))}function Ho(t){return typeof t=="function"}function eO(t){return typeof t=="boolean"}function tO(t){return t&&Ho(t.canLoad)}function nO(t){return t&&Ho(t.canActivate)}function rO(t){return t&&Ho(t.canActivateChild)}function iO(t){return t&&Ho(t.canDeactivate)}function sO(t){return t&&Ho(t.canMatch)}function OT(t){return t instanceof dn||t?.name==="EmptyError"}var bu=Symbol("INITIAL_VALUE");function Yi(){return Ke(t=>fc(t.map(e=>e.pipe(hn(1),Gd(bu)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===bu)return bu;if(n===!1||n instanceof Jn)return n}return!0}),ft(e=>e!==bu),hn(1)))}function oO(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Y(be(L({},n),{guardsResult:!0})):aO(o,r,i,t).pipe(ke(a=>a&&eO(a)?cO(r,s,t,e):Y(a)),ee(a=>be(L({},n),{guardsResult:a})))})}function aO(t,e,n,r){return Te(t).pipe(ke(i=>fO(i.component,i.route,n,e,r)),jt(i=>i!==!0,!0))}function cO(t,e,n,r){return Te(e).pipe(jn(i=>Ii(lO(i.route.parent,r),uO(i.route,r),hO(t,i.path,n),dO(t,i.route,n))),jt(i=>i!==!0,!0))}function uO(t,e){return t!==null&&e&&e(new mp(t)),Y(!0)}function lO(t,e){return t!==null&&e&&e(new pp(t)),Y(!0)}function dO(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(s=>pc(()=>{let o=qo(e)??n,a=Ji(s,o),u=nO(a)?a.canActivate(e,t):gn(o,()=>a(e,t));return Zn(u).pipe(jt())}));return Y(i).pipe(Yi())}function hO(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>JP(o)).filter(o=>o!==null).map(o=>pc(()=>{let a=o.guards.map(u=>{let l=qo(o.node)??n,h=Ji(u,l),p=rO(h)?h.canActivateChild(r,t):gn(l,()=>h(r,t));return Zn(p).pipe(jt())});return Y(a).pipe(Yi())}));return Y(s).pipe(Yi())}function fO(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(a=>{let u=qo(e)??i,l=Ji(a,u),h=iO(l)?l.canDeactivate(t,e,n,r):gn(u,()=>l(t,e,n,r));return Zn(h).pipe(jt())});return Y(o).pipe(Yi())}function pO(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let s=i.map(o=>{let a=Ji(o,t),u=tO(a)?a.canLoad(e,n):gn(t,()=>a(e,n));return Zn(u)});return Y(s).pipe(Yi(),kT(r))}function kT(t){return Pd(Me(e=>{if(Ki(e))throw MT(t,e)}),ee(e=>e===!0))}function gO(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let s=i.map(o=>{let a=Ji(o,t),u=sO(a)?a.canMatch(e,n):gn(t,()=>a(e,n));return Zn(u)});return Y(s).pipe(Yi(),kT(r))}var Bo=class{constructor(e){this.segmentGroup=e||null}},Lu=class extends Error{constructor(e){super(),this.urlTree=e}};function qi(t){return vi(new Bo(t))}function mO(t){return vi(new z(4e3,!1))}function yO(t){return vi(xT(!1,yt.GuardRejected))}var Dp=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[ne])return mO(e.redirectTo);i=i.children[ne]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Lu(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Jn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new ge(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},bp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vO(t,e,n,r,i){let s=Op(t,e,n);return s.matched?(r=WP(e,r),gO(r,e,n,i).pipe(ee(o=>o===!0?s:L({},bp)))):Y(s)}function Op(t,e,n){if(e.path==="**")return IO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},bp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||pP)(n,t,e);if(!i)return L({},bp);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function IO(t){return{matched:!0,parameters:t.length>0?pT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function hT(t,e,n,r){return n.length>0&&EO(t,n,r)?{segmentGroup:new ge(e,_O(r,new ge(n,t.children))),slicedSegments:[]}:n.length===0&&TO(t,n,r)?{segmentGroup:new ge(t.segments,wO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ge(t.segments,t.children),slicedSegments:n}}function wO(t,e,n,r){let i={};for(let s of n)if(Uu(t,e,s)&&!r[Qt(s)]){let o=new ge([],{});i[Qt(s)]=o}return L(L({},r),i)}function _O(t,e){let n={};n[ne]=e;for(let r of t)if(r.path===""&&Qt(r)!==ne){let i=new ge([],{});n[Qt(r)]=i}return n}function EO(t,e,n){return n.some(r=>Uu(t,e,r)&&Qt(r)!==ne)}function TO(t,e,n){return n.some(r=>Uu(t,e,r))}function Uu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function DO(t,e,n,r){return Qt(t)!==r&&(r===ne||!Uu(e,n,t))?!1:Op(e,t,n).matched}function bO(t,e,n){return e.length===0&&!t.children[n]}var Cp=class{};function CO(t,e,n,r,i,s,o="emptyOnly"){return new Sp(t,e,n,r,i,o,s).recognize()}var SO=31,Sp=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Dp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new z(4002,`'${e.segmentGroup}'`)}recognize(){let e=hT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let r=new Uo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,{}),i=new mt(r,n),s=new ku("",i),o=PP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ne).pipe(Un(r=>{if(r instanceof Lu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Bo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Np(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(ee(s=>s instanceof mt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Te(i).pipe(jn(s=>{let o=r.children[s],a=KP(n,s);return this.processSegmentGroup(e,a,o,s)}),zd((s,o)=>(s.push(...o),s)),Bn(null),Hd(),ke(s=>{if(s===null)return qi(r);let o=FT(s);return AO(o),Y(o)}))}processSegment(e,n,r,i,s,o){return Te(n).pipe(jn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Un(u=>{if(u instanceof Bo)return Y(null);throw u}))),jt(a=>!!a),Un(a=>{if(OT(a))return bO(r,i,s)?Y(new Cp):qi(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return DO(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):qi(i):qi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=Op(n,i,s);if(!a)return qi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SO&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(ke(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=vO(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ke(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ke(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,_=new Uo(h,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,NO(r),Qt(r),r.component??r._loadedComponent??null,r,MO(r)),{segmentGroup:A,slicedSegments:N}=hT(n,h,p,u);if(N.length===0&&A.hasChildren())return this.processChildren(l,u,A).pipe(ee(x=>x===null?null:new mt(_,x)));if(u.length===0&&N.length===0)return Y(new mt(_,[]));let R=Qt(r)===s;return this.processSegment(l,u,A,N,R?ne:s,!0).pipe(ee(x=>new mt(_,x instanceof mt?[x]:[])))}))):qi(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):pO(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(Me(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):yO(n))):Y({routes:[],injector:e})}};function AO(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function RO(t){let e=t.value.routeConfig;return e&&e.path===""}function FT(t){let e=[],n=new Set;for(let r of t){if(!RO(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=FT(r.children);e.push(new mt(r.value,i))}return e.filter(r=>!n.has(r))}function NO(t){return t.data||{}}function MO(t){return t.resolve||{}}function xO(t,e,n,r,i,s){return ke(o=>CO(t,e,n,r,o.extractedUrl,i,s).pipe(ee(({state:a,tree:u})=>be(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function PO(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of LT(u))o.add(l);let a=0;return Te(o).pipe(jn(u=>s.has(u)?OO(u,r,t,e):(u.data=Np(u,u.parent,t).resolve,Y(void 0))),Me(()=>a++),wi(1),ke(u=>a===o.size?Y(n):ht))})}function LT(t){let e=t.children.map(n=>LT(n)).flat();return[t,...e]}function OO(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!RT(i)&&(s[$o]=i.title),kO(s,t,e,r).pipe(ee(o=>(t._resolvedData=o,t.data=Np(t,t.parent,n).resolve,null)))}function kO(t,e,n,r){let i=rp(t);if(i.length===0)return Y({});let s={};return Te(i).pipe(ke(o=>FO(t[o],e,n,r).pipe(jt(),Me(a=>{s[o]=a}))),wi(1),qd(s),Un(o=>OT(o)?ht:vi(o)))}function FO(t,e,n,r){let i=qo(e)??r,s=Ji(t,i),o=s.resolve?s.resolve(e,n):gn(i,()=>s(e,n));return Zn(o)}function tp(t){return Ke(e=>{let n=t(e);return n?Te(n).pipe(ee(()=>e)):Y(e)})}var VT=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ne);return i}getResolvedTitleForRoute(r){return r.data[$o]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>k(LO),providedIn:"root"});let t=e;return t})(),LO=(()=>{let e=class e extends VT{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(q(aT))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kp=new G("",{providedIn:"root",factory:()=>({})}),Fp=new G(""),VO=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(Ff)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zn(r.loadComponent()).pipe(ee(UT),Me(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),wr(()=>{this.componentLoaders.delete(r)})),s=new pi(i,()=>new et).pipe(fi());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=UO(i,this.compiler,r,this.onLoadEndListener).pipe(wr(()=>{this.childrenLoaders.delete(i)})),a=new pi(o,()=>new et).pipe(fi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UO(t,e,n,r){return Zn(t.loadChildren()).pipe(ee(UT),ke(i=>i instanceof uo||Array.isArray(i)?Y(i):Te(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Fp,[],{optional:!0,self:!0}).flat()),{routes:o.map(Pp),injector:s}}))}function jO(t){return t&&typeof t=="object"&&"default"in t}function UT(t){return jO(t)?t.default:t}var Lp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>k(BO),providedIn:"root"});let t=e;return t})(),BO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$O=new G("");var qO=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=k(VO),this.environmentInjector=k(at),this.urlSerializer=k(Rp),this.rootContexts=k(Vu),this.location=k(_o),this.inputBindingEnabled=k(xp,{optional:!0})!==null,this.titleStrategy=k(VT),this.options=k(kp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=k(Lp),this.createViewTransition=k($O,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let r=s=>this.events.next(new hp(s)),i=s=>this.events.next(new fp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(be(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Oe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:xo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ft(o=>o.id!==0),ee(o=>be(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ke(o=>{let a=!1,u=!1;return Y(o).pipe(Ke(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",yt.SupersededByNewNavigation),ht;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?be(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.rawUrl),m,ap.IgnoredSameUrlNavigation)),l.resolve(null),ht}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Ke(m=>{let _=this.transitions?.getValue();return this.events.next(new ko(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?ht:Promise.resolve(m)}),xO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Me(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=be(L({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let _=new xu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:_,source:A,restoredState:N,extras:R}=l,x=new ko(m,this.urlSerializer.serialize(_),A,N);this.events.next(x);let j=ST(this.rootComponentType).snapshot;return this.currentTransition=o=be(L({},l),{targetSnapshot:j,urlAfterRedirects:_,extras:be(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,Y(o)}else{let m="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,ap.IgnoredByUrlHandlingStrategy)),l.resolve(null),ht}}),Me(l=>{let h=new cp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ee(l=>(this.currentTransition=o=be(L({},l),{guards:YP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),oO(this.environmentInjector,l=>this.events.next(l)),Me(l=>{if(o.guardsResult=l.guardsResult,Ki(l.guardsResult))throw MT(this.urlSerializer,l.guardsResult);let h=new up(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ft(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",yt.GuardRejected),!1)),tp(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(Me(h=>{let p=new lp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Ke(h=>{let p=!1;return Y(h).pipe(PO(this.paramsInheritanceStrategy,this.environmentInjector),Me({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",yt.NoDataFromResolver)}}))}),Me(h=>{let p=new dp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),tp(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Me(_=>{p.component=_}),ee(()=>{})));for(let _ of p.children)m.push(...h(_));return m};return fc(h(l.targetSnapshot.root)).pipe(Bn(null),hn(1))}),tp(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Te(p).pipe(ee(()=>o)):Y(o)}),ee(l=>{let h=$P(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=be(L({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Me(()=>{this.events.next(new Lo)}),QP(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),hn(1),Me({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Wd(this.transitionAbortSubject.pipe(Me(l=>{throw l}))),wr(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",yt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Un(l=>{if(u=!0,PT(l))this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),zP(l)?this.events.next(new Vo(l.url)):o.resolve(!1);else{this.events.next(new Fo(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return ht}))}))}cancelNavigationTransition(r,i,s){let o=new Xn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HO(t){return t!==xo}var zO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>k(GO),providedIn:"root"});let t=e;return t})(),Ap=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},GO=(()=>{let e=class e extends Ap{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=yf(e)))(s||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>k(WO),providedIn:"root"});let t=e;return t})(),WO=(()=>{let e=class e extends jT{constructor(){super(...arguments),this.location=k(_o),this.urlSerializer=k(Rp),this.options=k(kp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=k(Lp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ST(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ko)this.stateMemento=this.createStateMemento();else if(r instanceof Lr)this.rawUrlTree=i.initialUrl;else if(r instanceof xu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Lo?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Xn&&(r.code===yt.GuardRejected||r.code===yt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Fo?this.restoreHistory(i,!0):r instanceof Fr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=yf(e)))(s||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),No=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(No||{});function KO(t,e){t.events.pipe(ft(n=>n instanceof Fr||n instanceof Xn||n instanceof Fo||n instanceof Lr),ee(n=>n instanceof Fr||n instanceof Lr?No.COMPLETE:(n instanceof Xn?n.code===yt.Redirect||n.code===yt.SupersededByNewNavigation:!1)?No.REDIRECTING:No.FAILED),ft(n=>n!==No.REDIRECTING),hn(1)).subscribe(()=>{e()})}function QO(t){throw t}var YO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},BT=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=k(lu),this.stateManager=k(jT),this.options=k(kp,{optional:!0})||{},this.pendingTasks=k(Vi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=k(qO),this.urlSerializer=k(Rp),this.location=k(_o),this.urlHandlingStrategy=k(Lp),this._events=new et,this.errorHandler=this.options.errorHandler||QO,this.navigated=!1,this.routeReuseStrategy=k(zO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=k(Fp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!k(xp,{optional:!0}),this.eventsSubscription=new Re,this.isNgZoneEnabled=k(me)instanceof me&&me.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Xn&&i.code!==yt.Redirect&&i.code!==yt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Fr)this.navigated=!0;else if(i instanceof Vo){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||HO(s.source)};this.scheduleNavigation(a,xo,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ZO(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=L({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Pp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let _=s?s.snapshot:this.routerState.snapshot.root;m=TT(_)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return DT(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ki(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,xo,null,i)}navigate(r,i={skipLocationChange:!1}){return XO(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=L({},YO):i===!1?s=L({},JO):s=i,Ki(r))return cT(this.currentUrlTree,r,s);let o=this.parseUrl(r);return cT(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,_)=>{u=m,l=_});let p=this.pendingTasks.add();return KO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XO(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new z(4008,!1)}function ZO(t){return!(t instanceof Lo)&&!(t instanceof Vo)}var ek=new G("");function CG(t,...e){return Dt([{provide:Fp,multi:!0,useValue:t},[],{provide:Qi,useFactory:tk,deps:[BT]},{provide:du,multi:!0,useFactory:nk},e.map(n=>n.\u0275providers)])}function tk(t){return t.routerState.root}function nk(){let t=k(Ft);return e=>{let n=t.get(Ui);if(e!==n.components[0])return;let r=t.get(BT),i=t.get(rk);t.get(ik)===1&&r.initialNavigation(),t.get(sk,null,ie.Optional)?.setUpPreloading(),t.get(ek,null,ie.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var rk=new G("",{factory:()=>new et}),ik=new G("",{providedIn:"root",factory:()=>1});var sk=new G("");var qT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ok=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},HT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,_=l&63;u||(_=64,o||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ok(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Up;let m=s<<2|a>>4;if(r.push(m),l!==64){let _=a<<4&240|l>>2;if(r.push(_),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Up=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ak=function(t){let e=qT(t);return HT.encodeByteArray(e,!0)},zo=function(t){return ak(t).replace(/\./g,"")},Bp=function(t){try{return HT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ck(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var uk=()=>ck().__FIREBASE_DEFAULTS__,lk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Bp(t[1]);return e&&JSON.parse(e)},Bu=()=>{try{return uk()||lk()||dk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$p=t=>{var e,n;return(n=(e=Bu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zT=t=>{let e=$p(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qp=()=>{var t;return(t=Bu())===null||t===void 0?void 0:t.config},Hp=t=>{var e;return(e=Bu())===null||e===void 0?void 0:e[`_${t}`]};var ju=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function GT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zo(JSON.stringify(n)),zo(JSON.stringify(o)),""].join(".")}function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function hk(){var t;let e=(t=Bu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function QT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YT(){let t=Le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JT(){return!hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zp(){try{return typeof indexedDB=="object"}catch{return!1}}function XT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var fk="FirebaseError",vt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fk,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vn.prototype.create)}},vn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?pk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new vt(i,a,r)}};function pk(t,e){return t.replace(gk,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var gk=/\{\$([^}]+)}/g;function ZT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if($T(s)&&$T(o)){if(!Vr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function $T(t){return t!==null&&typeof t=="object"}function Go(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xi(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Zi(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function eD(t,e){let n=new jp(t,e);return n.subscribe.bind(n)}var jp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Vp),i.error===void 0&&(i.error=Vp),i.complete===void 0&&(i.complete=Vp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mk(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vp(){}var RG=4*60*60*1e3;function it(t){return t&&t._delegate?t._delegate:t}var St=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ur="[DEFAULT]";var Gp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ju;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vk(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yk(t){return t===Ur?void 0:t}function vk(t){return t.instantiationMode==="EAGER"}var $u=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Gp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Ik=[],ae=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ae||{}),wk={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},_k=ae.INFO,Ek={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},Tk=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Ek[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},er=class{constructor(e){this.name=e,this._logLevel=_k,this._logHandler=Tk,this._userLogHandler=null,Ik.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}};var Dk=(t,e)=>e.some(n=>t instanceof n),tD,nD;function bk(){return tD||(tD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ck(){return nD||(nD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var rD=new WeakMap,Kp=new WeakMap,iD=new WeakMap,Wp=new WeakMap,Yp=new WeakMap;function Sk(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Yt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rD.set(n,t)}).catch(()=>{}),Yp.set(e,t),e}function Ak(t){if(Kp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Kp.set(t,e)}var Qp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sD(t){Qp=t(Qp)}function Rk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(qu(this),e,...n);return iD.set(r,e.sort?e.sort():[e]),Yt(r)}:Ck().includes(t)?function(...e){return t.apply(qu(this),e),Yt(rD.get(this))}:function(...e){return Yt(t.apply(qu(this),e))}}function Nk(t){return typeof t=="function"?Rk(t):(t instanceof IDBTransaction&&Ak(t),Dk(t,bk())?new Proxy(t,Qp):t)}function Yt(t){if(t instanceof IDBRequest)return Sk(t);if(Wp.has(t))return Wp.get(t);let e=Nk(t);return e!==t&&(Wp.set(t,e),Yp.set(e,t)),e}var qu=t=>Yp.get(t);function aD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Yt(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Yt(o.result),u.oldVersion,u.newVersion,Yt(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Mk=["get","getKey","getAll","getAllKeys","count"],xk=["put","add","delete","clear"],Jp=new Map;function oD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jp.get(e))return Jp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=xk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Mk.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Jp.set(e,s),s}sD(t=>be(L({},t),{get:(e,n,r)=>oD(e,n)||t.get(e,n,r),has:(e,n)=>!!oD(e,n)||t.has(e,n)}));var Zp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Pk(t){let e=t.getComponent();return e?.type==="VERSION"}var eg="@firebase/app",cD="0.10.7";var jr=new er("@firebase/app"),Ok="@firebase/app-compat",kk="@firebase/analytics-compat",Fk="@firebase/analytics",Lk="@firebase/app-check-compat",Vk="@firebase/app-check",Uk="@firebase/auth",jk="@firebase/auth-compat",Bk="@firebase/database",$k="@firebase/database-compat",qk="@firebase/functions",Hk="@firebase/functions-compat",zk="@firebase/installations",Gk="@firebase/installations-compat",Wk="@firebase/messaging",Kk="@firebase/messaging-compat",Qk="@firebase/performance",Yk="@firebase/performance-compat",Jk="@firebase/remote-config",Xk="@firebase/remote-config-compat",Zk="@firebase/storage",e1="@firebase/storage-compat",t1="@firebase/firestore",n1="@firebase/vertexai-preview",r1="@firebase/firestore-compat",i1="firebase",s1="10.12.4";var tg="[DEFAULT]",o1={[eg]:"fire-core",[Ok]:"fire-core-compat",[Fk]:"fire-analytics",[kk]:"fire-analytics-compat",[Vk]:"fire-app-check",[Lk]:"fire-app-check-compat",[Uk]:"fire-auth",[jk]:"fire-auth-compat",[Bk]:"fire-rtdb",[$k]:"fire-rtdb-compat",[qk]:"fire-fn",[Hk]:"fire-fn-compat",[zk]:"fire-iid",[Gk]:"fire-iid-compat",[Wk]:"fire-fcm",[Kk]:"fire-fcm-compat",[Qk]:"fire-perf",[Yk]:"fire-perf-compat",[Jk]:"fire-rc",[Xk]:"fire-rc-compat",[Zk]:"fire-gcs",[e1]:"fire-gcs-compat",[t1]:"fire-fst",[r1]:"fire-fst-compat",[n1]:"fire-vertex","fire-js":"fire-js",[i1]:"fire-js-all"};var Wo=new Map,a1=new Map,ng=new Map;function uD(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nr(t){let e=t.name;if(ng.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,t);for(let n of Wo.values())uD(n,t);for(let n of a1.values())uD(n,t);return!0}function Qo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t.settings!==void 0}var c1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new vn("app","Firebase",c1);var rg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}};var rr=s1;function og(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:tg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw tr.create("bad-app-name",{appName:String(i)});if(n||(n=qp()),!n)throw tr.create("no-options");let s=Wo.get(i);if(s){if(Vr(n,s.options)&&Vr(r,s.config))return s;throw tr.create("duplicate-app",{appName:i})}let o=new $u(i);for(let u of ng.values())o.addComponent(u);let a=new rg(n,r,o);return Wo.set(i,a),a}function es(t=tg){let e=Wo.get(t);if(!e&&t===tg&&qp())return og();if(!e)throw tr.create("no-app",{appName:t});return e}function Hu(){return Array.from(Wo.values())}function Ve(t,e,n){var r;let i=(r=o1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}nr(new St(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var u1="firebase-heartbeat-database",l1=1,Ko="firebase-heartbeat-store",Xp=null;function fD(){return Xp||(Xp=aD(u1,l1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw tr.create("idb-open",{originalErrorMessage:t.message})})),Xp}function d1(t){return w(this,null,function*(){try{let n=(yield fD()).transaction(Ko),r=yield n.objectStore(Ko).get(pD(t));return yield n.done,r}catch(e){if(e instanceof vt)jr.warn(e.message);else{let n=tr.create("idb-get",{originalErrorMessage:e?.message});jr.warn(n.message)}}})}function lD(t,e){return w(this,null,function*(){try{let r=(yield fD()).transaction(Ko,"readwrite");yield r.objectStore(Ko).put(e,pD(t)),yield r.done}catch(n){if(n instanceof vt)jr.warn(n.message);else{let r=tr.create("idb-set",{originalErrorMessage:n?.message});jr.warn(r.message)}}})}function pD(t){return`${t.name}!${t.options.appId}`}var h1=1024,f1=30*24*60*60*1e3,ig=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new sg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=dD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=f1}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return w(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=dD(),{heartbeatsToSend:r,unsentEntries:i}=p1(this._heartbeatsCache.heartbeats),s=zo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function dD(){return new Date().toISOString().substring(0,10)}function p1(t,e=h1){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),hD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var sg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return zp()?XT().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield d1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return lD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return lD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function hD(t){return zo(JSON.stringify({version:2,heartbeats:t})).length}function g1(t){nr(new St("platform-logger",e=>new Zp(e),"PRIVATE")),nr(new St("heartbeat",e=>new ig(e),"PRIVATE")),Ve(eg,cD,t),Ve(eg,cD,"esm2017"),Ve("fire-js","")}g1("");var gD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mD={};var ir,ag;(function(){var t;function e(T,y){function v(){}v.prototype=y.prototype,T.D=y.prototype,T.prototype=new v,T.prototype.constructor=T,T.C=function(E,D,C){for(var I=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)I[cn-2]=arguments[cn];return y.prototype[D].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,v){v||(v=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(D=0;16>D;++D)E[D]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=T.g[0],v=T.g[1],D=T.g[2];var C=T.g[3],I=y+(C^v&(D^C))+E[0]+3614090360&4294967295;y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[1]+3905402710&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[2]+606105819&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[3]+3250441966&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(C^v&(D^C))+E[4]+4118548399&4294967295,y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[5]+1200080426&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[6]+2821735955&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[7]+4249261313&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(C^v&(D^C))+E[8]+1770035416&4294967295,y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[9]+2336552879&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[10]+4294925233&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[11]+2304563134&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(C^v&(D^C))+E[12]+1804603682&4294967295,y=v+(I<<7&4294967295|I>>>25),I=C+(D^y&(v^D))+E[13]+4254626195&4294967295,C=y+(I<<12&4294967295|I>>>20),I=D+(v^C&(y^v))+E[14]+2792965006&4294967295,D=C+(I<<17&4294967295|I>>>15),I=v+(y^D&(C^y))+E[15]+1236535329&4294967295,v=D+(I<<22&4294967295|I>>>10),I=y+(D^C&(v^D))+E[1]+4129170786&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[6]+3225465664&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[11]+643717713&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[0]+3921069994&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(D^C&(v^D))+E[5]+3593408605&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[10]+38016083&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[15]+3634488961&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[4]+3889429448&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(D^C&(v^D))+E[9]+568446438&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[14]+3275163606&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[3]+4107603335&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[8]+1163531501&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(D^C&(v^D))+E[13]+2850285829&4294967295,y=v+(I<<5&4294967295|I>>>27),I=C+(v^D&(y^v))+E[2]+4243563512&4294967295,C=y+(I<<9&4294967295|I>>>23),I=D+(y^v&(C^y))+E[7]+1735328473&4294967295,D=C+(I<<14&4294967295|I>>>18),I=v+(C^y&(D^C))+E[12]+2368359562&4294967295,v=D+(I<<20&4294967295|I>>>12),I=y+(v^D^C)+E[5]+4294588738&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[8]+2272392833&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[11]+1839030562&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[14]+4259657740&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(v^D^C)+E[1]+2763975236&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[4]+1272893353&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[7]+4139469664&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[10]+3200236656&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(v^D^C)+E[13]+681279174&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[0]+3936430074&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[3]+3572445317&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[6]+76029189&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(v^D^C)+E[9]+3654602809&4294967295,y=v+(I<<4&4294967295|I>>>28),I=C+(y^v^D)+E[12]+3873151461&4294967295,C=y+(I<<11&4294967295|I>>>21),I=D+(C^y^v)+E[15]+530742520&4294967295,D=C+(I<<16&4294967295|I>>>16),I=v+(D^C^y)+E[2]+3299628645&4294967295,v=D+(I<<23&4294967295|I>>>9),I=y+(D^(v|~C))+E[0]+4096336452&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[7]+1126891415&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[14]+2878612391&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[5]+4237533241&4294967295,v=D+(I<<21&4294967295|I>>>11),I=y+(D^(v|~C))+E[12]+1700485571&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[3]+2399980690&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[10]+4293915773&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[1]+2240044497&4294967295,v=D+(I<<21&4294967295|I>>>11),I=y+(D^(v|~C))+E[8]+1873313359&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[15]+4264355552&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[6]+2734768916&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[13]+1309151649&4294967295,v=D+(I<<21&4294967295|I>>>11),I=y+(D^(v|~C))+E[4]+4149444226&4294967295,y=v+(I<<6&4294967295|I>>>26),I=C+(v^(y|~D))+E[11]+3174756917&4294967295,C=y+(I<<10&4294967295|I>>>22),I=D+(y^(C|~v))+E[2]+718787259&4294967295,D=C+(I<<15&4294967295|I>>>17),I=v+(C^(D|~y))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+D&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var v=y-this.blockSize,E=this.B,D=this.h,C=0;C<y;){if(D==0)for(;C<=v;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<y;)if(E[D++]=T.charCodeAt(C++),D==this.blockSize){i(this,E),D=0;break}}else for(;C<y;)if(E[D++]=T[C++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var v=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=v&255,v/=256;for(this.u(T),T=Array(16),y=v=0;4>y;++y)for(var E=0;32>E;E+=8)T[v++]=this.g[y]>>>E&255;return T};function s(T,y){var v=a;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=y(T)}function o(T,y){this.h=y;for(var v=[],E=!0,D=T.length-1;0<=D;D--){var C=T[D]|0;E&&C==y||(v[D]=C,E=!1)}this.g=v}var a={};function u(T){return-128<=T&&128>T?s(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var y=[],v=1,E=0;T>=v;E++)y[E]=T/v|0,v*=4294967296;return new o(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return R(h(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=l(Math.pow(y,8)),E=p,D=0;D<T.length;D+=8){var C=Math.min(8,T.length-D),I=parseInt(T.substring(D,D+C),y);8>C?(C=l(Math.pow(y,C)),E=E.j(C).add(l(I))):(E=E.j(v),E=E.add(l(I)))}return E}var p=u(0),m=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var T=0,y=1,v=0;v<this.g.length;v++){var E=this.i(v);T+=(0<=E?E:4294967296+E)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var y=l(Math.pow(T,6)),v=this,E="";;){var D=$(v,y).g;v=x(v,D.j(y));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(T);if(v=D,A(v))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function N(T){return T.h==-1}t.l=function(T){return T=x(this,T),N(T)?-1:A(T)?0:1};function R(T){for(var y=T.g.length,v=[],E=0;E<y;E++)v[E]=~T.g[E];return new o(v,~T.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0,D=0;D<=y;D++){var C=E+(this.i(D)&65535)+(T.i(D)&65535),I=(C>>>16)+(this.i(D)>>>16)+(T.i(D)>>>16);E=I>>>16,C&=65535,I&=65535,v[D]=I<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function x(T,y){return T.add(R(y))}t.j=function(T){if(A(this)||A(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var y=this.g.length+T.g.length,v=[],E=0;E<2*y;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<T.g.length;D++){var C=this.i(E)>>>16,I=this.i(E)&65535,cn=T.i(D)>>>16,Ms=T.i(D)&65535;v[2*E+2*D]+=I*Ms,j(v,2*E+2*D),v[2*E+2*D+1]+=C*Ms,j(v,2*E+2*D+1),v[2*E+2*D+1]+=I*cn,j(v,2*E+2*D+1),v[2*E+2*D+2]+=C*cn,j(v,2*E+2*D+2)}for(E=0;E<y;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=y;E<2*y;E++)v[E]=0;return new o(v,0)};function j(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function B(T,y){this.g=T,this.h=y}function $(T,y){if(A(y))throw Error("division by zero");if(A(T))return new B(p,p);if(N(T))return y=$(R(T),y),new B(R(y.g),R(y.h));if(N(y))return y=$(T,R(y)),new B(R(y.g),y.h);if(30<T.g.length){if(N(T)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,E=y;0>=E.l(T);)v=Ie(v),E=Ie(E);var D=J(v,1),C=J(E,1);for(E=J(E,2),v=J(v,2);!A(E);){var I=C.add(E);0>=I.l(T)&&(D=D.add(v),C=I),E=J(E,1),v=J(v,1)}return y=x(T,D.j(y)),new B(D,y)}for(D=p;0<=T.l(y);){for(v=Math.max(1,Math.floor(T.m()/y.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(v),I=C.j(y);N(I)||0<I.l(T);)v-=E,C=l(v),I=C.j(y);A(C)&&(C=m),D=D.add(C),T=x(T,I)}return new B(D,T)}t.A=function(T){return $(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)&T.i(E);return new o(v,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)|T.i(E);return new o(v,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),v=[],E=0;E<y;E++)v[E]=this.i(E)^T.i(E);return new o(v,this.h^T.h)};function Ie(T){for(var y=T.g.length+1,v=[],E=0;E<y;E++)v[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(v,T.h)}function J(T,y){var v=y>>5;y%=32;for(var E=T.g.length-v,D=[],C=0;C<E;C++)D[C]=0<y?T.i(C+v)>>>y|T.i(C+v+1)<<32-y:T.i(C+v);return new o(D,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ag=mD.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,ir=mD.Integer=o}).apply(typeof gD<"u"?gD:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},In={};var cg,ug,ts,lg,Yo,Gu,dg,hg,fg;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,S){for(var O=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)O[ye-2]=arguments[ye];return d.prototype[b].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,S=g.length||0;c.length=b+S;for(let O=0;O<S;O++)c[b+O]=g[O]}else c.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function B(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function $(c){return $[" "](c),c}$[" "]=function(){};var Ie=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function J(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let S=0;S<v.length;S++)f=v[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function I(){var c=nd;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class cn{constructor(){this.h=this.g=null}add(d,f){let g=Ms.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ms=new x(()=>new r0,c=>c.reset());class r0{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let xs,Ps=!1,nd=new cn,sv=()=>{let c=a.Promise.resolve(void 0);xs=()=>{c.then(i0)}};var i0=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){C(f)}var d=Ms;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ps=!1};function Mn(){this.s=this.s,this.C=this.C}Mn.prototype.s=!1,Mn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Mn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var s0=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Os(c,d){if(He.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{$(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:o0[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Os.aa.h.call(this)}}A(Os,He);var o0={2:"touch",3:"pen",4:"mouse"};Os.prototype.h=function(){Os.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),a0=0;function c0(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++a0,this.da=this.fa=!1}function Aa(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ra(c){this.src=c,this.g={},this.h=0}Ra.prototype.add=function(c,d,f,g,b){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var O=id(c,d,g,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new c0(d,this.src,S,!!g,b),d.fa=f,c.push(d)),d};function rd(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=b)&&Array.prototype.splice.call(g,b,1),S&&(Aa(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function id(c,d,f,g){for(var b=0;b<c.length;++b){var S=c[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return b}return-1}var sd="closure_lm_"+(1e6*Math.random()|0),od={};function ov(c,d,f,g,b){if(g&&g.once)return cv(c,d,f,g,b);if(Array.isArray(d)){for(var S=0;S<d.length;S++)ov(c,d[S],f,g,b);return null}return f=ld(f),c&&c[ks]?c.K(d,f,l(g)?!!g.capture:!!g,b):av(c,d,f,!1,g,b)}function av(c,d,f,g,b,S){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,ye=cd(c);if(ye||(c[sd]=ye=new Ra(c)),f=ye.add(d,f,g,O,S),f.proxy)return f;if(g=u0(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)s0||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(lv(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function u0(){function c(f){return d.call(c.src,c.listener,f)}let d=l0;return c}function cv(c,d,f,g,b){if(Array.isArray(d)){for(var S=0;S<d.length;S++)cv(c,d[S],f,g,b);return null}return f=ld(f),c&&c[ks]?c.L(d,f,l(g)?!!g.capture:!!g,b):av(c,d,f,!0,g,b)}function uv(c,d,f,g,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)uv(c,d[S],f,g,b);else g=l(g)?!!g.capture:!!g,f=ld(f),c&&c[ks]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=id(S,f,g,b),-1<f&&(Aa(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=cd(c))&&(d=c.g[d.toString()],c=-1,d&&(c=id(d,f,g,b)),(f=-1<c?d[c]:null)&&ad(f))}function ad(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ks])rd(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(lv(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=cd(d))?(rd(f,c),f.h==0&&(f.src=null,d[sd]=null)):Aa(c)}}}function lv(c){return c in od?od[c]:od[c]="on"+c}function l0(c,d){if(c.da)c=!0;else{d=new Os(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&ad(c),c=f.call(g,d)}return c}function cd(c){return c=c[sd],c instanceof Ra?c:null}var ud="__closure_events_fn_"+(1e9*Math.random()>>>0);function ld(c){return typeof c=="function"?c:(c[ud]||(c[ud]=function(d){return c.handleEvent(d)}),c[ud])}function ze(){Mn.call(this),this.i=new Ra(this),this.M=this,this.F=null}A(ze,Mn),ze.prototype[ks]=!0,ze.prototype.removeEventListener=function(c,d,f,g){uv(this,c,d,f,g)};function Xe(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new He(d,c);else if(d instanceof He)d.target=d.target||c;else{var b=d;d=new He(g,c),E(d,b)}if(b=!0,f)for(var S=f.length-1;0<=S;S--){var O=d.g=f[S];b=Na(O,g,!0,d)&&b}if(O=d.g=c,b=Na(O,g,!0,d)&&b,b=Na(O,g,!1,d)&&b,f)for(S=0;S<f.length;S++)O=d.g=f[S],b=Na(O,g,!1,d)&&b}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Aa(f[g]);delete c.g[d],c.h--}}this.F=null},ze.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ze.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Na(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==f){var ye=O.listener,Be=O.ha||O.src;O.fa&&rd(c.i,O),b=ye.call(Be,g)!==!1&&b}}return b&&!g.defaultPrevented}function dv(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function hv(c){c.g=dv(()=>{c.g=null,c.i&&(c.i=!1,hv(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class d0 extends Mn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:hv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fs(c){Mn.call(this),this.h=c,this.g={}}A(Fs,Mn);var fv=[];function pv(c){J(c.g,function(d,f){this.g.hasOwnProperty(f)&&ad(d)},c),c.g={}}Fs.prototype.N=function(){Fs.aa.N.call(this),pv(this)},Fs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dd=a.JSON.stringify,h0=a.JSON.parse,f0=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function hd(){}hd.prototype.h=null;function gv(c){return c.h||(c.h=c.i())}function mv(){}var Ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fd(){He.call(this,"d")}A(fd,He);function pd(){He.call(this,"c")}A(pd,He);var hr={},yv=null;function Ma(){return yv=yv||new ze}hr.La="serverreachability";function vv(c){He.call(this,hr.La,c)}A(vv,He);function Vs(c){let d=Ma();Xe(d,new vv(d))}hr.STAT_EVENT="statevent";function Iv(c,d){He.call(this,hr.STAT_EVENT,c),this.stat=d}A(Iv,He);function Ze(c){let d=Ma();Xe(d,new Iv(d,c))}hr.Ma="timingevent";function wv(c,d){He.call(this,hr.Ma,c),this.size=d}A(wv,He);function Us(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function p0(c,d,f,g,b,S){c.info(function(){if(c.g)if(S)for(var O="",ye=S.split("&"),Be=0;Be<ye.length;Be++){var he=ye[Be].split("=");if(1<he.length){var Ge=he[0];he=he[1];var We=Ge.split("_");O=2<=We.length&&We[1]=="type"?O+(Ge+"="+he+"&"):O+(Ge+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function g0(c,d,f,g,b,S,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+O})}function ii(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+y0(c,f)+(g?" "+g:"")})}function m0(c,d){c.info(function(){return"TIMEOUT: "+d})}js.prototype.info=function(){};function y0(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return dd(f)}catch{return d}}var xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_v={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gd;function Pa(){}A(Pa,hd),Pa.prototype.g=function(){return new XMLHttpRequest},Pa.prototype.i=function(){return{}},gd=new Pa;function xn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Fs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ev}function Ev(){this.i=null,this.g="",this.h=!1}var Tv={},md={};function yd(c,d,f){c.L=1,c.v=La(un(d)),c.m=f,c.P=!0,Dv(c,null)}function Dv(c,d){c.F=Date.now(),Oa(c),c.A=un(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Vv(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Ev,c.g=nI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new d0(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(fv[0]=b.toString()),b=fv);for(var S=0;S<b.length;S++){var O=ov(f,b[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Vs(),p0(c.i,c.u,c.A,c.l,c.R,c.m)}xn.prototype.ca=function(c){c=c.target;let d=this.M;d&&ln(c)==3?d.j():this.Y(c)},xn.prototype.Y=function(c){try{if(c==this.g)e:{let We=ln(this.g);var d=this.g.Ba();let ai=this.g.Z();if(!(3>We)&&(We!=3||this.g&&(this.h.h||this.g.oa()||zv(this.g)))){this.J||We!=4||d==7||(d==8||0>=ai?Vs(3):Vs(2)),vd(this);var f=this.g.Z();this.X=f;t:if(bv(this)){var g=zv(this.g);c="";var b=g.length,S=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),Bs(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,g0(this.i,this.u,this.A,this.l,this.R,We,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Be=this.g;if((ye=Be.g?Be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(ye)){var he=ye;break t}}he=null}if(f=he)ii(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Id(this,f);else{this.o=!1,this.s=3,Ze(12),fr(this),Bs(this);break e}}if(this.P){f=!0;let At;for(;!this.J&&this.C<O.length;)if(At=v0(this,O),At==md){We==4&&(this.s=4,Ze(14),f=!1),ii(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Tv){this.s=4,Ze(15),ii(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else ii(this.i,this.l,At,null),Id(this,At);if(bv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||O.length!=0||this.h.h||(this.s=1,Ze(16),f=!1),this.o=this.o&&f,!f)ii(this.i,this.l,O,"[Invalid Chunked Response]"),fr(this),Bs(this);else if(0<O.length&&!this.W){this.W=!0;var Ge=this.j;Ge.g==this&&Ge.ba&&!Ge.M&&(Ge.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),bd(Ge),Ge.M=!0,Ze(11))}}else ii(this.i,this.l,O,null),Id(this,O);We==4&&fr(this),this.o&&!this.J&&(We==4?Xv(this.j,this):(this.o=!1,Oa(this)))}else k0(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),fr(this),Bs(this)}}}catch{}finally{}};function bv(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function v0(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?md:(f=Number(d.substring(f,g)),isNaN(f)?Tv:(g+=1,g+f>d.length?md:(d=d.slice(g,g+f),c.C=g+f,d)))}xn.prototype.cancel=function(){this.J=!0,fr(this)};function Oa(c){c.S=Date.now()+c.I,Cv(c,c.I)}function Cv(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Us(m(c.ba,c),d)}function vd(c){c.B&&(a.clearTimeout(c.B),c.B=null)}xn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(m0(this.i,this.A),this.L!=2&&(Vs(),Ze(17)),fr(this),this.s=2,Bs(this)):Cv(this,this.S-c)};function Bs(c){c.j.G==0||c.J||Xv(c.j,c)}function fr(c){vd(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,pv(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Id(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||wd(f.h,c))){if(!c.K&&wd(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)$a(f),ja(f);else break e;Dd(f),Ze(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Us(m(f.Za,f),6e3));if(1>=Rv(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else gr(f,11)}else if((c.K||f.g==c)&&$a(f),!j(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let he=b[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let Ge=he[3];Ge!=null&&(f.la=Ge,f.j.info("VER="+f.la));let We=he[4];We!=null&&(f.Aa=We,f.j.info("SVER="+f.Aa));let ai=he[5];ai!=null&&typeof ai=="number"&&0<ai&&(g=1.5*ai,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let At=c.g;if(At){let Ha=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var S=g.h;S.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(_d(S,S.h),S.h=null))}if(g.D){let Cd=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;Cd&&(g.ya=Cd,_e(g.I,g.D,Cd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=tI(g,g.J?g.ia:null,g.W),O.K){Nv(g.h,O);var ye=O,Be=g.L;Be&&(ye.I=Be),ye.B&&(vd(ye),Oa(ye)),g.g=O}else Yv(g);0<f.i.length&&Ba(f)}else he[0]!="stop"&&he[0]!="close"||gr(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?gr(f,7):Td(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}Vs(4)}catch{}}var I0=class{constructor(c,d){this.g=c,this.map=d}};function Sv(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Av(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Rv(c){return c.h?1:c.g?c.g.size:0}function wd(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function _d(c,d){c.g?c.g.add(d):c.h=d}function Nv(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Sv.prototype.cancel=function(){if(this.i=Mv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Mv(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function w0(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function _0(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function xv(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=_0(c),g=w0(c),b=g.length,S=0;S<b;S++)d.call(void 0,g[S],f&&f[S],c)}var Pv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function E0(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var S=c[f].substring(0,g);b=c[f].substring(g+1)}else S=c[f];d(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function pr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof pr){this.h=c.h,ka(this,c.j),this.o=c.o,this.g=c.g,Fa(this,c.s),this.l=c.l;var d=c.i,f=new Hs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Ov(this,f),this.m=c.m}else c&&(d=String(c).match(Pv))?(this.h=!1,ka(this,d[1]||"",!0),this.o=$s(d[2]||""),this.g=$s(d[3]||"",!0),Fa(this,d[4]),this.l=$s(d[5]||"",!0),Ov(this,d[6]||"",!0),this.m=$s(d[7]||"")):(this.h=!1,this.i=new Hs(null,this.h))}pr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(qs(d,kv,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(qs(d,kv,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(qs(f,f.charAt(0)=="/"?b0:D0,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",qs(f,S0)),c.join("")};function un(c){return new pr(c)}function ka(c,d,f){c.j=f?$s(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Fa(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Ov(c,d,f){d instanceof Hs?(c.i=d,A0(c.i,c.h)):(f||(d=qs(d,C0)),c.i=new Hs(d,c.h))}function _e(c,d,f){c.i.set(d,f)}function La(c){return _e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $s(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function qs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,T0),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function T0(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var kv=/[#\/\?@]/g,D0=/[#\?:]/g,b0=/[#\?]/g,C0=/[#\?@]/g,S0=/#/g;function Hs(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Pn(c){c.g||(c.g=new Map,c.h=0,c.i&&E0(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Hs.prototype,t.add=function(c,d){Pn(this),this.i=null,c=si(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Fv(c,d){Pn(c),d=si(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Lv(c,d){return Pn(c),d=si(c,d),c.g.has(d)}t.forEach=function(c,d){Pn(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){Pn(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let S=0;S<b.length;S++)f.push(d[g])}return f},t.V=function(c){Pn(this);let d=[];if(typeof c=="string")Lv(this,c)&&(d=d.concat(this.g.get(si(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Pn(this),this.i=null,c=si(this,c),Lv(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Vv(c,d,f){Fv(c,d),0<f.length&&(c.i=null,c.g.set(si(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var b=S;O[g]!==""&&(b+="="+encodeURIComponent(String(O[g]))),c.push(b)}}return this.i=c.join("&")};function si(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function A0(c,d){d&&!c.j&&(Pn(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(Fv(this,g),Vv(this,b,f))},c)),c.j=d}function R0(c,d){let f=new js;if(a.Image){let g=new Image;g.onload=_(On,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(On,f,"TestLoadImage: error",!1,d,g),g.onabort=_(On,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(On,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function N0(c,d){let f=new js,g=new AbortController,b=setTimeout(()=>{g.abort(),On(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(b),S.ok?On(f,"TestPingServer: ok",!0,d):On(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),On(f,"TestPingServer: error",!1,d)})}function On(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function M0(){this.g=new f0}function x0(c,d,f){let g=f||"";try{xv(c,function(b,S){let O=b;l(b)&&(O=dd(b)),d.push(g+S+"="+encodeURIComponent(O))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function zs(c){this.l=c.Ub||null,this.j=c.eb||!1}A(zs,hd),zs.prototype.g=function(){return new Va(this.l,this.j)},zs.prototype.i=function(c){return function(){return c}}({});function Va(c,d){ze.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Va,ze),t=Va.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ws(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gs(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ws(this)),this.g&&(this.readyState=3,Ws(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uv(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uv(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Gs(this):Ws(this),this.readyState==3&&Uv(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Gs(this))},t.Qa=function(c){this.g&&(this.response=c,Gs(this))},t.ga=function(){this.g&&Gs(this)};function Gs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ws(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ws(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function jv(c){let d="";return J(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Ed(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=jv(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):_e(c,d,f))}function De(c){ze.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(De,ze);var P0=/^https?$/i,O0=["POST","PUT"];t=De.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gd.g(),this.v=this.o?gv(this.o):gv(gd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Bv(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(O0,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of f)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hv(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Bv(this,S)}};function Bv(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,$v(c),Ua(c)}function $v(c){c.A||(c.A=!0,Xe(c,"complete"),Xe(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Xe(this,"complete"),Xe(this,"abort"),Ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ua(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?qv(this):this.bb())},t.bb=function(){qv(this)};function qv(c){if(c.h&&typeof o<"u"&&(!c.v[1]||ln(c)!=4||c.Z()!=2)){if(c.u&&ln(c)==4)dv(c.Ea,0,c);else if(Xe(c,"readystatechange"),ln(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var b=String(c.D).match(Pv)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!P0.test(b?b.toLowerCase():"")}f=g}if(f)Xe(c,"complete"),Xe(c,"success");else{c.m=6;try{var S=2<ln(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",$v(c)}}finally{Ua(c)}}}}function Ua(c,d){if(c.g){Hv(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Xe(c,"ready");try{f.onreadystatechange=g}catch{}}}function Hv(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ln(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),h0(d)}};function zv(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function k0(c){let d={};c=(c.g&&2<=ln(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=D(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}T(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Gv(c){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ks("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ks("baseRetryDelayMs",5e3,c),this.cb=Ks("retryDelaySeedMs",1e4,c),this.Wa=Ks("forwardChannelMaxRetries",2,c),this.wa=Ks("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Sv(c&&c.concurrentRequestLimit),this.Da=new M0,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gv.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Ze(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=tI(this,null,this.W),Ba(this)};function Td(c){if(Wv(c),c.G==3){var d=c.U++,f=un(c.I);if(_e(f,"SID",c.K),_e(f,"RID",d),_e(f,"TYPE","terminate"),Qs(c,f),d=new xn(c,c.j,d),d.L=2,d.v=La(un(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=nI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Oa(d)}eI(c)}function ja(c){c.g&&(bd(c),c.g.cancel(),c.g=null)}function Wv(c){ja(c),c.u&&(a.clearTimeout(c.u),c.u=null),$a(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ba(c){if(!Av(c.h)&&!c.s){c.s=!0;var d=c.Ga;xs||sv(),Ps||(xs(),Ps=!0),nd.add(d,c),c.B=0}}function F0(c,d){return Rv(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Us(m(c.Ga,c,d),Zv(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new xn(this,this.j,c),S=this.o;if(this.S&&(S?(S=y(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Qv(this,b,d),f=un(this.I),_e(f,"RID",c),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Qs(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(jv(S)))+"&"+d:this.m&&Ed(f,this.m,S)),_d(this.h,b),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",d),_e(f,"SID","null"),b.T=!0,yd(b,f,null)):yd(b,f,d),this.G=2}}else this.G==3&&(c?Kv(this,c):this.i.length==0||Av(this.h)||Kv(this))};function Kv(c,d){var f;d?f=d.l:f=c.U++;let g=un(c.I);_e(g,"SID",c.K),_e(g,"RID",f),_e(g,"AID",c.T),Qs(c,g),c.m&&c.o&&Ed(g,c.m,c.o),f=new xn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Qv(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),_d(c.h,f),yd(f,g,d)}function Qs(c,d){c.H&&J(c.H,function(f,g){_e(d,g,f)}),c.l&&xv({},function(f,g){_e(d,g,f)})}function Qv(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let S=-1;for(;;){let O=["count="+f];S==-1?0<f?(S=b[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let ye=!0;for(let Be=0;Be<f;Be++){let he=b[Be].g,Ge=b[Be].map;if(he-=S,0>he)S=Math.max(0,b[Be].g-100),ye=!1;else try{x0(Ge,O,"req"+he+"_")}catch{g&&g(Ge)}}if(ye){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Yv(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;xs||sv(),Ps||(xs(),Ps=!0),nd.add(d,c),c.v=0}}function Dd(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Us(m(c.Fa,c),Zv(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Jv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Us(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),ja(this),Jv(this))};function bd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Jv(c){c.g=new xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=un(c.qa);_e(d,"RID","rpc"),_e(d,"SID",c.K),_e(d,"AID",c.T),_e(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&_e(d,"TO",c.ja),_e(d,"TYPE","xmlhttp"),Qs(c,d),c.m&&c.o&&Ed(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=La(un(d)),f.m=null,f.P=!0,Dv(f,c)}t.Za=function(){this.C!=null&&(this.C=null,ja(this),Dd(this),Ze(19))};function $a(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Xv(c,d){var f=null;if(c.g==d){$a(c),bd(c),c.g=null;var g=2}else if(wd(c.h,d))f=d.D,Nv(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=Ma(),Xe(g,new wv(g,f)),Ba(c)}else Yv(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&F0(c,d)||g==2&&Dd(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:gr(c,5);break;case 4:gr(c,10);break;case 3:gr(c,6);break;default:gr(c,2)}}}function Zv(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function gr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new pr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ka(g,"https"),La(g),b?R0(g.toString(),f):N0(g.toString(),f)}else Ze(2);c.G=0,c.l&&c.l.sa(d),eI(c),Wv(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function eI(c){if(c.G=0,c.ka=[],c.l){let d=Mv(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function tI(c,d,f){var g=f instanceof pr?un(f):new pr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Fa(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var S=new pr(null);g&&ka(S,g),d&&(S.g=d),b&&Fa(S,b),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&_e(g,f,d),_e(g,"VER",c.la),Qs(c,g),g}function nI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new De(new zs({eb:f})):new De(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rI(){}t=rI.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qa(){}qa.prototype.g=function(c,d){return new lt(c,d)};function lt(c,d){ze.call(this),this.g=new Gv(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new oi(this)}A(lt,ze),lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lt.prototype.close=function(){Td(this.g)},lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=dd(c),c=f);d.i.push(new I0(d.Ya++,c)),d.G==3&&Ba(d)},lt.prototype.N=function(){this.g.l=null,delete this.j,Td(this.g),delete this.g,lt.aa.N.call(this)};function iI(c){fd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(iI,fd);function sI(){pd.call(this),this.status=1}A(sI,pd);function oi(c){this.g=c}A(oi,rI),oi.prototype.ua=function(){Xe(this.g,"a")},oi.prototype.ta=function(c){Xe(this.g,new iI(c))},oi.prototype.sa=function(c){Xe(this.g,new sI)},oi.prototype.ra=function(){Xe(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,lt.prototype.send=lt.prototype.o,lt.prototype.open=lt.prototype.m,lt.prototype.close=lt.prototype.close,fg=In.createWebChannelTransport=function(){return new qa},hg=In.getStatEventTarget=function(){return Ma()},dg=In.Event=hr,Gu=In.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xa.NO_ERROR=0,xa.TIMEOUT=8,xa.HTTP_ERROR=6,Yo=In.ErrorCode=xa,_v.COMPLETE="complete",lg=In.EventType=_v,mv.EventType=Ls,Ls.OPEN="a",Ls.CLOSE="b",Ls.ERROR="c",Ls.MESSAGE="d",ze.prototype.listen=ze.prototype.K,ts=In.WebChannel=mv,ug=In.FetchXmlHttpFactory=zs,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,cg=In.XhrIo=De}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});var yD="@firebase/firestore";var je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};je.UNAUTHENTICATED=new je(null),je.GOOGLE_CREDENTIALS=new je("google-credentials-uid"),je.FIRST_PARTY=new je("first-party-uid"),je.MOCK_USER=new je("mock-user");var Es="10.12.3";var qr=new er("@firebase/firestore");function Jo(){return qr.logLevel}function F(t,...e){if(qr.logLevel<=ae.DEBUG){let n=e.map(Xm);qr.debug(`Firestore (${Es}): ${t}`,...n)}}function wn(t,...e){if(qr.logLevel<=ae.ERROR){let n=e.map(Xm);qr.error(`Firestore (${Es}): ${t}`,...n)}}function as(t,...e){if(qr.logLevel<=ae.WARN){let n=e.map(Xm);qr.warn(`Firestore (${Es}): ${t}`,...n)}}function Xm(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Q(t="Unexpected state"){let e=`FIRESTORE (${Es}) INTERNAL ASSERTION FAILED: `+t;throw wn(e),new Error(e)}function we(t,e){t||Q()}function Z(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends vt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ju=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(je.UNAUTHENTICATED))}shutdown(){}},Ig=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},wg=class{constructor(e){this.t=e,this.currentUser=je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Zt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new Ju(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new je(e)}},_g=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Eg=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _g(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Tg=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Dg=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new Tg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function m1(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Xu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=m1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(t,e){return t<e?-1:t>e?1:0}function cs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var te=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new qe(0,0))}static max(){return new t(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Zu=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Se=class t extends Zu{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},y1=/^[_a-zA-Z][_a-zA-Z0-9]*$/,It=class t extends Zu{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return y1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Se.fromString(e))}static fromName(e){return new t(Se.fromString(e).popFirst(5))}static empty(){return new t(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Se(e.slice()))}};var bg=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};bg.UNKNOWN_ID=-1;function v1(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=te.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new Hr(i,H.empty(),e)}function I1(t){return new Hr(t.readTime,t.key,-1)}var Hr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(te.min(),H.empty(),-1)}static max(){return new t(te.max(),H.empty(),-1)}};function w1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}var _1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fa(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==_1)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function E1(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}var zD=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Cl(t){return t==null}function ra(t){return t===0&&1/t==-1/0}function T1(t){return typeof t=="number"&&Number.isInteger(t)&&!ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var D1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],c9=[...D1,"documentOverlays"],b1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C1=b1,u9=[...C1,"indexConfiguration","indexState","indexEntries"];function vD(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ts(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GD(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ae=class t{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ss(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ss(this.root,e,this.comparator,!1)}getReverseIterator(){return new ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ss(this.root,e,this.comparator,!0)}},ss=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},en=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,i,s){return this}insert(e,n,r){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class t{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new el(this.data.getIterator())}getIteratorFrom(e){return new el(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},el=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xt=class t{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new t([])}unionWith(e){let n=new Je(It.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var tl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var st=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var S1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _n(t){if(we(!!t),typeof t=="string"){let e=0,n=S1.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ar(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}function Zm(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ey(t){let e=t.mapValue.fields.__previous_value__;return Zm(e)?ey(e):e}function ia(t){let e=_n(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var Sg=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},nl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zm(t)?4:WD(t)?9007199254740991:10:Q()}function rn(t,e){if(t===e)return!0;let n=zr(t);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=_n(i.timestampValue),a=_n(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ar(i.bytesValue).isEqual(ar(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ce(i.geoPointValue.latitude)===Ce(s.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ce(i.integerValue)===Ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ce(i.doubleValue),a=Ce(s.doubleValue);return o===a?ra(o)===ra(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cs(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vD(o)!==vD(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!rn(o[u],a[u])))return!1;return!0}(t,e);default:return Q()}}function sa(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function us(t,e){if(t===e)return 0;let n=zr(t),r=zr(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ce(s.integerValue||s.doubleValue),u=Ce(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return ID(t.timestampValue,e.timestampValue);case 4:return ID(ia(t),ia(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){let a=ar(s),u=ar(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=pe(a[l],u[l]);if(h!==0)return h}return pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(Ce(s.latitude),Ce(o.latitude));return a!==0?a:pe(Ce(s.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){let h=us(a[l],u[l]);if(h)return h}return pe(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Wu.mapValue&&o===Wu.mapValue)return 0;if(s===Wu.mapValue)return 1;if(o===Wu.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=pe(u[p],h[p]);if(m!==0)return m;let _=us(a[u[p]],l[h[p]]);if(_!==0)return _}return pe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Q()}}function ID(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);let n=_n(t),r=_n(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function ls(t){return Ag(t)}function Ag(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=_n(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ar(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Ag(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Ag(n.fields[o])}`;return i+"}"}(t.mapValue):Q()}function Rg(t){return!!t&&"integerValue"in t}function ty(t){return!!t&&"arrayValue"in t}function wD(t){return!!t&&"nullValue"in t}function _D(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qu(t){return!!t&&"mapValue"in t}function Zo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Vt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(n)}setAll(e){let n=It.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Zo(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Qu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ts(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Zo(this.value))}};function KD(t){let e=[];return Ts(t.fields,(n,r)=>{let i=new It([n]);if(Qu(r)){let s=KD(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Xt(e)}var Ut=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,te.min(),te.min(),te.min(),Vt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,te.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,te.min(),te.min(),Vt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,te.min(),te.min(),Vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ds=class{constructor(e,n){this.position=e,this.inclusive=n}};function ED(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=us(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function TD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}var hs=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function A1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var rl=class{},Ue=class t extends rl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Mg(e,n,r):n==="array-contains"?new Og(e,r):n==="in"?new kg(e,r):n==="not-in"?new Fg(e,r):n==="array-contains-any"?new Lg(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xg(e,r):new Pg(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(us(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sn=class t extends rl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return QD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function QD(t){return t.op==="and"}function YD(t){return R1(t)&&QD(t)}function R1(t){for(let e of t.filters)if(e instanceof sn)return!1;return!0}function Ng(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+ls(t.value);if(YD(t))return t.filters.map(e=>Ng(e)).join(",");{let e=t.filters.map(n=>Ng(n)).join(",");return`${t.op}(${e})`}}function JD(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&rn(r.value,i.value)}(t,e):t instanceof sn?function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JD(o,i.filters[a]),!0):!1}(t,e):void Q()}function XD(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${ls(n.value)}`}(t):t instanceof sn?function(n){return n.op.toString()+" {"+n.getFilters().map(XD).join(" ,")+"}"}(t):"Filter"}var Mg=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},xg=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=ZD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Pg=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=ZD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ZD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var Og=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return ty(n)&&sa(n.arrayValue,this.value)}},kg=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}},Fg=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!sa(this.value.arrayValue,n)}},Lg=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sa(this.value.arrayValue,r))}};var Vg=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function DD(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vg(t,e,n,r,i,s,o)}function ny(t){let e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ng(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ls(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ls(r)).join(",")),e.ue=n}return e.ue}function ry(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TD(t.startAt,e.startAt)&&TD(t.endAt,e.endAt)}function Ug(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var fs=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function N1(t,e,n,r,i,s,o,a){return new fs(t,e,n,r,i,s,o,a)}function iy(t){return new fs(t)}function bD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M1(t){return t.collectionGroup!==null}function ea(t){let e=Z(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Je(It.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hs(s,r))}),n.has(It.keyField().canonicalString())||e.ce.push(new hs(It.keyField(),r))}return e.ce}function tn(t){let e=Z(t);return e.le||(e.le=x1(e,ea(t))),e.le}function x1(t,e){if(t.limitType==="F")return DD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new hs(i.field,s)});let n=t.endAt?new ds(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ds(t.startAt.position,t.startAt.inclusive):null;return DD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jg(t,e,n){return new fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sl(t,e){return ry(tn(t),tn(e))&&t.limitType===e.limitType}function eb(t){return`${ny(tn(t))}|lt:${t.limitType}`}function ns(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XD(i)).join(", ")}]`),Cl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ls(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ls(i)).join(",")),`Target(${r})`}(tn(t))}; limitType=${t.limitType})`}function Al(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ea(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=ED(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,ea(r),i)||r.endAt&&!function(o,a,u){let l=ED(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,ea(r),i))}(t,e)}function P1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tb(t){return(e,n)=>{let r=!1;for(let i of ea(t)){let s=O1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function O1(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?us(u,l):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}var cr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return GD(this.inner)}size(){return this.innerSize}};var k1=new Ae(H.comparator);function En(){return k1}var nb=new Ae(H.comparator);function Xo(...t){let e=nb;for(let n of t)e=e.insert(n.key,n);return e}function rb(t){let e=nb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Br(){return ta()}function ib(){return ta()}function ta(){return new cr(t=>t.toString(),(t,e)=>t.isEqual(e))}var F1=new Ae(H.comparator),L1=new Je(H.comparator);function ce(...t){let e=L1;for(let n of t)e=e.add(n);return e}var V1=new Je(pe);function U1(){return V1}function sb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function ob(t){return{integerValue:""+t}}function j1(t,e){return T1(e)?ob(e):sb(t,e)}var ps=class{constructor(){this._=void 0}};function B1(t,e,n){return t instanceof gs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zm(s)&&(s=ey(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Gr?cb(t,e):t instanceof Wr?ub(t,e):function(i,s){let o=ab(i,s),a=CD(o)+CD(i.Pe);return Rg(o)&&Rg(i.Pe)?ob(a):sb(i.serializer,a)}(t,e)}function $1(t,e,n){return t instanceof Gr?cb(t,e):t instanceof Wr?ub(t,e):n}function ab(t,e){return t instanceof ms?function(r){return Rg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var gs=class extends ps{},Gr=class extends ps{constructor(e){super(),this.elements=e}};function cb(t,e){let n=lb(e);for(let r of t.elements)n.some(i=>rn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Wr=class extends ps{constructor(e){super(),this.elements=e}};function ub(t,e){let n=lb(e);for(let r of t.elements)n=n.filter(i=>!rn(i,r));return{arrayValue:{values:n}}}var ms=class extends ps{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function CD(t){return Ce(t.integerValue||t.doubleValue)}function lb(t){return ty(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function q1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gr&&i instanceof Gr||r instanceof Wr&&i instanceof Wr?cs(r.elements,i.elements,rn):r instanceof ms&&i instanceof ms?rn(r.Pe,i.Pe):r instanceof gs&&i instanceof gs}(t.transform,e.transform)}var Bg=class{constructor(e,n){this.version=e,this.transformResults=n}},sr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ys=class{};function db(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new il(t.key,sr.none()):new Kr(t.key,t.data,sr.none());{let n=t.data,r=Vt.empty(),i=new Je(It.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Tn(t.key,r,new Xt(i.toArray()),sr.none())}}function H1(t,e,n){t instanceof Kr?function(i,s,o){let a=i.value.clone(),u=AD(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Tn?function(i,s,o){if(!Yu(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=AD(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(hb(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function na(t,e,n,r){return t instanceof Kr?function(s,o,a,u){if(!Yu(s.precondition,o))return a;let l=s.value.clone(),h=RD(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tn?function(s,o,a,u){if(!Yu(s.precondition,o))return a;let l=RD(s.fieldTransforms,u,o),h=o.data;return h.setAll(hb(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Yu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function z1(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=ab(r.transform,i||null);s!=null&&(n===null&&(n=Vt.empty()),n.set(r.field,s))}return n||null}function SD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&cs(r,i,(s,o)=>q1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Kr=class extends ys{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tn=class extends ys{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function hb(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function AD(t,e,n){let r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$1(o,a,n[i]))}return r}function RD(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,B1(s,o,e))}return r}var il=class extends ys{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},$g=class extends ys{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qg=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&H1(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=na(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=na(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ib();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=db(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&cs(this.mutations,e.mutations,(n,r)=>SD(n,r))&&cs(this.baseMutations,e.baseMutations,(n,r)=>SD(n,r))}},Hg=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return F1}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var zg=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Gg=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var xe,de;function G1(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function fb(t){if(t===void 0)return wn("GRPC error has no .code"),M.UNKNOWN;switch(t){case xe.OK:return M.OK;case xe.CANCELLED:return M.CANCELLED;case xe.UNKNOWN:return M.UNKNOWN;case xe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case xe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case xe.INTERNAL:return M.INTERNAL;case xe.UNAVAILABLE:return M.UNAVAILABLE;case xe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case xe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case xe.NOT_FOUND:return M.NOT_FOUND;case xe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case xe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case xe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case xe.ABORTED:return M.ABORTED;case xe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case xe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case xe.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(de=xe||(xe={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var ND=null;function W1(){return new TextEncoder}var K1=new ir([4294967295,4294967295],0);function MD(t){let e=W1().encode(t),n=new ag;return n.update(e),new Uint8Array(n.digest())}function xD(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ir([n,r],0),new ir([i,s],0)]}var Wg=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $r(`Invalid padding: ${n}`);if(r<0)throw new $r(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $r(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $r(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ir.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ir.fromNumber(r)));return i.compare(K1)===1&&(i=new ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=MD(e),[r,i]=xD(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=MD(e),[r,i]=xD(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},$r=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sl=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(te.min(),i,new Ae(pe),En(),ce())}},oa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ce(),ce(),ce())}};var os=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ol=class{constructor(e,n){this.targetId=e,this.me=n}},al=class{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},cl=class{constructor(){this.fe=0,this.ge=OD(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ce(),n=ce(),r=ce();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q()}}),new oa(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=OD()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,we(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Kg=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=En(),this.qe=PD(),this.Qe=new Ae(pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Ug(s))if(r===0){let o=new H(s.path);this.Ue(n,o,Ut.newNoDocument(o,te.min()))}else we(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}ND?.et(function(h,p,m,_,A){var N,R,x,j,B,$;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},J=p.unchangedNames;return J&&(Ie.bloomFilter={applied:A===0,hashCount:(N=J?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(j=(x=(R=J?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&j!==void 0?j:0,padding:($=(B=J?.bits)===null||B===void 0?void 0:B.padding)!==null&&$!==void 0?$:0,mightContain:T=>{var y;return(y=_?.mightContain(T))!==null&&y!==void 0&&y}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=ar(r).toUint8Array()}catch(u){if(u instanceof tl)return as("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Wg(o,i,s)}catch(u){return as(u instanceof $r?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Ug(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ut.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=ce();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new sl(e,n,this.Qe,this.ke,r);return this.ke=En(),this.qe=PD(),this.Qe=new Ae(pe),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cl,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Je(pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function PD(){return new Ae(H.comparator)}function OD(){return new Ae(H.comparator)}var Q1={asc:"ASCENDING",desc:"DESCENDING"},Y1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J1={and:"AND",or:"OR"},Qg=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Yg(t,e){return t.useProto3Json||Cl(e)?e:{value:e}}function ul(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function X1(t,e){return ul(t,e.toTimestamp())}function nn(t){return we(!!t),te.fromTimestamp(function(n){let r=_n(n);return new qe(r.seconds,r.nanos)}(t))}function sy(t,e){return Jg(t,e).canonicalString()}function Jg(t,e){let n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gb(t){let e=Se.fromString(t);return we(wb(e)),e}function Xg(t,e){return sy(t.databaseId,e.path)}function pg(t,e){let n=gb(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(yb(n))}function mb(t,e){return sy(t.databaseId,e)}function Z1(t){let e=gb(t);return e.length===4?Se.emptyPath():yb(e)}function Zg(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yb(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function kD(t,e,n){return{name:Xg(t,e),fields:n.value.mapValue.fields}}function eF(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(we(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:fb(l.code);return new V(h,l.message||"")}(o);n=new al(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pg(t,r.document.name),s=nn(r.document.updateTime),o=r.document.createTime?nn(r.document.createTime):te.min(),a=new Vt({mapValue:{fields:r.document.fields}}),u=Ut.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new os(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pg(t,r.document),s=r.readTime?nn(r.readTime):te.min(),o=Ut.newNoDocument(i,s),a=r.removedTargetIds||[];n=new os([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pg(t,r.document),s=r.removedTargetIds||[];n=new os([],s,i,null)}else{if(!("filter"in e))return Q();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Gg(i,s),a=r.targetId;n=new ol(a,o)}}return n}function tF(t,e){let n;if(e instanceof Kr)n={update:kD(t,e.key,e.value)};else if(e instanceof il)n={delete:Xg(t,e.key)};else if(e instanceof Tn)n={update:kD(t,e.key,e.data),updateMask:lF(e.fieldMask)};else{if(!(e instanceof $g))return Q();n={verify:Xg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof gs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ms)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:X1(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(t,e.precondition)),n}function nF(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?nn(i.updateTime):nn(s);return o.isEqual(te.min())&&(o=nn(s)),new Bg(o,i.transformResults||[])}(n,e))):[]}function rF(t,e){return{documents:[mb(t,e.path)]}}function iF(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mb(t,i);let s=function(l){if(l.length!==0)return Ib(sn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:rs(m.field),direction:aF(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Yg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function sF(t){let e=Z1(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){we(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=vb(p);return m instanceof sn&&YD(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(A){return new hs(is(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Cl(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,_=p.values||[];return new ds(_,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,_=p.values||[];return new ds(_,m)}(n.endAt)),N1(e,i,o,s,a,"F",u,l)}function oF(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=is(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=is(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=is(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=is(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(is(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sn.create(n.compositeFilter.filters.map(r=>vb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function aF(t){return Q1[t]}function cF(t){return Y1[t]}function uF(t){return J1[t]}function rs(t){return{fieldPath:t.canonicalString()}}function is(t){return It.fromServerFormat(t.fieldPath)}function Ib(t){return t instanceof Ue?function(n){if(n.op==="=="){if(_D(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NAN"}};if(wD(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_D(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NAN"}};if(wD(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(n.field),op:cF(n.op),value:n.value}}}(t):t instanceof sn?function(n){let r=n.getFilters().map(i=>Ib(i));return r.length===1?r[0]:{compositeFilter:{op:uF(n.op),filters:r}}}(t):Q()}function lF(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var aa=class t{constructor(e,n,r,i,s=te.min(),o=te.min(),a=st.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var em=class{constructor(e){this.ct=e}};function dF(t){let e=sF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jg(e,e.limit,"L"):e}var ll=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ra(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=_n(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ar(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?WD(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Q()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),H.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};ll.bt=new ll;var tm=class{constructor(){this._n=new nm}addToCollectionParentIndex(e,n){return this._n.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Hr.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},nm=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Se.comparator)).toArray()}};var d9=new Uint8Array(0);var Jt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var ca=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var rm=class{constructor(){this.changes=new cr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var im=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var sm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&na(r.mutation,i,Xt.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){let i=Br();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xo();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Br();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=En(),o=ta(),a=function(){return ta()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Tn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),na(h.mutation,l,h.mutation.getFieldMask(),qe.now())):o.set(l.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new im(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ta(),i=new Ae((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Xt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ce()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=ib();h.forEach(m=>{if(!s.has(m)){let _=db(n.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(Br()),a=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ce())).next(h=>({batchId:a,changes:rb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Xo();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{let l=function(p,m){return new fs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))});let a=Xo();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&na(h.mutation,l,Xt.empty(),qe.now()),Al(n,l)&&(a=a.insert(u,l))}),a})}};var om=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return P.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:dF(i.bundledQuery),readTime:nn(i.readTime)}}(n)),P.resolve()}};var am=class{constructor(){this.overlays=new Ae(H.comparator),this.hr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Br();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Br(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Br(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Br(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zg(n,r));let s=this.hr.get(n);s===void 0&&(s=ce(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ua=class{constructor(){this.Pr=new Je(Pe.Ir),this.Tr=new Je(Pe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Pe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Pe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new H(new Se([])),r=new Pe(n,e),i=new Pe(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new H(new Se([])),r=new Pe(n,e),i=new Pe(n,e+1),s=ce();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Pe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Pe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return H.comparator(e.key,n.key)||pe(e.pr,n.pr)}static Er(e,n){return pe(e.pr,n.pr)||H.comparator(e.key,n.key)}};var cm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Je(Pe.Ir)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new qg(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new Pe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Pe(n,0),i=new Pe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(pe);return n.forEach(i=>{let s=new Pe(i,0),o=new Pe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),P.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new Pe(new H(s),0),a=new Je(pe);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),P.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return P.forEach(n.mutations,i=>{let s=new Pe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Pe(n,0),i=this.wr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var um=class{constructor(e){this.vr=e,this.docs=function(){return new Ae(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=En();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ut.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=En(),o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||w1(I1(h),r)<=0||(i.has(h.key)||Al(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q()}Fr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lm(this)}getSize(e){return P.resolve(this.size)}},lm=class extends rm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var dm=class{constructor(e){this.persistence=e,this.Mr=new cr(n=>ny(n),ry),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ua,this.targetCount=0,this.Lr=ca.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),P.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.qn(n),P.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Nr.containsKey(n))}};var hm=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new zD(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new dm(this),this.indexManager=new tm,this.remoteDocumentCache=function(i){return new um(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new em(n),this.$r=new om(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new am,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new cm(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new fm(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},fm=class extends Cg{constructor(e){super(),this.currentSequenceNumber=e}},pm=class t{constructor(e){this.persistence=e,this.zr=new ua,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw Q()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),P.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,r=>{let i=H.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,te.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return P.or([()=>P.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var gm=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ce(),i=ce();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var mm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ym=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return JT()?8:E1(Le())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new mm;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Jo()<=ae.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ns(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(Jo()<=ae.DEBUG&&F("QueryEngine","Query:",ns(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Jo()<=ae.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ns(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):P.resolve())}ji(e,n){if(bD(n))return P.resolve(null);let r=tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jg(n,null,"F"),r=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ce(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(e,jg(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return bD(n)||i.isEqual(te.min())?P.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?P.resolve(null):(Jo()<=ae.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ns(n)),this.es(e,o,n,v1(i,-1)).next(a=>a))})}Zi(e,n){let r=new Je(tb(e));return n.forEach((i,s)=>{Al(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Jo()<=ae.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ns(n)),this.zi.getDocumentsMatchingQuery(e,n,Hr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var vm=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ae(pe),this.rs=new cr(s=>ny(s),ry),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function hF(t,e,n,r){return new vm(t,e,n,r)}function _b(t,e){return w(this,null,function*(){let n=Z(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ce();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function fF(t,e){let n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),_=P.resolve();return m.forEach(A=>{_=_.next(()=>h.getEntry(u,A)).next(N=>{let R=l.docVersions.get(A);we(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Eb(t){let e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function pF(t,e){let n=Z(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(st.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,_,h)&&a.push(n.Qr.updateTargetData(s,_))});let u=En(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(gF(s,o,e.documentUpdates).next(h=>{u=h.cs,l=h.ls})),!r.isEqual(te.min())){let h=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function gF(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=En();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function mF(t,e){let n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yF(t,e){let n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new aa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Im(t,e,n){return w(this,null,function*(){let r=Z(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!pa(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function FD(t,e,n){let r=Z(t),i=te.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Z(u),m=p.rs.get(h);return m!==void 0?P.resolve(p.ns.get(m)):p.Qr.getTargetData(l,h)}(r,o,tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:te.min(),n?s:ce())).next(a=>(vF(r,P1(e),a),{documents:a,hs:s})))}function vF(t,e,n){let r=t.ss.get(e)||te.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var dl=class{constructor(){this.activeTargetIds=U1()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wm=class{constructor(){this.no=new dl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new dl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _m=class{io(e){}shutdown(){}};var hl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ku=null;function gg(){return Ku===null?Ku=function(){return 268435456+Math.round(2147483648*Math.random())}():Ku++,"0x"+Ku.toString(16)}var IF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Em=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Ye="WebChannelConnection",Tm=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=gg(),u=this.vo(n,r.toUriEncodedString());F("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(h=>(F("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw as("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Es}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=IF[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=gg();return new Promise((o,a)=>{let u=new cg;u.setWithCredentials(!0),u.listenOnce(lg.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yo.NO_ERROR:let h=u.getResponseJson();F(Ye,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Yo.TIMEOUT:F(Ye,`RPC '${e}' ${s} timed out`),a(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case Yo.HTTP_ERROR:let p=u.getStatus();if(F(Ye,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let A=function(R){let x=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(x)>=0?x:M.UNKNOWN}(_.status);a(new V(A,_.message))}else a(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new V(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{F(Ye,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(Ye,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=gg(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fg(),a=hg(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new ug({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");F(Ye,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,_=!1,A=new Em({lo:R=>{_?F(Ye,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(Ye,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(Ye,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},ho:()=>p.close()}),N=(R,x,j)=>{R.listen(x,B=>{try{j(B)}catch($){setTimeout(()=>{throw $},0)}})};return N(p,ts.EventType.OPEN,()=>{_||(F(Ye,`RPC '${e}' stream ${i} transport opened.`),A.mo())}),N(p,ts.EventType.CLOSE,()=>{_||(_=!0,F(Ye,`RPC '${e}' stream ${i} transport closed`),A.po())}),N(p,ts.EventType.ERROR,R=>{_||(_=!0,as(Ye,`RPC '${e}' stream ${i} transport errored:`,R),A.po(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,ts.EventType.MESSAGE,R=>{var x;if(!_){let j=R.data[0];we(!!j);let B=j,$=B.error||((x=B[0])===null||x===void 0?void 0:x.error);if($){F(Ye,`RPC '${e}' stream ${i} received error:`,$);let Ie=$.status,J=function(v){let E=xe[v];if(E!==void 0)return fb(E)}(Ie),T=$.message;J===void 0&&(J=M.INTERNAL,T="Unknown error status: "+Ie+" with message "+$.message),_=!0,A.po(new V(J,T)),p.close()}else F(Ye,`RPC '${e}' stream ${i} received:`,j),A.yo(j)}}),N(a,dg.STAT_EVENT,R=>{R.stat===Gu.PROXY?F(Ye,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Gu.NOPROXY&&F(Ye,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.fo()},0),A}};function mg(){return typeof document<"u"?document:null}function Rl(t){return new Qg(t,!0)}var fl=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var pl=class{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new fl(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return w(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return w(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return w(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(wn(n.toString()),wn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>w(this,null,function*(){this.state=0,this.start()}))}c_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Dm=class extends pl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=eF(this.serializer,e),r=function(s){if(!("targetChange"in s))return te.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?nn(o.readTime):te.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Zg(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Ug(u)?{documents:rF(s,u)}:{query:iF(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pb(s,o.resumeToken);let l=Yg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=ul(s,o.snapshotVersion.toTimestamp());let l=Yg(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=oF(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Zg(this.serializer),n.removeTarget=e,this.i_(n)}},bm=class extends pl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=nF(e.writeResults,e.commitTime),r=nn(e.commitTime);return this.listener.A_(r,n)}return we(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Zg(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>tF(this.serializer,r))};this.i_(n)}};var Cm=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Jg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Jg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Sm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(wn(n),this.y_=!1):F("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Am=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>w(this,null,function*(){Qr(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Z(u);l.M_.add(4),yield ga(l),l.N_.set("Unknown"),l.M_.delete(4),yield Nl(l)})}(this))}))}),this.N_=new Sm(r,i)}};function Nl(t){return w(this,null,function*(){if(Qr(t))for(let e of t.x_)yield e(!0)})}function ga(t){return w(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Tb(t,e){let n=Z(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),uy(n)?cy(n):Ds(n).Xo()&&ay(n,e))}function oy(t,e){let n=Z(t),r=Ds(n);n.F_.delete(e),r.Xo()&&Db(n,e),n.F_.size===0&&(r.Xo()?r.n_():Qr(n)&&n.N_.set("Unknown"))}function ay(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ds(t).P_(e)}function Db(t,e){t.L_.xe(e),Ds(t).I_(e)}function cy(t){t.L_=new Kg({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ds(t).start(),t.N_.w_()}function uy(t){return Qr(t)&&!Ds(t).Zo()&&t.F_.size>0}function Qr(t){return Z(t).M_.size===0}function bb(t){t.L_=void 0}function wF(t){return w(this,null,function*(){t.N_.set("Online")})}function _F(t){return w(this,null,function*(){t.F_.forEach((e,n)=>{ay(t,e)})})}function EF(t,e){return w(this,null,function*(){bb(t),uy(t)?(t.N_.D_(e),cy(t)):t.N_.set("Unknown")})}function TF(t,e,n){return w(this,null,function*(){if(t.N_.set("Online"),e instanceof al&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gl(t,r)}else if(e instanceof os?t.L_.Ke(e):e instanceof ol?t.L_.He(e):t.L_.We(e),!n.isEqual(te.min()))try{let r=yield Eb(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.F_.get(l);h&&s.F_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),Db(s,u);let p=new aa(h.target,u,l,h.sequenceNumber);ay(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield gl(t,r)}})}function gl(t,e,n){return w(this,null,function*(){if(!pa(e))throw e;t.M_.add(1),yield ga(t),t.N_.set("Offline"),n||(n=()=>Eb(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Nl(t)}))})}function Cb(t,e){return e().catch(n=>gl(t,n,e))}function Ml(t){return w(this,null,function*(){let e=Z(t),n=ur(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;DF(e);)try{let i=yield mF(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,bF(e,i)}catch(i){yield gl(e,i)}Sb(e)&&Ab(e)})}function DF(t){return Qr(t)&&t.v_.length<10}function bF(t,e){t.v_.push(e);let n=ur(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Sb(t){return Qr(t)&&!ur(t).Zo()&&t.v_.length>0}function Ab(t){ur(t).start()}function CF(t){return w(this,null,function*(){ur(t).V_()})}function SF(t){return w(this,null,function*(){let e=ur(t);for(let n of t.v_)e.d_(n.mutations)})}function AF(t,e,n){return w(this,null,function*(){let r=t.v_.shift(),i=Hg.from(r,e,n);yield Cb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ml(t)})}function RF(t,e){return w(this,null,function*(){e&&ur(t).E_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return G1(o)&&o!==M.ABORTED}(i.code)){let s=r.v_.shift();ur(r).t_(),yield Cb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ml(r)}})}(t,e)),Sb(t)&&Ab(t)})}function LD(t,e){return w(this,null,function*(){let n=Z(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=Qr(n);n.M_.add(3),yield ga(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Nl(n)})}function NF(t,e){return w(this,null,function*(){let n=Z(t);e?(n.M_.delete(2),yield Nl(n)):e||(n.M_.add(2),yield ga(n),n.N_.set("Unknown"))})}function Ds(t){return t.B_||(t.B_=function(n,r,i){let s=Z(n);return s.f_(),new Dm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:wF.bind(null,t),To:_F.bind(null,t),Ao:EF.bind(null,t),h_:TF.bind(null,t)}),t.x_.push(e=>w(this,null,function*(){e?(t.B_.t_(),uy(t)?cy(t):t.N_.set("Unknown")):(yield t.B_.stop(),bb(t))}))),t.B_}function ur(t){return t.k_||(t.k_=function(n,r,i){let s=Z(n);return s.f_(),new bm(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:CF.bind(null,t),Ao:RF.bind(null,t),R_:SF.bind(null,t),A_:AF.bind(null,t)}),t.x_.push(e=>w(this,null,function*(){e?(t.k_.t_(),yield Ml(t)):(yield t.k_.stop(),t.v_.length>0&&(F("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var Rm=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ly(t,e){if(wn("AsyncQueue",`${e}: ${t}`),pa(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var ml=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var yl=class{constructor(){this.q_=new Ae(H.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):Q():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},vs=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ml.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Nm=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Mm=class{constructor(){this.queries=new cr(e=>eb(e),Sl),this.onlineState="Unknown",this.z_=new Set}};function MF(t,e){return w(this,null,function*(){let n=Z(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Nm,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=ly(o,`Initialization of query '${ns(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&dy(n)})}function xF(t,e){return w(this,null,function*(){let n=Z(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function PF(t,e){let n=Z(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&dy(n)}function OF(t,e,n){let r=Z(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function dy(t){t.z_.forEach(e=>{e.next()})}var xm,VD;(VD=xm||(xm={})).J_="default",VD.Cache="cache";var Pm=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=vs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==xm.Cache}};var vl=class{constructor(e){this.key=e}},Il=class{constructor(e){this.key=e}},Om=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ce(),this.mutatedKeys=ce(),this.Ia=tb(e),this.Ta=new ml(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new yl,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),_=Al(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),R=!1;m&&_?m.data.isEqual(_.data)?A!==N&&(r.track({type:3,doc:_}),R=!0):this.Ra(m,_)||(r.track({type:2,doc:_}),R=!0,(u&&this.Ia(_,u)>0||l&&this.Ia(_,l)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),R=!0):m&&!_&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(_?(o=o.add(_),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((h,p)=>function(_,A){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return N(_)-N(A)}(h.type,p.type)||this.Ia(h.doc,p.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new vs(this.query,e.Ta,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new yl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ce(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Il(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new vl(r))}),n}pa(e){this.la=e.hs,this.Pa=ce();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return vs.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},km=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Fm=class{constructor(e){this.key=e,this.wa=!1}},Lm=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new cr(a=>eb(a),Sl),this.Da=new Map,this.Ca=new Set,this.va=new Ae(H.comparator),this.Fa=new Map,this.Ma=new ua,this.xa={},this.Oa=new Map,this.Na=ca.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function kF(t,e,n=!0){return w(this,null,function*(){let r=Ob(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield Rb(r,e,n,!0),i})}function FF(t,e){return w(this,null,function*(){let n=Ob(t);yield Rb(n,e,!0,!1)})}function Rb(t,e,n,r){return w(this,null,function*(){let i=yield yF(t.localStore,tn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield LF(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Tb(t.remoteStore,i),a})}function LF(t,e,n,r,i){return w(this,null,function*(){t.Ba=(p,m,_)=>function(N,R,x,j){return w(this,null,function*(){let B=R.view.da(x);B.Xi&&(B=yield FD(N.localStore,R.query,!1).then(({documents:T})=>R.view.da(T,B)));let $=j&&j.targetChanges.get(R.targetId),Ie=j&&j.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(B,N.isPrimaryClient,$,Ie);return jD(N,R.targetId,J.fa),J.snapshot})}(t,p,m,_);let s=yield FD(t.localStore,e,!0),o=new Om(e,s.hs),a=o.da(s.documents),u=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);jD(t,n,l.fa);let h=new km(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function VF(t,e,n){return w(this,null,function*(){let r=Z(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Sl(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Im(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oy(r.remoteStore,i.targetId),Vm(r,i.targetId)}).catch(fa))):(Vm(r,i.targetId),yield Im(r.localStore,i.targetId,!0))})}function UF(t,e){return w(this,null,function*(){let n=Z(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oy(n.remoteStore,r.targetId))})}function jF(t,e,n){return w(this,null,function*(){let r=WF(t);try{let i=yield function(o,a){let u=Z(o),l=qe.now(),h=a.reduce((_,A)=>_.add(A.key),ce()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=En(),N=ce();return u.os.getEntries(_,h).next(R=>{A=R,A.forEach((x,j)=>{j.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,A)).next(R=>{p=R;let x=[];for(let j of a){let B=z1(j,p.get(j.key).overlayedDocument);B!=null&&x.push(new Tn(j.key,B,KD(B.value.mapValue),sr.exists(!0)))}return u.mutationQueue.addMutationBatch(_,l,x,a)}).next(R=>{m=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(_,R.batchId,x)})}).then(()=>({batchId:m.batchId,changes:rb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ae(pe)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield ma(r,i.changes),yield Ml(r.remoteStore)}catch(i){let s=ly(i,"Failed to persist write");n.reject(s)}})}function Nb(t,e){return w(this,null,function*(){let n=Z(t);try{let r=yield pF(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?we(o.wa):i.removedDocuments.size>0&&(we(o.wa),o.wa=!1))}),yield ma(n,r,e)}catch(r){yield fa(r)}})}function UD(t,e,n){let r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Z(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.U_)m.j_(a)&&(l=!0)}),l&&dy(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BF(t,e,n){return w(this,null,function*(){let r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ae(H.comparator);o=o.insert(s,Ut.newNoDocument(s,te.min()));let a=ce().add(s),u=new sl(te.min(),new Map,new Ae(pe),o,a);yield Nb(r,u),r.va=r.va.remove(s),r.Fa.delete(e),hy(r)}else yield Im(r.localStore,e,!1).then(()=>Vm(r,e,n)).catch(fa)})}function $F(t,e){return w(this,null,function*(){let n=Z(t),r=e.batch.batchId;try{let i=yield fF(n.localStore,e);xb(n,r,null),Mb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ma(n,i)}catch(i){yield fa(i)}})}function qF(t,e,n){return w(this,null,function*(){let r=Z(t);try{let i=yield function(o,a){let u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(we(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);xb(r,e,n),Mb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ma(r,i)}catch(i){yield fa(i)}})}function Mb(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function xb(t,e,n){let r=Z(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Vm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||Pb(t,r)})}function Pb(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(oy(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),hy(t))}function jD(t,e,n){for(let r of n)r instanceof vl?(t.Ma.addReference(r.key,e),HF(t,r)):r instanceof Il?(F("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||Pb(t,r.key)):Q()}function HF(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(F("SyncEngine","New document in limbo: "+n),t.Ca.add(r),hy(t))}function hy(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new H(Se.fromString(e)),r=t.Na.next();t.Fa.set(r,new Fm(n)),t.va=t.va.insert(n,r),Tb(t.remoteStore,new aa(tn(iy(n.path)),r,"TargetPurposeLimboResolution",zD.oe))}}function ma(t,e,n){return w(this,null,function*(){let r=Z(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=gm.Ki(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return w(this,null,function*(){let h=Z(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.qi,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>P.forEach(m.Qi,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!pa(p))throw p;F("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let _=h.ns.get(m),A=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(A);h.ns=h.ns.insert(m,N)}}})}(r.localStore,s))})}function zF(t,e){return w(this,null,function*(){let n=Z(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield _b(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new V(M.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ma(n,r.us)}})}function GF(t,e){let n=Z(t),r=n.Fa.get(e);if(r&&r.wa)return ce().add(r.key);{let i=ce(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Ob(t){let e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BF.bind(null,e),e.Sa.h_=PF.bind(null,e.eventManager),e.Sa.ka=OF.bind(null,e.eventManager),e}function WF(t){let e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$F.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qF.bind(null,e),e}var wl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=Rl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return hF(this.persistence,new ym,e.initialUser,this.serializer)}createPersistence(e){return new hm(pm.Hr,this.serializer)}createSharedClientState(e){return new wm}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Um=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>UD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zF.bind(null,this.syncEngine),yield NF(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Mm}()}createDatastore(e){let n=Rl(e.databaseInfo.databaseId),r=function(s){return new Tm(s)}(e.databaseInfo);return function(s,o,a,u){return new Cm(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Am(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>UD(this.syncEngine,n,0),function(){return hl.D()?new hl:new _m}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new Lm(i,s,o,a,u,l);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e;yield function(r){return w(this,null,function*(){let i=Z(r);F("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ga(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var jm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):wn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Bm=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=je.UNAUTHENTICATED,this.clientId=Xu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){F("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ly(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yg(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield _b(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function BD(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield QF(t);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>LD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>LD(e.remoteStore,i)),t._onlineComponents=e})}function KF(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function QF(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!KF(n))throw n;as("Error using user provided cache. Falling back to memory cache: "+n),yield yg(t,new wl)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield yg(t,new wl);return t._offlineComponents})}function kb(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield BD(t,t._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield BD(t,new Um))),t._onlineComponents})}function YF(t){return kb(t).then(e=>e.syncEngine)}function JF(t){return w(this,null,function*(){let e=yield kb(t),n=e.eventManager;return n.onListen=kF.bind(null,e.syncEngine),n.onUnlisten=VF.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FF.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UF.bind(null,e.syncEngine),n})}function XF(t,e,n={}){let r=new Zt;return t.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return function(s,o,a,u,l){let h=new jm({next:m=>{o.enqueueAndForget(()=>xF(s,p));let _=m.docs.has(a);!_&&m.fromCache?l.reject(new V(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?l.reject(new V(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Pm(iy(a.path),h,{includeMetadataChanges:!0,ra:!0});return MF(s,p)}(yield JF(t),t.asyncQueue,e,n,r)})),r.promise}function Fb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var $D=new Map;function Lb(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZF(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qD(t){if(!H.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function HD(t){if(H.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function Is(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fy(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var _l=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ws=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _l({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _l(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vg;switch(r.type){case"firstParty":return new Eg(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=$D.get(n);r&&(F("ComponentProvider","Removing Datastore"),$D.delete(n),r.terminate())}(this),Promise.resolve()}};function Vb(t,e,n,r={}){var i;let s=(t=Is(t,ws))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&as("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=je.MOCK_USER;else{a=GT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new je(l)}t._authCredentials=new Ig(new Ju(a,u))}}var $m=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},wt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},or=class t extends $m{constructor(e,n,r){super(e,n,iy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ub(t,e,...n){if(t=it(t),Lb("collection","path",e),t instanceof ws){let r=Se.fromString(e,...n);return HD(r),new or(t,null,r)}{if(!(t instanceof wt||t instanceof or))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return HD(r),new or(t.firestore,null,r)}}function py(t,e,...n){if(t=it(t),arguments.length===1&&(e=Xu.newId()),Lb("doc","path",e),t instanceof ws){let r=Se.fromString(e,...n);return qD(r),new wt(t,null,new H(r))}{if(!(t instanceof wt||t instanceof or))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Se.fromString(e,...n));return qD(r),new wt(t.firestore,t instanceof or?t.converter:null,new H(r))}}var qm=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new fl(this,"async_queue_retry"),this.hu=()=>{let n=mg();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=mg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=mg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Zt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return w(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!pa(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw wn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=Rm.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Q()}verifyOperationInProgress(){}du(){return w(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var _s=class extends ws{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new qm}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$b(this),this._firestoreClient.terminate()}};function jb(t,e){let n=typeof t=="object"?t:es(),r=typeof t=="string"?t:e||"(default)",i=Qo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=zT("firestore");s&&Vb(i,...s)}return i}function Bb(t){return t._firestoreClient||$b(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $b(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new Sg(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Fb(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Bm(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var la=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(st.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var da=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var El=class{constructor(e){this._methodName=e}};var ha=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var eL=/^__.*__$/,Hm=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Kr(e,this.data,n,this.fieldTransforms)}};function qb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var zm=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Tl(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(qb(this.fu)&&eL.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Gm=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rl(e)}Fu(e,n,r,i=!1){return new zm({fu:e,methodName:n,vu:r,path:It.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Hb(t){let e=t._freezeSettings(),n=Rl(t._databaseId);return new Gm(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zb(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Qb("Data must be an object, but it was:",o,r);let a=Wb(r,o),u,l;if(s.merge)u=new Xt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=tL(e,p,n);if(!o.contains(m))throw new V(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rL(h,m)||h.push(m)}u=new Xt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Hm(new Vt(a),u,l)}function Gb(t,e){if(Kb(t=it(t)))return Qb("Unsupported field value:",e,t),Wb(t,e);if(t instanceof El)return function(r,i){if(!qb(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Gb(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=qe.fromDate(r);return{timestampValue:ul(i.serializer,s)}}if(r instanceof qe){let s=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ul(i.serializer,s)}}if(r instanceof ha)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof la)return{bytesValue:pb(i.serializer,r._byteString)};if(r instanceof wt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${fy(r)}`)}(t,e)}function Wb(t,e){let n={};return GD(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(t,(r,i)=>{let s=Gb(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Kb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof ha||t instanceof la||t instanceof wt||t instanceof El)}function Qb(t,e,n){if(!Kb(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=fy(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function tL(t,e,n){if((e=it(e))instanceof da)return e._internalPath;if(typeof e=="string")return Yb(t,e);throw Tl("Field path arguments must be of type string or ",t,!1,void 0,n)}var nL=new RegExp("[~\\*/\\[\\]]");function Yb(t,e,n){if(e.search(nL)>=0)throw Tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new da(...e.split("."))._internalPath}catch{throw Tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tl(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,a+t+u)}function rL(t,e){return t.some(n=>n.isEqual(e))}var Dl=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Wm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Jb("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Wm=class extends Dl{data(){return super.data()}};function Jb(t,e){return typeof e=="string"?Yb(t,e):e instanceof da?e._internalPath:e._delegate._internalPath}var Km=class{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ts(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ha(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=ey(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){let n=_n(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Se.fromString(e);we(wb(r));let i=new nl(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||wn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Xb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Qm=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bl=class extends Dl{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ym(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Jb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ym=class extends bl{data(e={}){return super.data(e)}};function Zb(t){t=Is(t,wt);let e=Is(t.firestore,_s);return XF(Bb(e),t._key).then(n=>iL(e,t,n))}var Jm=class extends Km{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}};function eC(t,e,n){t=Is(t,wt);let r=Is(t.firestore,_s),i=Xb(t.converter,e,n);return nC(r,[zb(Hb(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,sr.none())])}function tC(t,e){let n=Is(t.firestore,_s),r=py(t),i=Xb(t.converter,e);return nC(n,[zb(Hb(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function nC(t,e){return function(r,i){let s=new Zt;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return jF(yield YF(r),i,s)})),s.promise}(Bb(t),e)}function iL(t,e,n){let r=n.docs.get(e._key),i=new Jm(t);return new bl(t,i,e._key,r,new Qm(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Es=i})(rr),nr(new St("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new _s(new wg(r.getProvider("auth-internal")),new Dg(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ve(yD,"4.6.4",e),Ve(yD,"4.6.4","esm2017")})();var sL="firebase",oL="10.12.4";Ve(sL,oL,"app");var Jr=new Kn("ANGULARFIRE2_VERSION");function Pl(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ya=(t,e)=>{let n=e?[e]:Hu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Cs=class{constructor(){return ya(aL)}},aL="app-check";function bs(){}var xl=class{zone;delegate;constructor(e,n=Ud){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},gy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),n.pipe(Me({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ss=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new xl(Zone.current)),this.insideAngular=n.run(()=>new xl(Zone.current,Vd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(q(me))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ol(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function cL(t){return Ol().ngZone.runOutsideAngular(()=>t())}function Yr(t){return Ol().ngZone.run(()=>t())}function uL(t){return lL(Ol())(t)}function lL(t){return function(n){return n=n.lift(new gy(t.ngZone)),n.pipe(Vn(t.outsideAngular),Ln(t.insideAngular))}}var dL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Yr(()=>t.apply(void 0,r))},ut=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Yr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs))),r[s]=dL(r[s],n));let i=cL(()=>t.apply(this,r));if(!e)if(i instanceof re){let s=Ol();return i.pipe(Vn(s.outsideAngular),Ln(s.insideAngular))}else return Yr(()=>i);return i instanceof re?i.pipe(uL):i instanceof Promise?Yr(()=>new Promise((s,o)=>i.then(a=>Yr(()=>s(a)),a=>Yr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Yr(()=>i)};var Dn=class{constructor(e){return e}},Xr=class{constructor(){return Hu()}};function hL(t){return t&&t.length===1?t[0]:new Dn(es())}var my=new G("angularfire2._apps"),fL={provide:Dn,useFactory:hL,deps:[[new rt,my]]},pL={provide:Xr,deps:[[new rt,my]]};function gL(t){return(e,n)=>{let r=n.get(Gt);Ve("angularfire",Jr.full,"core"),Ve("angularfire",Jr.full,"app"),Ve("angular",AE.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Dn(i)}}function O9(t,...e){return Dt([fL,pL,{provide:my,useFactory:gL(t),multi:!0,deps:[me,Ft,Ss,...e]}])}var k9=ut(og,!0);function IC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var wC=IC,_C=new vn("auth","Firebase",IC());var jl=new er("@firebase/auth");function mL(t,...e){jl.logLevel<=ae.WARN&&jl.warn(`Auth (${rr}): ${t}`,...e)}function Fl(t,...e){jl.logLevel<=ae.ERROR&&jl.error(`Auth (${rr}): ${t}`,...e)}function an(t,...e){throw Vy(t,...e)}function Zr(t,...e){return Vy(t,...e)}function EC(t,e,n){let r=Object.assign(Object.assign({},wC()),{[e]:n});return new vn("auth","Firebase",r).create(e,{appName:t.name})}function Sn(t){return EC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return _C.create(t,...e)}function W(t,e,...n){if(!t)throw Vy(e,...n)}function bn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Fl(e),new Error(e)}function dr(t,e){t||bn(e)}function Bl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TC(){return rC()==="http:"||rC()==="https:"}function rC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function yL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TC()||KT()||"connection"in navigator)?navigator.onLine:!0}function vL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ei=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=WT()||QT()}get(){return yL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Uy(t,e){dr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var $l=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var IL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var wL=new ei(3e4,6e4);function An(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Rn(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return DC(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Go(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),$l.fetch()(bC(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function DC(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},IL),e);try{let i=new wy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw kl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw kl(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw EC(t,h,l);an(t,h)}}catch(i){if(i instanceof vt)throw i;an(t,"network-request-failed",{message:String(i)})}})}function ba(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Rn(t,e,n,r,i);return"mfaPendingCredential"in l&&an(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function bC(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Uy(t.config,i):`${t.config.apiScheme}://${i}`}function _L(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),wL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function kl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Zr(t,e,r);return i.customData._tokenResponse=n,i}function iC(t){return t!==void 0&&t.enterprise!==void 0}var _y=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _L(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function EL(t,e){return w(this,null,function*(){return Rn(t,"GET","/v2/recaptchaConfig",An(t,e))})}function TL(t,e){return w(this,null,function*(){return Rn(t,"POST","/v1/accounts:delete",e)})}function CC(t,e){return w(this,null,function*(){return Rn(t,"POST","/v1/accounts:lookup",e)})}function va(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function jy(t,e=!1){return w(this,null,function*(){let n=it(t),r=yield n.getIdToken(e),i=By(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:va(yy(i.auth_time)),issuedAtTime:va(yy(i.iat)),expirationTime:va(yy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function yy(t){return Number(t)*1e3}function By(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Bp(n);return i?JSON.parse(i):(Fl("Failed to decode base64 JWT payload"),null)}catch(i){return Fl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function sC(t){let e=By(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function wa(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof vt&&DL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function DL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ey=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _a=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ql(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield wa(t,CC(n,{idToken:r}));W(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?SC(s.providerUserInfo):[],a=bL(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _a(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function $y(t){return w(this,null,function*(){let e=it(t);yield ql(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function bL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function SC(t){return t.map(e=>{var{providerId:n}=e,r=jd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function CL(t,e){return w(this,null,function*(){let n=yield DC(t,{},()=>w(this,null,function*(){let r=Go({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=bC(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$l.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function SL(t,e){return w(this,null,function*(){return Rn(t,"POST","/v2/accounts:revokeToken",An(t,e))})}var Ia=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=sC(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield CL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return bn("not implemented")}};function lr(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var As=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=jd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ey(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _a(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield wa(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return jy(this,e)}reload(){return $y(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ql(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Lt(this.auth.app))return Promise.reject(Sn(this.auth));let e=yield this.getIdToken();return yield wa(this,TL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:B,emailVerified:$,isAnonymous:Ie,providerData:J,stsTokenManager:T}=n;W(B&&T,e,"internal-error");let y=Ia.fromJSON(this.name,T);W(typeof B=="string",e,"internal-error"),lr(p,e.name),lr(m,e.name),W(typeof $=="boolean",e,"internal-error"),W(typeof Ie=="boolean",e,"internal-error"),lr(_,e.name),lr(A,e.name),lr(N,e.name),lr(R,e.name),lr(x,e.name),lr(j,e.name);let v=new t({uid:B,auth:e,email:m,emailVerified:$,displayName:p,isAnonymous:Ie,photoURL:A,phoneNumber:_,tenantId:N,stsTokenManager:y,createdAt:x,lastLoginAt:j});return J&&Array.isArray(J)&&(v.providerData=J.map(E=>Object.assign({},E))),R&&(v._redirectEventId=R),v}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new Ia;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ql(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?SC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ia;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _a(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var oC=new Map;function Cn(t){dr(t instanceof Function,"Expected a class definition");let e=oC.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,oC.set(t,e),e)}var AL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ty=AL;function Ll(t,e,n){return`firebase:${t}:${e}:${n}`}var Hl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Ll(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ll("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?As._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Cn(Ty),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Cn(Ty),o=Ll(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=As._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function aC(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xC(e))return"Blackberry";if(PC(e))return"Webos";if(qy(e))return"Safari";if((e.includes("chrome/")||RC(e))&&!e.includes("edge/"))return"Chrome";if(MC(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function AC(t=Le()){return/firefox\//i.test(t)}function qy(t=Le()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RC(t=Le()){return/crios\//i.test(t)}function NC(t=Le()){return/iemobile/i.test(t)}function MC(t=Le()){return/android/i.test(t)}function xC(t=Le()){return/blackberry/i.test(t)}function PC(t=Le()){return/webos/i.test(t)}function Xl(t=Le()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function RL(t=Le()){var e;return Xl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NL(){return YT()&&document.documentMode===10}function OC(t=Le()){return Xl(t)||MC(t)||PC(t)||xC(t)||/windows phone/i.test(t)||NC(t)}function ML(){try{return!!(window&&window!==window.top)}catch{return!1}}function kC(t,e=[]){let n;switch(t){case"Browser":n=aC(Le());break;case"Worker":n=`${aC(Le())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rr}/${r}`}var Dy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function xL(n){return w(this,arguments,function*(t,e={}){return Rn(t,"GET","/v2/passwordPolicy",An(t,e))})}var PL=6,by=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Cy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zl(this),this.idTokenSubscription=new zl(this),this.beforeStateQueue=new Dy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_C,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Hl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield CC(this,{idToken:e}),r=yield As._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(Lt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield ql(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=vL()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Lt(this.app))return Promise.reject(Sn(this));let n=e?it(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Lt(this.app)?Promise.reject(Sn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Lt(this.app)?Promise.reject(Sn(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Cn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield xL(this),n=new by(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield SL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Cn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield Hl.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&mL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ni(t){return it(t)}var zl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=eD(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zl={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OL(t){Zl=t}function FC(t){return Zl.loadJS(t)}function kL(){return Zl.recaptchaEnterpriseScript}function FL(){return Zl.gapiScript}function LC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var LL="recaptcha-enterprise",VL="NO_RECAPTCHA",Sy=class{constructor(e){this.type=LL,this.auth=ni(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){EL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new _y(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;iC(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(VL)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&iC(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=kL();u.length!==0&&(u+=a),FC(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function cC(t,e,n,r=!1){return w(this,null,function*(){let i=new Sy(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Ay(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield cC(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield cC(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Hy(t,e){let n=Qo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Vr(s,e??{}))return i;an(i,"already-initialized")}return n.initialize({options:e})}function UL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Cn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function zy(t,e,n){let r=ni(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=VC(e),{host:o,port:a}=jL(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||BL()}function VC(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jL(t){let e=VC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:uC(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:uC(o)}}}function uC(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function BL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ea=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bn("not implemented")}_getIdTokenResponse(e){return bn("not implemented")}_linkToIdToken(e,n){return bn("not implemented")}_getReauthenticationResolver(e){return bn("not implemented")}};function $L(t,e){return w(this,null,function*(){return Rn(t,"POST","/v1/accounts:signUp",e)})}function qL(t,e){return w(this,null,function*(){return ba(t,"POST","/v1/accounts:signInWithPassword",An(t,e))})}function HL(t,e){return w(this,null,function*(){return ba(t,"POST","/v1/accounts:signInWithEmailLink",An(t,e))})}function zL(t,e){return w(this,null,function*(){return ba(t,"POST","/v1/accounts:signInWithEmailLink",An(t,e))})}var Ta=class t extends Ea{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ay(e,n,"signInWithPassword",qL);case"emailLink":return HL(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ay(e,r,"signUpPassword",$L);case"emailLink":return zL(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function vy(t,e){return w(this,null,function*(){return ba(t,"POST","/v1/accounts:signInWithIdp",An(t,e))})}function GL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WL(t){let e=Xi(Zi(t)).link,n=e?Xi(Zi(e)).deep_link_id:null,r=Xi(Zi(t)).deep_link_id;return(r?Xi(Zi(r)).link:null)||r||n||e||t}var Gl=class t{constructor(e){var n,r,i,s,o,a;let u=Xi(Zi(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=GL((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=WL(e);try{return new t(n)}catch{return null}}};var UC=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ta._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Gl.parseLink(r);return W(i,"argument-error"),Ta._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Wl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ry=class extends Wl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function KL(t,e){return w(this,null,function*(){return ba(t,"POST","/v1/accounts:signUp",An(t,e))})}var Rs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield As._fromIdTokenResponse(e,r,i),o=lC(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=lC(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function lC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Ny=class t extends vt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function jC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ny._fromErrorAndOperation(t,s,e,r):s})}function QL(t,e,n=!1){return w(this,null,function*(){let r=yield wa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Rs._forOperation(t,"link",r)})}function YL(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(Lt(r.app))return Promise.reject(Sn(r));let i="reauthenticate";try{let s=yield wa(t,jC(r,i,e,t),n);W(s.idToken,r,"internal-error");let o=By(s.idToken);W(o,r,"internal-error");let{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),Rs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&an(r,"user-mismatch"),s}})}function BC(t,e,n=!1){return w(this,null,function*(){if(Lt(t.app))return Promise.reject(Sn(t));let r="signIn",i=yield jC(t,r,e),s=yield Rs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Gy(t,e){return w(this,null,function*(){return BC(ni(t),e)})}function $C(t){return w(this,null,function*(){let e=ni(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Wy(t,e,n){return w(this,null,function*(){if(Lt(t.app))return Promise.reject(Sn(t));let r=ni(t),o=yield Ay(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",KL).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$C(t),u}),a=yield Rs._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Ky(t,e,n){return Lt(t.app)?Promise.reject(Sn(t)):Gy(it(t),UC.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&$C(t),r}))}function JL(t,e){return w(this,null,function*(){return Rn(t,"POST","/v1/accounts:createAuthUri",An(t,e))})}function Qy(t,e){return w(this,null,function*(){let n=TC()?Bl():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=yield JL(it(t),r);return i||[]})}function Yy(t,e,n,r){return it(t).onIdTokenChanged(e,n,r)}function Jy(t,e,n){return it(t).beforeAuthStateChanged(e,n)}var Kl="__sak";var Ql=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kl,"1"),this.storage.removeItem(Kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function XL(){let t=Le();return qy(t)||Xl(t)}var ZL=1e3,eV=10,tV=(()=>{class t extends Ql{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=XL()&&ML(),this.fallbackToPolling=OC(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);NL()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,eV):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},ZL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield kn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield kn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield kn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),qC=tV;var nV=(()=>{class t extends Ql{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Xy=nV;function rV(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var iV=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield rV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function HC(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var My=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=HC("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function on(){return window}function sV(t){on().location.href=t}function zC(){return typeof on().WorkerGlobalScope<"u"&&typeof on().importScripts=="function"}function oV(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function aV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cV(){return zC()?self:null}var GC="firebaseLocalStorageDb",uV=1,Yl="firebaseLocalStorage",WC="fbase_key",ti=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ed(t,e){return t.transaction([Yl],e?"readwrite":"readonly").objectStore(Yl)}function lV(){let t=indexedDB.deleteDatabase(GC);return new ti(t).toPromise()}function xy(){let t=indexedDB.open(GC,uV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Yl,{keyPath:WC})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Yl)?e(r):(r.close(),yield lV(),e(yield xy()))}))})}function dC(t,e,n){return w(this,null,function*(){let r=ed(t,!0).put({[WC]:e,value:n});return new ti(r).toPromise()})}function dV(t,e){return w(this,null,function*(){let n=ed(t,!1).get(e),r=yield new ti(n).toPromise();return r===void 0?null:r.value})}function hC(t,e){let n=ed(t,!0).delete(e);return new ti(n).toPromise()}var hV=800,fV=3,pV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield xy(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>fV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return zC()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=iV._getInstance(cV()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield oV(),!this.activeServiceWorker)return;this.sender=new My(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||aV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield xy();return yield dC(n,Kl,"1"),yield hC(n,Kl),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>dC(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>dV(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>hC(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=ed(s,!1).getAll();return new ti(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),hV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),KC=pV;var q9=LC("rcb"),H9=new ei(3e4,6e4);function gV(t,e){return e?Cn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Da=class extends Ea{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function mV(t){return BC(t.auth,new Da(t),t.bypassAuthState)}function yV(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),YL(n,new Da(t),t.bypassAuthState)}function vV(t){return w(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),QL(n,new Da(t),t.bypassAuthState)})}var Py=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mV;case"linkViaPopup":case"linkViaRedirect":return vV;case"reauthViaPopup":case"reauthViaRedirect":return yV;default:an(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var z9=new ei(2e3,1e4);var IV="pendingRedirect",Vl=new Map,Oy=class t extends Py{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Vl.get(this.auth._key());if(!e){try{let r=(yield wV(this.resolver,this.auth))?yield kn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vl.set(this.auth._key(),e)}return this.bypassAuthState||Vl.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return kn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,kn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function wV(t,e){return w(this,null,function*(){let n=TV(e),r=EV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function _V(t,e){Vl.set(t._key(),e)}function EV(t){return Cn(t._redirectPersistence)}function TV(t){return Ll(IV,t.config.apiKey,t.name)}function DV(t,e,n=!1){return w(this,null,function*(){if(Lt(t.app))return Promise.reject(Sn(t));let r=ni(t),i=gV(r,e),o=yield new Oy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var bV=10*60*1e3,ky=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!QC(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bV&&this.cachedEventUids.clear(),this.cachedEventUids.has(fC(e))}saveEventToCache(e){this.cachedEventUids.add(fC(e)),this.lastProcessedEventTime=Date.now()}};function fC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function QC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function CV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QC(t);default:return!1}}function SV(n){return w(this,arguments,function*(t,e={}){return Rn(t,"GET","/v1/projects",e)})}var AV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RV=/^https?/;function NV(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield SV(t);for(let n of e)try{if(MV(n))return}catch{}an(t,"unauthorized-domain")})}function MV(t){let e=Bl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!RV.test(n))return!1;if(AV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var xV=new ei(3e4,6e4);function pC(){let t=on().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PV(t){return new Promise((e,n)=>{var r,i,s;function o(){pC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pC(),n(Zr(t,"network-request-failed"))},timeout:xV.get()})}if(!((i=(r=on().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=on().gapi)===null||s===void 0)&&s.load)o();else{let a=LC("iframefcb");return on()[a]=()=>{gapi.load?o():n(Zr(t,"network-request-failed"))},FC(`${FL()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ul=null,e})}var Ul=null;function OV(t){return Ul=Ul||PV(t),Ul}var kV=new ei(5e3,15e3),FV="__/auth/iframe",LV="emulator/auth/iframe",VV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jV(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Uy(e,LV):`https://${t.config.authDomain}/${FV}`,r={apiKey:e.apiKey,appName:t.name,v:rr},i=UV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Go(r).slice(1)}`}function BV(t){return w(this,null,function*(){let e=yield OV(t),n=on().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:jV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VV,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Zr(t,"network-request-failed"),a=on().setTimeout(()=>{s(o)},kV.get());function u(){on().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var $V={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qV=500,HV=600,zV="_blank",GV="http://localhost",Jl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function WV(t,e,n,r=qV,i=HV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},$V),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Le().toLowerCase();n&&(a=RC(l)?zV:n),AC(l)&&(e=e||GV,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[_,A])=>`${m}${_}=${A},`,"");if(RL(l)&&a!=="_self")return KV(e||"",a),new Jl(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new Jl(p)}function KV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var QV="__/auth/handler",YV="emulator/auth/handler",JV=encodeURIComponent("fac");function gC(t,e,n,r,i,s){return w(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rr,eventId:i};if(e instanceof Wl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Ry){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${JV}=${encodeURIComponent(u)}`:"";return`${XV(t)}?${Go(a).slice(1)}${l}`})}function XV({config:t}){return t.emulator?Uy(t,YV):`https://${t.authDomain}/${QV}`}var Iy="webStorageSupport",Fy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xy,this._completeRedirectFn=DV,this._overrideRedirectResult=_V}_openPopup(e,n,r,i){return w(this,null,function*(){var s;dr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield gC(e,n,r,Bl(),i);return WV(e,o,HC())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield gC(e,n,r,Bl(),i);return sV(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(dr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield BV(e),r=new ky(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Iy,{type:Iy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Iy];o!==void 0&&n(!!o),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OC()||qy()||Xl()}},YC=Fy;var mC="@firebase/auth",yC="1.7.5";var Ly=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function ZV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eU(t){nr(new St("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kC(t)},l=new Cy(r,i,s,u);return UL(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nr(new St("auth-internal",e=>{let n=ni(e.getProvider("auth").getImmediate());return(r=>new Ly(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(mC,yC,ZV(t)),Ve(mC,yC,"esm2017")}var tU=5*60,nU=Hp("authIdTokenMaxAge")||tU,vC=null,rU=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nU)return;let i=n?.token;vC!==i&&(vC=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Zy(t=es()){let e=Qo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Hy(t,{popupRedirectResolver:YC,persistence:[KC,qC,Xy]}),r=Hp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=rU(s.toString());Jy(n,o,()=>o(n.currentUser)),Yy(n,a=>o(a))}}let i=$p("auth");return i&&zy(n,`http://${i}`),n}function iU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}OL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",iU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eU("Browser");var JC="auth",ri=class{constructor(e){return e}},Ca=class{constructor(){return ya(JC)}};var ev=new G("angularfire2.auth-instances");function KU(t,e){let n=Pl(JC,t,e);return n&&new ri(n)}function QU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ri(r)}}var YU={provide:Ca,deps:[[new rt,ev]]},JU={provide:ri,useFactory:KU,deps:[[new rt,ev],Dn]};function AW(t,...e){return Ve("angularfire",Jr.full,"auth"),Dt([JU,YU,{provide:ev,useFactory:QU(t),multi:!0,deps:[me,Ft,Ss,Xr,[new rt,Cs],...e]}])}var XC=ut(Wy,!0);var ZC=ut(Qy,!0);var RW=ut(Zy,!0);var tv=ut(Ky,!0);var Nn=class{constructor(e){return e}},e0="firestore",nv=class{constructor(){return ya(e0)}};var rv=new G("angularfire2.firestore-instances");function ZU(t,e){let n=Pl(e0,t,e);return n&&new Nn(n)}function ej(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Nn(r)}}var tj={provide:nv,deps:[[new rt,rv]]},nj={provide:Nn,useFactory:ZU,deps:[[new rt,rv],Dn]};function W3(t,...e){return Ve("angularfire",Jr.full,"fst"),Dt([nj,tj,{provide:rv,useFactory:ej(t),multi:!0,deps:[me,Ft,Ss,Xr,[new rt,Ca],[new rt,Cs],...e]}])}var K3=ut(tC,!0);var Sa=ut(Ub,!0);var Ns=ut(py,!0);var iv=ut(Zb,!0);var Q3=ut(jb,!0);var td=ut(eC,!0);var n0=(()=>{let e=class e{constructor(r){this.firestore=r}guardarLogin(r,i){let s="userLogin",o={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},a=new Date().toLocaleDateString("es-ES",o),u={Usuario:r,Role:i,Fecha_Ingreso:a},l=Sa(this.firestore,s);td(Ns(l),u).then(()=>{console.log("Datos de LogIn guardados en Firestore")}).catch(h=>{console.error("Error al guardar datos de LogIn en Firestore: ",h)})}};e.\u0275fac=function(i){return new(i||e)(q(Nn))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var t6=(()=>{let e=class e{constructor(r,i,s){this.authFirebase=r,this.dataBase=i,this.firestore=s,this.tokenKey="authToken",this.loggedIn=!1,this.userData={},this.userRoleSubject=new Oe(localStorage.getItem("userRole")),this.userRole$=this.userRoleSubject.asObservable()}login({email:r,password:i}){return this.loggedIn=!0,tv(this.authFirebase,r,i).then(s=>{let o=s.user,a="...",u=Ns(Sa(this.firestore,"users&role"),o.uid);return iv(u).then(l=>{if(l.exists()){let p=l.data().role;this.userRoleSubject.next(p),localStorage.setItem("userRole",p),this.dataBase.guardarLogin(r,p)}else console.error("Documento de usuario no encontrado en Firestore")}).catch(l=>{console.error("Error al consultar Firestore:",l)}),this.setAuthToken(a),s})}register(r,i,s){return w(this,null,function*(){try{this.loggedIn=!0;let o=yield XC(this.authFirebase,r,i),a=o.user,u=Ns(Sa(this.firestore,"users&role"),a.uid);return yield td(u,{email:r,role:s}),this.dataBase.guardarLogin(r,s),yield tv(this.authFirebase,r,i),o}catch(o){throw console.error("Error al registrar el usuario:",o),o}})}setAuthToken(r){localStorage.setItem(this.tokenKey,r)}getAuthToken(){return localStorage.getItem(this.tokenKey)}checkIfUserExists(r){return w(this,null,function*(){return ZC(this.authFirebase,r).then(i=>i&&i.length>0).catch(i=>(console.error("Error al verificar el usuario:",i),!1))})}getCurrentUser(){return new re(r=>{let i=this.authFirebase.onAuthStateChanged(s=>{r.next(s)});return()=>{i()}})}getUserRole(){return this.getCurrentUser().pipe(Ke(r=>{if(r){let i=Ns(this.firestore,`users&role/${r.uid}`);return Te(iv(i)).pipe(ee(s=>{let o=s.data();return o?o.role:null}))}else return Te(Promise.resolve(null))}))}isLoggedIn(){return!!this.getAuthToken()}logout(){return this.loggedIn=!1,localStorage.removeItem(this.tokenKey),this.authFirebase.signOut()}};e.\u0275fac=function(i){return new(i||e)(q(ri),q(n0),q(Nn))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();export{L as a,be as b,ij as c,sj as d,w as e,re as f,Oe as g,Te as h,ee as i,dS as j,z as k,bw as l,U as m,fo as n,G as o,q as p,k as q,Hn as r,jw as s,go as t,mo as u,Zc as v,Mz as w,xz as x,yf as y,nu as z,Mt as A,Pz as B,Oz as C,Wt as D,Mf as E,cM as F,vM as G,wE as H,AM as I,RM as J,_E as K,EE as L,kf as M,Vz as N,TE as O,Uz as P,jz as Q,GM as R,WM as S,Bz as T,KM as U,$z as V,SE as W,Io as X,kE as Y,ji as Z,p4 as _,g4 as $,bx as aa,kx as ba,A4 as ca,X4 as da,BP as ea,BT as fa,CG as ga,O9 as ha,k9 as ia,AW as ja,RW as ka,qe as la,Nn as ma,W3 as na,K3 as oa,Sa as pa,Ns as qa,Q3 as ra,td as sa,t6 as ta};
